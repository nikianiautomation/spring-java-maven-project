/*! For license information please see jioAds.js.LICENSE.txt */
var JioAds;(()=>{var e={73:(e,t,i)=>{e.exports=i(638)},733:e=>{e.exports={SPACE:" ".charCodeAt(0),COLON:":".charCodeAt(0),COMMA:",".charCodeAt(0),EQUAL:"=".charCodeAt(0),QUOTE:'"'.charCodeAt(0),MINUS:"-".charCodeAt(0),PERIOD:".".charCodeAt(0),NEW_LINE_LF:"\n".charCodeAt(0),NEW_LINE_CR:"\r".charCodeAt(0),BACK_SLASH:"\\".charCodeAt(0),HASH:"#".charCodeAt(0),AT:"@".charCodeAt(0),NUMBER_START:"0".charCodeAt(0),NUMBER_STOP:"9".charCodeAt(0)}},808:e=>{e.exports={pdt:0,deltaduration:0,caid:null,caiddur:0,dateRangeId:null,spotAdEndDelay:0}},254:e=>{e.exports={BASIC:"BASIC",MEDIA_SEGMENT:"MEDIA_SEGMENT",MEDIA_PLAYLIST:"MEDIA_PLAYLIST",MASTER_PLAYLIST:"MASTER_PLAYLIST",TRALING_MEDIA_SEGMENT:"TRAILING_MEDIA_SEGMENT",URL_SEGMENT_ENDING:"URL_SEGMENT_ENDING",GROUPING:"GROUPING",BLACK_OUT:"BLACKOUT",INDEPENDANT_SEGMENT:"INDEPENDANT_SEGMENT"}},985:(e,t,i)=>{var a=i(120),n=i(808);e.exports=function(e){var t=a(e),i=Object.assign({},n);if(t.tag="Blackout","CHAPTER_START"==t.type&&t.caid&&(t.caid=function(e){if(e.startsWith("0x")){for(var t=e.replace("0x","").toString(),i="",a=0;a<t.length;a+=2)i+=String.fromCharCode(parseInt(t.substr(a,2),16));return i}return e}(t.caid),t.at=new Date(i.pdt).getTime()+1e3*i.deltaduration,n.caiddur=t.at,n.caid=t.caid),"33"==t.type||"CHAPTER_END"==t.type){t.caid=i.caid;var r=new Date(i.pdt).getTime()+1e3*i.deltaduration;t.at=r-1e3*i.spotAdEndDelay,r>i.caiddur&&t.at<i.caiddur&&(t.at=i.caiddur+1e3),n.caid=null,n.caiddur=null}return t.id=t.at,t}},959:e=>{e.exports=function(e){var t={length:0,offset:0};t.length=parseInt(e);var i=e.lastIndexOf("@");return~i&&(t.offset=parseInt(e.slice(i+1))),t}},975:(e,t,i)=>{var a=i(120),n=i(747),r=i(808);e.exports=function(e){var t=a(e);if(t.tag="DateRange",t.startDate&&(t.startDate=n(t.startDate)),t.endDate&&(t.endDate=n(t.endDate)),t.duration&&(t.duration=parseFloat(t.duration)),t.plannedDuration?t.plannedDuration=parseFloat(t.plannedDuration):t.plannedDuration=t.duration,t.xAdCreativeSignaling){t.xAdCreativeSignaling=atob(t.xAdCreativeSignaling);var i=JSON.parse(t.xAdCreativeSignaling).identifiers[0].custom_vast_data.split("|");t.caid=i[0],t.type="CHAPTER_START",t.impid=i[1]?i[1]:"",t.at=new Date(r.pdt).getTime()+1e3*r.deltaduration,t.startDate&&delete t.startDate,t.endDate&&delete t.endDate,r.dateRangeId=t.id,r.caid=t.caid,r.caiddur=t.at}return t}},70:e=>{e.exports=function(e){return parseInt(e)||0}},844:(e,t,i)=>{var a=i(808);e.exports=function(e){var t={caid:"",tag:"Discontinuity"};return a.caid&&a.dateRangeId&&(t.caid=a.caid,t.id=a.dateRangeId),t.type="CHAPTER_END",t.at=new Date(a.pdt).getTime()+1e3*a.deltaduration,a.caiddur!=t.at&&(a.caid=null,a.dateRangeId=null),t}},470:e=>{e.exports=function(e,t){return t.segments.length+1}},380:(e,t,i)=>{var a=i(120);e.exports=function(e){return a(e)}},584:(e,t,i)=>{var a=i(959),n=i(120);e.exports=function(e){var t=n(e);return t.byterange&&(t.byterange=a(t.byterange)),t}},622:e=>{e.exports=function(e){return parseInt(e)||0}},404:(e,t,i)=>{var a=i(120);e.exports=function(e){var t={groupId:"default"};return a(e,!0,t),t}},206:(e,t,i)=>{i(120);var a=i(808);e.exports=function(e){var t={caid:""},i=Object.assign({},a);if(t.tag="Oatcls",i.caid){t.caid=i.caid,t.type="CHAPTER_END";var n=new Date(i.pdt).getTime()+1e3*i.deltaduration;t.at=n-1e3*i.spotAdEndDelay,n>i.caiddur&&t.at<i.caiddur&&(t.at=i.caiddur+1e3),t.id=i.dateRangeId||t.at,a.caid=null,a.caiddur=null}return t}},153:e=>{e.exports=function(e){return e.trim()}},348:(e,t,i)=>{var a=i(747),n=i(808);e.exports=function(e){var t=a(e);return n.pdt=t,n.deltaduration=0,t}},883:(e,t,i)=>{var a=i(120);e.exports=function(e){return a(e)}},569:(e,t,i)=>{var a=i(120);e.exports=function(e){var t=a(e,!0);return"timeOffset"in t&&(t.timeOffset=parseFloat(t.timeOffset)),t}},406:(e,t,i)=>{var a=i(120);e.exports=function(e){var t=a(e);return"bandwidth"in t&&(t.bandwidth=parseInt(t.bandwidth)),"averageBandwidth"in t&&(t.averageBandwidth=parseInt(t.averageBandwidth)),"resolution"in t&&(t.resolution=parseInt(t.resolution)),"frameRate"in t&&(t.frameRate=parseFloat(t.frameRate)),"codecs"in t&&(t.codecs=t.codecs.split(";")),t}},642:e=>{e.exports=function(e){return parseInt(e)||-1}},612:e=>{e.exports=function(e){return parseInt(e.trim())||0}},780:(e,t,i)=>{var a=/\"/g,n=/\W/g,r=i(733),o=i(346),s=i(808);e.exports=function(e){var t="",i="",c={duration:"",title:""};a.lastIndex=0,n.lastIndex=0;for(var d=0,l=e[d].charCodeAt(0);l>=r.NUMBER_START&&l<=r.NUMBER_STOP||l===r.MINUS||l===r.PERIOD;)c.duration+=e[d],l=++d>e.length-1?"":e[d].charCodeAt(0);c.duration=c.duration&&parseFloat(c.duration)||-1,s.deltaduration=s.deltaduration+c.duration;for(var u=d;u<e.length;u++)switch(e[u].charCodeAt(0)){case r.SPACE:i="";continue;case r.QUOTE:a.lastIndex=u+1;var h=a.exec(e);i=e.slice(u+1,h.index),u=h&&h.index||u,t&&(c[o(t)]=i),i="",t="";continue;case r.EQUAL:if(t=i,i="",e[u+1].charCodeAt(0)===r.QUOTE)continue;n.lastIndex=u+1;var p=n.exec(e);i=e.slice(u+1,p.index),u=e[p.index].charCodeAt(0)===r.COMMA&&p.index-1||p&&p.index||u,t&&(c[o(t)]=i),i="",t="";continue;case r.COMMA:c.title=e.slice(u+1,e.length).trimLeft(),u=e.length;continue;default:i+=e[u]}return c}},120:(e,t,i)=>{var a=i(733),n=/\"/g,r=i(346),o={YES:!0,NO:!1};function s(e){return e in o?o[e]:e}e.exports=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="",o="",c=(arguments.length>2?arguments[2]:void 0)||{},d=0;d<e.length;d++)switch(e[d].charCodeAt(0)){case a.SPACE:i="";continue;case a.EQUAL:o=i,i="";continue;case a.COMMA:(o=r(o))&&(c[o]=t?s(i):i),o="",i="";continue;case a.QUOTE:n.lastIndex=d+1;var l=n.exec(e),u=e.slice(d+1,l.index);o&&(c[r(o)]=u),d=l.index+1;continue;default:i+=e[d]}return i&&o&&(c[r(o)]=i),c}},346:(e,t,i)=>{var a=i(733);e.exports=function(e){var t="";e=e.toLowerCase();for(var i=0;i<e.length;i++)e[i].charCodeAt(0)!==a.MINUS?t+=e[i]:t+=(e[++i]||"").toUpperCase();return t}},747:e=>{e.exports=function(e){var t=new Date(e.trim());return isNaN(t.getTime()),t}},690:(e,t,i)=>{var a=i(780),n=i(612),r=i(959),o=i(844),s=i(380),c=i(584),d=i(348),l=i(975),u=i(985),h=i(206),p=i(642),m=i(622),f=i(70),g=i(470),y=i(153),v=i(404),b=i(406),A=i(883),k=i(569),I=i(254),S={"#EXTM3U":{key:"isExtendedM3U",parser:function(){return!0},scope:I.BASIC},"#EXT-X-VERSION":{key:"version",parser:n,scope:I.BASIC},"#EXTINF":{key:"inf",parser:a,scope:I.MEDIA_SEGMENT},"#EXT-X-BYTERANGE":{key:"byteRange",parser:r,scope:I.MEDIA_SEGMENT},"#EXT-X-DISCONTINUITY":{key:"discontinuity",parser:o,scope:I.INDEPENDANT_SEGMENT},"#EXT-X-KEY":{key:"key",parser:s,scope:I.TRALING_MEDIA_SEGMENT},"#EXT-X-MAP":{key:"map",parser:c,scope:I.TRALING_MEDIA_SEGMENT},"#EXT-X-PROGRAM-DATE-TIME":{key:"programDateTime",parser:d,scope:I.MEDIA_SEGMENT},"#EXT-X-DATERANGE":{key:"dateRange",parser:l,scope:I.INDEPENDANT_SEGMENT},"#EXT-X-BLACKOUT":{key:"blackout",parser:u,scope:I.INDEPENDANT_SEGMENT},"#EXT-OATCLS-SCTE35":{key:"oatcls",parser:h,scope:I.INDEPENDANT_SEGMENT},"#EXT-X-TARGETDURATION":{key:"targetDuration",parser:p,scope:I.MEDIA_PLAYLIST},"#EXT-X-MEDIA-SEQUENCE":{key:"mediaSequence",parser:m,scope:I.MEDIA_PLAYLIST},"#EXT-X-DISCONTINUITY-SEQUENCE":{key:"discontinuitySequence",parser:f,scope:I.MEDIA_PLAYLIST},"#EXT-X-ENDLIST":{key:"endList",parser:g,scope:I.MEDIA_PLAYLIST},"#EXT-X-PLAYLIST-TYPE":{key:"playlistType",parser:y,scope:I.MEDIA_PLAYLIST},"#EXT-X-I-FRAMES-ONLY":{key:"iFramesOnly",parser:function(){return!0},scope:I.MEDIA_PLAYLIST},"#EXT-X-MEDIA":{key:"media",parser:v,scope:I.GROUPING,group:{root:"media",path:["type","groupId","name"]}},"#EXT-X-STREAM-INF":{key:"streamInf",parser:b,scope:I.MASTER_PLAYLIST},"#EXT-X-I-FRAME-STREAM-INF":{key:"iFrameStreamInf",parser:b,scope:I.MASTER_PLAYLIST},"#EXT-X-SESSION-DATA":{key:"sessionData",parser:A,scope:I.GROUPING,group:{root:"sessionData",path:["dataId","language"]}},"#EXT-X-SESSION-KEY":{key:"sessionKey",parser:s,scope:I.MASTER_PLAYLIST},"#EXT-X-INDEPENDENT-SEGMENTS":{key:"independentSegments",parser:function(){return!0},scope:I.MEDIA_PLAYLIST},"#EXT-X-START":{key:"start",parser:k,scope:I.MEDIA_PLAYLIST},URL:{key:"url",parser:function(e){return{url:e,id:e.substring(e.lastIndexOf("_")+1,e.lastIndexOf(".ts"))}},scope:I.URL_SEGMENT_ENDING}};e.exports={get:function(e){return S[e]||null},set:function(e,t){S[e]=t},add:function(e,t){S[e]=t}}},638:(e,t,i)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=s(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s(a.key),a)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var c=i(254),d=(i(733),i(808)),l=i(690),u=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d.spotAdEndDelay=t,this.reset()},(t=[{key:"read",value:function(e){var t=e.length;e=e.trim();for(var i="",a=!1,n=!1,r=0,o=0,s=0,c="",d=0;d<t;d++)r=(r=(o=e.indexOf("\n",d))>-1&&o||e.indexOf("\r",d))>-1&&r||t,c=e.slice(d,r).trim(),d=r,n="#"===c[0],s=(a="#EXT"===c.slice(0,4))&&c.indexOf(":")||-1,!(i=a&&~s&&c.slice(0,s))&&n&&(i=c),this.invokeParser(i,c.slice(s+1),n)}},{key:"invokeParser",value:function(e,t,i){if(e&&t){var a=l.get(e);return a?this.dataScope(a,a.parser(t,this.result)):void 0}if((!t||!i)&&t){var n=l.get("URL");this.dataScope(n,n.parser(t,this.result))}}},{key:"dataScope",value:function(e,t){switch(e.scope){case c.MASTER_PLAYLIST:this.currentSegmentData.isMasterPlaylist=!0;case c.MEDIA_SEGMENT:this.currentSegmentData[e.key]=t,t.xAdVast&&this.result.segments.push(r({},this.currentSegmentData));break;case c.INDEPENDANT_SEGMENT:this.currentSegmentData[e.key]=t,this.result.segments.push(r({},this.currentSegmentData)),this.currentSegmentData={};break;case c.URL_SEGMENT_ENDING:this.currentSegmentData[e.key]=t,this.result.segments.push(this.currentSegmentData),this.currentSegmentData=Object.assign({},this.trailingData);break;case c.TRALING_MEDIA_SEGMENT:this.trailingData[e.key]=t,this.currentSegmentData=Object.assign(this.currentSegmentData,this.trailingData);break;case c.MEDIA_PLAYLIST:case c.BASIC:this.result[e.key]=t;break;case c.BLACK_OUT:t.caid&&(this.currentSegmentData[e.key]=t);break;case c.GROUPING:this.result[e.group.root]||(this.result[e.group.root]={});for(var i="",a=this.result[e.group.root],n=e.group.path.length,o=0;o<n-1;o++)a[t[i=e.group.path[o]]]||(a[t[i]]={}),a=a[t[i]];a[t[e.group.path[n-1]]]=t}}},{key:"getResult",value:function(){return this.result}},{key:"reset",value:function(){delete this.result,delete this.trailingData,delete this.currentSegmentData,this.trailingData={},this.currentSegmentData={},this.result={isExtendedM3U:!1,segments:[]}}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();e.exports=u},111:function(e,t){var i,a,n,r;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}r=function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a,n,r=d(e);if(t){var s=d(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return a=this,!(n=i)||"object"!==o(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a):n}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdId:{value:null,idRegistry:"unknown"},creativeExtensions:[]}}window.skipDelay="first";var p=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS","bz","ccb","seq","cmd","cn","st","ct","pn"];function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],n=y(e);!t.ERRORCODE||i.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=k(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING;var r=t.cmd;for(var o in t)"frt"!=o&&(t[o]=A(t[o]));for(var s in t.cmd=r,n){var c=n[s];"string"==typeof c&&a.push(f(c,t))}return a}function f(e,t){var i=(e=g(e,t)).match(/[^[\]]+(?=])/g);if(!i)return e;var a=i.filter((function(e){return p.indexOf(e)>-1}));return 0===a.length?e:g(e,a=a.reduce((function(e,t){return e[t]="",e}),{}))}function g(e,t){var i=e;for(var a in t){var n=t[a];i=i.replace(/%5B/g,"[").replace(/%5D/g,"]").replace(new RegExp("(?:\\[|%%)(".concat(a,")(?:\\]|%%)"),"g"),n).replace(/\[trq\]|\{trq\}/gi,encodeURI((new Date).getTime()))}return i}function y(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty("url")?e.url:e.hasOwnProperty("viewable")?e.viewable[0]:e})):e}function v(e,t){for(var i=0;i<t.length;i++)if(b(t[i],e))return!0;return!1}function b(e,t){if(e&&t){var i=Object.getOwnPropertyNames(e),a=Object.getOwnPropertyNames(t);return i.length===a.length&&e.id===t.id&&e.url===t.url}return!1}function A(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,i=String(e);return i.length<t?I(0,t-i.length,!1).map((function(){return"0"})).join("")+i:i}function I(e,t,i){for(var a=[],n=e<t,r=i?n?t+1:t-1:t,o=e;n?o<r:o>r;n?o++:o--)a.push(o);return a}var S={track:function(e,t,i){m(e,t,i).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:m,extractURLsFromTemplates:y,containsTemplateObject:v,isTemplateObjectEqual:b,encodeURIComponentRFC3986:A,replaceUrlMacros:f,leftpad:k,range:I,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,i){return t.concat(Array.isArray(i)?e(i):i)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Array.isArray(e)?e:[],a=Array.isArray(t)?t:[];return i.concat(a).reduce((function(e,t){return v(t,e)||e.push(t),e}),[])}};function T(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var w={childByName:function(e,t){var i=e.childNodes;for(var a in i){var n=i[a];if(n.nodeName===t)return n}},childrenByName:function(e,t){var i=[],a=e.childNodes;for(var n in a){var r=a[n];r.nodeName===t&&i.push(r)}return i},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var i=location.protocol;return"".concat(i).concat(e)}if(-1===e.indexOf("://")){var a=t.slice(0,t.lastIndexOf("/"));return"".concat(a,"/").concat(e)}return e},parseBoolean:T,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,i){var a=t.getAttribute(e);a&&i.setAttribute(e,a)},parseAttributes:function(e){for(var t=e.attributes,i={},a=0;a<t.length;a++)i[t[a].nodeName]=t[a].nodeValue;return i},parseDuration:function(e){if(null==e)return-1;if(S.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var i=t[2].split("."),a=parseInt(i[0]);2===i.length&&(a+=parseFloat("0.".concat(i[1])));var n=parseInt(60*t[1]),r=parseInt(60*t[0]*60);return isNaN(r)||isNaN(n)||isNaN(a)||n>3600||a>60?-1:r+n+a},splitVAST:function(e){var t=[],i=null;return e.forEach((function(a,n){if(a.sequence&&(a.sequence=parseInt(a.sequence,10)),a.sequence>1){var r=e[n-1];if(r&&r.sequence===a.sequence-1)return void(i&&i.push(a));delete a.sequence}i=[a],t.push(i)})),t},assignAttributes:function(e,t){if(e)for(var i in e){var a=e[i];if(a.nodeName&&a.nodeValue&&t.hasOwnProperty(a.nodeName)){var n=a.nodeValue;"boolean"==typeof t[a.nodeName]&&(n=T(n)),t[a.nodeName]=n}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.viewableImpression=t.viewableImpression.concat(e.viewableImpression),e.extensions=t.extensions.concat(e.extensions),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var i=(t.creatives||[]).filter((function(e){return e&&"companion"===e.type})),a=i.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){S.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=i.concat(e.creatives);var n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,r=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var i in t.trackingEvents[e.type]){var o=t.trackingEvents[e.type][i];Array.isArray(e.trackingEvents[i])||(e.trackingEvents[i]=[]),e.trackingEvents[i]=e.trackingEvents[i].concat(o)}t.adParameters&&(Array.isArray(e.adParameters)||(e.adParameters=[]),t.adParameters.forEach((function(t){e.adParameters.push(t)}))),"linear"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),r&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&a.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=S.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,a)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function C(e,t){var i=function(){var e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"companion",required:null,variations:[]}}(t);return i.required=e.getAttribute("required")||null,i.variations=w.childrenByName(e,"Companion").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||e.adSlotId||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(w.parseAttributes(e));t.htmlResources=w.childrenByName(e,"HTMLResource").reduce((function(e,t){var i=w.parseNodeText(t);return i?e.concat(i):e}),[]),t.iframeResources=w.childrenByName(e,"IFrameResource").reduce((function(e,t){var i=w.parseNodeText(t);return i?e.concat(i):e}),[]),t.staticResources=w.childrenByName(e,"StaticResource").reduce((function(e,t){var i=w.parseNodeText(t);return i?e.concat({url:i,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=w.parseNodeText(w.childByName(e,"AltText"))||null;var i=w.childByName(e,"TrackingEvents");i&&w.childrenByName(i,"Tracking").forEach((function(e){var i=e.getAttribute("event"),a=w.parseNodeText(e);i&&a&&(Array.isArray(t.trackingEvents[i])||(t.trackingEvents[i]=[]),t.trackingEvents[i].push(a))})),t.companionClickTrackingURLTemplates=w.childrenByName(e,"CompanionClickTracking").map((function(e){return{id:e.getAttribute("id")||null,url:w.parseNodeText(e)}})),t.companionClickThroughURLTemplate=w.parseNodeText(w.childByName(e,"CompanionClickThrough"))||null;var a=w.childByName(e,"AdParameters");if(a){t.adParameters=[];for(var n=0;n<a.children.length;n++){var r={};r[a.children[n].tagName]=w.parseNodeText(w.childByName(a,a.children[n].tagName)),t.adParameters.push(r)}t.xmlEncoded=a.getAttribute("xmlEncoded")||null}return t})),i}function E(e,t){var i,a=function(){var e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"linear",duration:0,skipDelay:arguments[1],mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t,"first"==window.skipDelay?null:window.skipDelay);a.duration=w.parseDuration(w.parseNodeText(w.childByName(e,"Duration")));var n=e.getAttribute("skipoffset");if("first"==window.skipDelay||"Wrapper"==window.nodeType&&null==window.skipDelay||"InLine"==window.nodeType&&null==window.skipDelay){if(null==n)a.skipDelay=null;else if("%"===n.charAt(n.length-1)&&-1!==a.duration){var r=parseInt(n,10);a.skipDelay=a.duration*(r/100)}else a.skipDelay=w.parseDuration(n);window.skipDelay=a.skipDelay}"InLine"==window.nodeType&&(window.skipDelay="first",window.nodeType="");var o=w.childByName(e,"VideoClicks");if(o){var s=w.childByName(o,"ClickThrough");a.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:w.parseNodeText(s)}:null,w.childrenByName(o,"ClickTracking").forEach((function(e){a.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:w.parseNodeText(e)})})),w.childrenByName(o,"CustomClick").forEach((function(e){a.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:w.parseNodeText(e)})}))}var c=w.childByName(e,"AdParameters");if(c){a.adParameters=[];for(var d=0;d<c.children.length;d++){var l={};l[c.children[d].tagName]=w.parseNodeText(w.childByName(c,c.children[d].tagName)),a.adParameters.push(l)}}w.childrenByName(e,"TrackingEvents").forEach((function(e){w.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),n=w.parseNodeText(e);if(t&&n){if("progress"===t){if(!(i=e.getAttribute("offset")))return;t="%"===i.charAt(i.length-1)?"progress-".concat(i):"progress-".concat(Math.round(w.parseDuration(i)))}Array.isArray(a.trackingEvents[t])||(a.trackingEvents[t]=[]),a.trackingEvents[t].push(n)}}))})),w.childrenByName(e,"MediaFiles").forEach((function(e){w.childrenByName(e,"MediaFile").forEach((function(e){a.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=w.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var i=e.getAttribute("scalable");i&&"string"==typeof i&&(t.scalable=w.parseBoolean(i));var a=e.getAttribute("maintainAspectRatio");return a&&"string"==typeof a&&(t.maintainAspectRatio=w.parseBoolean(a)),t}(e))}));var t=w.childByName(e,"InteractiveCreativeFile");t&&(a.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:w.parseBoolean(e.variableDuration),fileURL:null}}(w.parseAttributes(e));return t.fileURL=w.parseNodeText(e),t}(t));var i=w.childByName(e,"ClosedCaptionFiles");i&&w.childrenByName(i,"ClosedCaptionFile").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(w.parseAttributes(e));t.fileURL=w.parseNodeText(e),a.closedCaptionFiles.push(t)}));var n=w.childByName(e,"Mezzanine"),r=function(e,t){var i={},a=!1;return["delivery","type","width","height"].forEach((function(t){e&&e.getAttribute(t)?i[t]=e.getAttribute(t):a=!0})),a?null:i}(n);if(r){var o={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};o.id=n.getAttribute("id"),o.fileURL=w.parseNodeText(n),o.delivery=r.delivery,o.codec=n.getAttribute("codec"),o.type=r.type,o.width=parseInt(r.width,10),o.height=parseInt(r.height,10),o.fileSize=parseInt(n.getAttribute("fileSize"),10),o.mediaType=n.getAttribute("mediaType")||"2D",a.mezzanine=o}}));var u=w.childByName(e,"Icons");return u&&w.childrenByName(u,"Icon").forEach((function(e){a.icons.push(function(e){var t,i,a={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};a.program=e.getAttribute("program"),a.height=parseInt(e.getAttribute("height")||0),a.width=parseInt(e.getAttribute("width")||0),a.xPosition=(i=e.getAttribute("xPosition"),-1!==["left","right"].indexOf(i)?i:parseInt(i||0)),a.yPosition=(t=e.getAttribute("yPosition"),-1!==["top","bottom"].indexOf(t)?t:parseInt(t||0)),a.apiFramework=e.getAttribute("apiFramework"),a.pxratio=e.getAttribute("pxratio")||"1",a.offset=w.parseDuration(e.getAttribute("offset")),a.duration=w.parseDuration(e.getAttribute("duration")),w.childrenByName(e,"HTMLResource").forEach((function(e){a.type=e.getAttribute("creativeType")||"text/html",a.htmlResource=w.parseNodeText(e)})),w.childrenByName(e,"IFrameResource").forEach((function(e){a.type=e.getAttribute("creativeType")||0,a.iframeResource=w.parseNodeText(e)})),w.childrenByName(e,"StaticResource").forEach((function(e){a.type=e.getAttribute("creativeType")||0,a.staticResource=w.parseNodeText(e)}));var n=w.childByName(e,"IconClicks");return n&&(a.iconClickThroughURLTemplate=w.parseNodeText(w.childByName(n,"IconClickThrough")),w.childrenByName(n,"IconClickTracking").forEach((function(e){a.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:w.parseNodeText(e)})}))),a.iconViewTrackingURLTemplate=w.parseNodeText(w.childByName(e,"IconViewTracking")),a}(e))})),a}function L(e,t){var i=function(){var e=h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{id:e.id,adId:e.adId,sequence:e.sequence,apiFramework:e.apiFramework,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return w.childrenByName(e,"TrackingEvents").forEach((function(e){var t,a;w.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),a=w.parseNodeText(e),t&&a&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(a))}))})),w.childrenByName(e,"NonLinear").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=w.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=w.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=w.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),w.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=w.parseNodeText(e)})),w.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=w.parseNodeText(e)})),w.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=w.parseNodeText(e)}));var a=w.childByName(e,"AdParameters");if(a){t.adParameters=[];for(var n=0;n<a.children.length;n++){var r={};r[a.children[n].tagName]=w.parseNodeText(w.childByName(a,a.children[n].tagName)),t.adParameters.push(r)}}t.nonlinearClickThroughURLTemplate=w.parseNodeText(w.childByName(e,"NonLinearClickThrough")),w.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:w.parseNodeText(e)})})),i.variations.push(t)})),i}function M(e){var t=[];return e.forEach((function(e){var i=j(e);i&&t.push(i)})),t}function j(e){if("#comment"===e.nodeName)return null;var t,i={name:null,value:null,attributes:{},children:[]},a=e.attributes,n=e.childNodes;if(i.name=e.nodeName,e.attributes)for(var r in a)if(a.hasOwnProperty(r)){var o=a[r];o.nodeName&&o.nodeValue&&(i.attributes[o.nodeName]=o.nodeValue)}for(var s in n)if(n.hasOwnProperty(s)){var c=j(n[s]);c&&i.children.push(c)}if(0===i.children.length||1===i.children.length&&["#cdata-section","#text"].indexOf(i.children[0].name)>=0){var d=w.parseNodeText(e);""!==d&&(i.value=d),i.children=[]}return null===(t=i).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:i}function P(e){var t=[];return e.forEach((function(e){var i,a,n={id:e.getAttribute("id")||null,adId:O(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},r=w.childByName(e,"UniversalAdId");r&&(i={idRegistry:r.getAttribute("idRegistry")||"unknown",value:w.parseNodeText(r)});var o=w.childByName(e,"CreativeExtensions");for(var s in o&&(a=M(w.childrenByName(o,"CreativeExtension"))),e.childNodes){var c=e.childNodes[s],d=void 0;switch(c.nodeName){case"Linear":d=E(c,n);break;case"NonLinearAds":d=L(c,n);break;case"CompanionAds":d=C(c,n)}d&&(i&&(d.universalAdId=i),a&&(d.creativeExtensions=a),t.push(d))}})),t}function O(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var D={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function N(e,t){if(D[e.nodeName]&&D[e.nodeName].attributes){var i=D[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));i.length>0&&U({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:i},t)}}function R(e,t,i){var a=D[e.nodeName],n=!i&&"Wrapper"!==e.nodeName;if(a&&!n){if(a.subElements){var r=a.subElements.filter((function(t){return!w.childByName(e,t)}));r.length>0&&U({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:r},t)}i&&a.oneOfinLineResources&&(a.oneOfinLineResources.some((function(t){return w.childByName(e,t)}))||U({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:a.oneOfinLineResources},t))}}function x(e){return e.children&&0!==e.children.length}function U(e,t){var i=e.name,a=e.parentName,n=e.attributes,r=e.subElements,o=e.oneOfResources,s="Element '".concat(i,"'");t("VAST-warning",{message:s+=n?" missing required attribute(s) '".concat(n.join(", "),"' "):r?" missing required sub element(s) '".concat(r.join(", "),"' "):o?" must provide one of the following '".concat(o.join(", "),"' "):" is empty",parentElement:a,specVersion:4.1})}var V={verifyRequiredValues:function e(t,i,a){if(t&&t.nodeName)if("InLine"===t.nodeName&&(a=!0),N(t,i),x(t)){R(t,i,a);for(var n=0;n<t.children.length;n++)e(t.children[n],i,a)}else 0===w.parseNodeText(t).length&&U({name:t.nodeName,parentName:t.parentNode.nodeName},i)},hasSubElements:x,emitMissingValueWarning:U,verifyRequiredAttributes:N,verifyRequiredSubElements:R};function B(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allowMultipleAds,n=i.followAdditionalWrappers,r=e.childNodes;for(var o in r){var s=r[o];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==n)){if(w.copyNodeAttribute("id",e,s),w.copyNodeAttribute("sequence",e,s),w.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return window.nodeType="Wrapper",{ad:K(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return window.nodeType="InLine",{ad:_(s,t,{allowMultipleAds:a}),type:"INLINE"}}}}function _(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allowMultipleAds,F(e,t)}function F(e,t){t&&V.verifyRequiredValues(e,t);var i=e.childNodes,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(w.parseAttributes(e));for(var n in i){var r=i[n];switch(r.nodeName){case"Error":a.errorURLTemplates.push(w.parseNodeText(r));break;case"Impression":a.impressionURLTemplates.push({id:r.getAttribute("id")||null,url:w.parseNodeText(r)});break;case"Creatives":a.creatives=P(w.childrenByName(r,"Creative"));break;case"Extensions":var o=w.childrenByName(r,"Extension");a.extensions=M(o),a.adVerifications.length||(a.adVerifications=G(o));break;case"AdVerifications":a.adVerifications=z(w.childrenByName(r,"Verification"));break;case"AdSystem":a.system={value:w.parseNodeText(r),version:r.getAttribute("version")||null};break;case"AdTitle":a.title=w.parseNodeText(r);break;case"AdServingId":a.adServingId=w.parseNodeText(r);break;case"Category":a.categories.push({authority:r.getAttribute("authority")||null,value:w.parseNodeText(r)});break;case"Expires":a.expires=parseInt(w.parseNodeText(r),10);break;case"ViewableImpression":a.viewableImpression.push(H(r));break;case"Description":a.description=w.parseNodeText(r);break;case"Advertiser":a.advertiser={id:r.getAttribute("id")||null,value:w.parseNodeText(r)};break;case"Pricing":a.pricing={value:w.parseNodeText(r),model:r.getAttribute("model")||null,currency:r.getAttribute("currency")||null};break;case"Survey":a.survey=w.parseNodeText(r);break;case"BlockedAdCategories":a.blockedAdCategories.push({authority:r.getAttribute("authority")||null,value:w.parseNodeText(r)})}}return a}function K(e,t){var i=F(e,t),a=e.getAttribute("followAdditionalWrappers"),n=e.getAttribute("allowMultipleAds"),r=e.getAttribute("fallbackOnNoAd");i.followAdditionalWrappers=!a||w.parseBoolean(a),i.allowMultipleAds=!!n&&w.parseBoolean(n),i.fallbackOnNoAd=r?w.parseBoolean(r):null;var o=w.childByName(e,"VASTAdTagURI");if(o?i.nextWrapperURL=w.parseNodeText(o):(o=w.childByName(e,"VASTAdTagURL"))&&(i.nextWrapperURL=w.parseNodeText(w.childByName(o,"URL"))),i.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){i.trackingEvents||(i.trackingEvents={}),i.trackingEvents[e.type]||(i.trackingEvents[e.type]={});var t=function(t){var a=e.trackingEvents[t];Array.isArray(i.trackingEvents[e.type][t])||(i.trackingEvents[e.type][t]=[]),a.forEach((function(a){i.trackingEvents[e.type][t].push(a)}))};for(var a in e.trackingEvents)t(a)}e.videoClickTrackingURLTemplates&&(Array.isArray(i.videoClickTrackingURLTemplates)||(i.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){i.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(i.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(i.videoCustomClickURLTemplates)||(i.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){i.videoCustomClickURLTemplates.push(e)}))),e.adParameters&&(Array.isArray(i.adParameters)||(i.adParameters=[]),e.adParameters.forEach((function(e){i.adParameters.push(e)})))}})),i.nextWrapperURL)return i}function z(e){var t=[];return e.forEach((function(e){var i={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},a=e.childNodes;for(var n in w.assignAttributes(e.attributes,i),a){var r=a[n];switch(r.nodeName){case"JavaScriptResource":case"ExecutableResource":i.resource=w.parseNodeText(r),w.assignAttributes(r.attributes,i);break;case"VerificationParameters":i.parameters=w.parseNodeText(r)}}var o=w.childByName(e,"TrackingEvents");o&&w.childrenByName(o,"Tracking").forEach((function(e){var t=e.getAttribute("event"),a=w.parseNodeText(e);t&&a&&(Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(a))})),t.push(i)})),t}function G(e){var t=null,i=[];return e.some((function(e){return t=w.childByName(e,"AdVerifications")})),t&&(i=z(w.childrenByName(t,"Verification"))),i}function H(e){var t={};t.id=e.getAttribute("id")||null;var i=e.childNodes;for(var a in i){var n=i[a],r=n.nodeName,o=w.parseNodeText(n);if(("Viewable"===r||"NotViewable"===r||"ViewUndetermined"===r)&&o){var s=r.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(o)}}return t}var q=function(){function e(){i(this,e),this._handlers=[]}return n(e,[{key:"on",value:function(e,i){if("function"!=typeof i)throw new TypeError("The handler argument must be of type Function. Received type ".concat(t(i)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(t(e)));return this._handlers.push({event:e,handler:i}),this}},{key:"once",value:function(e,t){return this.on(e,function(e,t,i){var a={fired:!1,wrapFn:void 0};function n(){a.fired||(e.off(t,a.wrapFn),a.fired=!0,i.bind(e).apply(void 0,arguments))}return a.wrapFn=n,n}(this,e,t))}},{key:"off",value:function(e,t){return this._handlers=this._handlers.filter((function(i){return i.event!==e||i.handler!==t})),this}},{key:"emit",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var n=!1;return this._handlers.forEach((function(t){"*"===t.event&&(n=!0,t.handler.apply(t,[e].concat(i))),t.event===e&&(n=!0,t.handler.apply(t,i))})),n}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:"listeners",value:function(e){return this._handlers.reduce((function(t,i){return i.event===e&&t.push(i.handler),t}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}(),J=function(e,t,i){i(new Error("Please bundle the library for node to use the node urlHandler"))},W=12e4;function Y(){try{var e=new window.XMLHttpRequest({mozSystem:!0});return"withCredentials"in e?e:null}catch(e){return null}}function Q(e,t,i){var a=i?408:e.status,n=i?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms (").concat(a,")"):"XHRURLHandler: ".concat(e.statusText," (").concat(a,")");t(new Error(n),null,{statusCode:a})}var Z=function(e,t,i){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return i(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var a=Y();a.open("GET",e),a.timeout=t.timeout||W,a.withCredentials=t.withCredentials||!1,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):Q(e,t,!1)}(a,i)},a.onerror=function(){return Q(a,i,!1)},a.onabort=function(){return Q(a,i,!1)},a.ontimeout=function(){return Q(a,i,!0)},a.send()}catch(e){i(new Error("XHRURLHandler: Unexpected error"))}},X=function(){return!!Y()},$={get:function(e,t,i){return i||("function"==typeof t&&(i=t),t={}),"undefined"==typeof window||null===window?J(e,t,i):X()?Z(e,t,i):i(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},ee={ERRORCODE:900,extensions:[]},te=function(e){c(a,e);var t=u(a);function a(){var e;return i(this,a),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e}return n(a,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),n=2;n<i;n++)a[n-2]=arguments[n];this.emit("VAST-error",Object.assign.apply(Object,[{},ee,t].concat(a))),S.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"fetchVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(n,r){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var o=Date.now();t.emit("VAST-resolving",{url:e,previousUrl:a,wrapperDepth:i,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout}),t.urlHandler.get(e,t.fetchingOptions,(function(s,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=Math.round(Date.now()-o),u=Object.assign({url:e,previousUrl:a,wrapperDepth:i,error:s,duration:l},d);t.emit("VAST-resolved",u),s?r(s):n(c)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.rootURL="",this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=e.wrapperLimit||10,this.fetchingOptions={timeout:e.timeout||W,withCredentials:e.withCredentials},this.urlHandler=e.urlHandler||e.urlhandler||$,this.vastVersion=null}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var i=e?S.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(i,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(i),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(a){return i.previousUrl=e,i.isRootVAST=!0,i.url=e,t.parse(a,i).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.initParsingStatus(i),this.inputMacros=i.macros||{};var a=i.multi||!1;return i.isRootVAST=!0,this.parse(e,i).then((function(e){return t.buildVASTResponse(e,a)}))}},{key:"buildVASTResponse",value:function(e,t){e&&e.length>0&&e[0].creatives&&e[0].creatives.length>0&&"companion"==e[0].creatives[0].type&&(e[0].creatives=e[0].creatives.slice(1,e[0].creatives.length));var i,a={ads:(i={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:i.errorURLTemplates||[],version:i.version||null};return this.completeWrapperResolving(a),a}},{key:"parseVastXml",value:function(e,t){var i=t.isRootVAST,a=void 0!==i&&i,n=t.url,r=void 0===n?null:n,o=t.wrapperDepth,s=void 0===o?0:o,c=t.allowMultipleAds,d=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:r,wrapperDepth:s}),new Error("Invalid VAST XMLDocument");var l=[],u=e.documentElement.childNodes,h=e.documentElement.getAttribute("version");for(var p in this.vastVersion=h>4?4:h,u){var m=u[p];if("Error"===m.nodeName){var f=w.parseNodeText(m);a?this.rootErrorURLTemplates.push(f):this.errorURLTemplates.push(f)}else if("Ad"===m.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)c=!0;else if(!1===c&&l.length>1)break;var g=B(m,this.emit.bind(this),{allowMultipleAds:c,followAdditionalWrappers:d});g.ad?(l.push(g.ad),this.emit("VAST-ad-parsed",{type:g.type,url:r,wrapperDepth:s,adIndex:l.length-1,vastVersion:h})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return l}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.url,a=void 0===i?null:i,n=t.resolveAll,r=void 0===n||n,o=t.wrapperSequence,s=void 0===o?null:o,c=t.previousUrl,d=void 0===c?null:c,l=t.wrapperDepth,u=void 0===l?0:l,h=t.isRootVAST,p=void 0!==h&&h,m=t.followAdditionalWrappers,f=t.allowMultipleAds,g=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&p&&(f=!0);try{g=this.parseVastXml(e,{isRootVAST:p,url:a,wrapperDepth:u,allowMultipleAds:f,followAdditionalWrappers:m})}catch(e){return Promise.reject(e)}return 1===g.length&&null!=s&&(g[0].sequence=s),!1===r&&(this.remainingAds=w.splitVAST(g),g=this.remainingAds.shift()),this.resolveAds(g,{wrapperDepth:u,previousUrl:d,url:a})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,a=i.wrapperDepth,n=i.previousUrl,r=i.url,o=[];return n=r,t.forEach((function(t){var i=e.resolveWrappers(t,a,n);o.push(i)})),Promise.all(o).then((function(t){var i=S.flatten(t);if(!i&&e.remainingAds.length>0){var o=e.remainingAds.shift();return e.resolveAds(o,{wrapperDepth:a,previousUrl:n,url:r})}return i}))}},{key:"resolveWrappers",value:function(e,t,i){var a=this;return new Promise((function(n){if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,n(e);if(t>=a.maxWrapperDepth||-1!==a.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,n(e);e.nextWrapperURL=w.resolveVastAdTagURI(e.nextWrapperURL,i),a.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)})),e.nextWrapperURL=m([e.nextWrapperURL],a.inputMacros);var r=e.sequence;a.fetchVAST(e.nextWrapperURL,t,i).then((function(o){return a.parse(o,{url:e.nextWrapperURL,previousUrl:i,wrapperSequence:r,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:!0}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],n(e);t.forEach((function(t){t&&w.mergeWrapperAdData(t,e)})),n(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,n(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var i=e.ads[t];(i.errorCode||0===i.creatives.length)&&(this.trackVastError(i.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:i.errorCode||303},{ERRORMESSAGE:i.errorMessage||""},{extensions:i.extensions},{system:i.system}),e.ads.splice(t,1))}}}]),a}(q),ie=null,ae={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ne=function(){function e(){i(this,e),this.storage=this.initStorage()}return n(e,[{key:"initStorage",value:function(){if(ie)return ie;try{ie="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){ie=null}return ie&&!this.isStorageDisabled(ie)||(ie=ae).clear(),ie}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),re=function(){function e(t,a,n){i(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=a||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new te,this.storage=n||new ne,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return n(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Date.now();return(i=Object.assign({},this.defaultOptions,i)).hasOwnProperty("resolveAll")||(i.resolveAll=!1),this.totalCallsTimeout<a?(this.totalCalls=1,this.totalCallsTimeout=a+36e5):this.totalCalls++,new Promise((function(n,r){if(t.cappingFreeLunch>=t.totalCalls)return r(new Error("VAST call canceled  FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var o=a-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return r(new Error("VAST call canceled  (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,i).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}}]),e}(),oe=function(e){c(a,e);var t=u(a);function a(e,n,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var c in i(this,a),(o=t.call(this)).ad=n,o.creative=r,o.variation=s,o.muted=!1,o.impressed=!1,o.completed=!1,o.viewability=!1,o.skippable=!1,o.trackingEvents={},o.lastPercentage=0,o._alreadyTriggeredQuartiles={},o.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],o.creative.trackingEvents){var d=o.creative.trackingEvents[c];o.trackingEvents[c]=d.slice(0)}return function(e){return"linear"===e.type}(o.creative)?o._initLinearTracking():o._initVariationTracking(),e&&o.on("start",(function(){e.lastSuccessfulAd=Date.now()})),o}return n(a,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):"companionAd"===this.variation.adType&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.skipDelay||-1;if(-1===a||this.skippable||(a>e?this.emit("skip-countdown",a-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var n=Math.round(e/this.assetDuration*100),r=[];if(e>0){r.push("start");for(var o=this.lastPercentage;o<n;o++)r.push("progress-".concat(o+1,"%"));for(var s in r.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(s,this.quartiles[s],e)&&(r.push(s),this._alreadyTriggeredQuartiles[s]=!0);this.lastPercentage=n}!this.viewability&e>2&&(this.viewability=!0,this.ad&&this.trackURLs(this.ad.viewableImpression,i)),r.forEach((function(e){t.track(e,{macros:i,once:!0})})),e<this.progress&&this.track("rewind",{macros:i})}this.progress=e}},{key:"isQuartileReached",value:function(e,t,i){var a=!1;return t<=i&&!this._alreadyTriggeredQuartiles[e]&&(a=!0),a}},{key:"setMuted",value:function(e,t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};void 0!==t&&(this.muted=t),this.muted!==e&&this.track(e?"mute":"unmute",{macros:a}),this.muted=e}},{key:"setPaused",value:function(e,t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.paused!==e&&this.track(e?"pause":"resume",{macros:i}),this.paused=e}},{key:"setFullscreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e}},{key:"setExpand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e}},{key:"setSkipDelay",value:function(e){"number"==typeof e&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.impressed||(this.impressed=!0,this.ad&&this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e}))}},{key:"errorWithCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:e},{isCustomCode:t})}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.completed||(this.completed=!0,this.track("complete",{macros:e}))}},{key:"notUsed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("notUsed",{macros:e}),this.trackingEvents=[]}},{key:"otherAdInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var i=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!i)throw new Error("No associated verification element found for vendor: ".concat(e));var a=i.trackingEvents;if(a&&a.verificationNotExecuted){var n=a.verificationNotExecuted;this.trackURLs(n,t),this.emit("verificationNotExecuted",{trackingURLTemplates:n})}}},{key:"overlayViewDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t})}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("skip",{macros:e})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var i=this.clickThroughURLTemplate||e,a=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t);if(i){this.progress&&(a.ADPLAYHEAD=this.progressFormatted());var n=S.resolveURLTemplates([i],a)[0];this.emit("clickthrough",n)}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.macros,a=void 0===i?{}:i,n=t.once,r=void 0!==n&&n;"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var o=this.trackingEvents[e],s=this.emitAlwaysEvents.indexOf(e)>-1;o?(this.emit(e,{trackingURLTemplates:o}),this.trackURLs(o,a)):s&&this.emit(e,null),r&&(delete this.trackingEvents[e],s&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}},{key:"trackURLs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(t.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(t.ADPLAYHEAD=this.progressFormatted())),this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&this.creative.universalAdId.value&&(t.UNIVERSALADID="".concat(this.creative.universalAdId.idRegistry," ").concat(this.creative.universalAdId.value)),this.ad&&(this.ad.sequence&&(t.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(t.ADTYPE=this.ad.adType),this.ad.adServingId&&(t.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(t.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(t.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),S.track(e,t,i)}},{key:"convertToTimecode",value:function(e){var t=1e3*e,i=Math.floor(t/36e5),a=Math.floor(t/6e4%60),n=Math.floor(t/1e3%60),r=Math.floor(t%1e3);return"".concat(S.leftpad(i,2),":").concat(S.leftpad(a,2),":").concat(S.leftpad(n,2),".").concat(S.leftpad(r,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),a}(q);e.VASTClient=re,e.VASTParser=te,e.VASTTracker=oe,Object.defineProperty(e,"__esModule",{value:!0})},"object"===o(t)?r(t):(a=[t],void 0===(n="function"==typeof(i=r)?i.apply(t,a):i)||(e.exports=n))},756:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var a=i(645),n=i.n(a),r=i(667),o=i.n(r),s=i(384),c=i(854),d=i(677),l=i(341),u=i(357),h=i(816),p=i(455),m=n()((function(e){return e[1]})),f=o()(s),g=o()(c),y=o()(d),v=o()(l),b=o()(u),A=o()(h),k=o()(p);m.push([e.id,"@keyframes insInjected { from { opacity: 0.99; } to {   opacity: 1;  }}\nins[id][data-adspot-key] { font-family: Arial, Helvetica, sans-serif; font-size: 13px; margin: 0px auto; width: fit-content; animation-duration: 0.001s;  animation-name: insInjected;  text-decoration: none; display: flex;}\nins a{text-decoration: none; color: #000;}\nins a:hover, .jads-btn:hover{ color: #000;}\n.jads-fluid-container{font-family: arial; display: -ms-flexbox; display: flex; background: transparent; width: 100%; color:#000;font-size: 1rem;}\n.jads-banner{ background:#cecece; width: 728px; height: 90px; overflow: hidden; font-size: 0.9rem;}\n.jads-instream{ width: 100%; height:inherit; background: inherit;background-color: #000000;}\n.jads-rewarded{ width: 100%; height:inherit;}\n.jads-billboard{ width: 300px; height: 250px;font-size: 0.7rem; line-height:15px;background: #a7a5a5}\n.jads-dynamic-display{  width: 100%; height: auto;}\n.jads-player-container{display: flex !important; width: 100%; align-items: center; align-content: center; height: inherit; background: inherit;}\n.jads-btn{display: inline-block; text-align: center; align-self: center; vertical-align: middle; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; border: 1px solid transparent;  padding: 0.375rem 0.45rem; transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;  text-decoration: none; color: #212121; background:#FFF; font-weight: bold;  white-space: nowrap;  overflow: hidden;  display: inline-block;  text-overflow: ellipsis; -webkit-box-shadow: 0px 0px 18px 2px #898989; box-shadow: 0px 0px 18px 2px #898989;}\n.jads-btn-grey{ background:rgb(65, 65, 65); color: #FFF;}\niframe { border: 0;}\n.jads-icon{cursor: pointer; display: inline-block; width: 24px; height: 24px; background-size: 24px 24px !important; z-index: 999;}\n.jads-height-occup{ height:-webkit-fill-available;}\n.jads-height-inher{ height:inherit;}\n.jads-height-100{ height:100%;}\n.jads-h-50{ height: 50px;}\n.jads-pe-n{ pointer-events:none; cursor: not-allowed;}\n.jads-pos-r{ position: relative;}\n.jads-p-5{padding: 5px; }\n.jads-p-10{padding: 10px;}\n.jads-m-2{margin: 2%; }\n.jads-text-center{ text-align: center;}\n.jads-img{ max-height: 100%;}\n.jads-img-res{ max-width: 100%;}\n.jads-max {width:100%;}\n.jads-d-flex{box-sizing: border-box; display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex;  display: flex;}\n.jads-flex-fill{ -ms-flex: 1 1 auto !important; flex: 1 1 auto !important;}\n.jads-flex-wrap{ flex-wrap: wrap;}\n.jads-d-flex-aj-center{display: -webkit-box; display: -moz-box; display: -ms-flexbox; display: -webkit-flex;  display: flex;justify-content:center;align-items: center;}\n.jads-f-a-center{align-items: center;}\n.jads-f-a-right{align-items: flex-end;}\n.jads-f-j-left{justify-content:flex-start;}\n.jads-f-j-center{justify-content:center;}\n.jads-f-j-right{justify-content:flex-end;}\n.jads-bg-grey{ background: linear-gradient( to bottom, rgb(0 0 0 / 30%) 0%, #000 100%); color: #fff; z-index: 20;}\n.jads-media-info-box{position: absolute; color: #fff;  right: 6px;  bottom: 10%;  z-index: 10;  background: rgba(0,0,0,0.9); border: 2px solid #707070; padding: 10px 0; border-radius: 7px;}\n.jads-cen-border{  border-bottom:1px solid #626262; margin-bottom:10px; }\n.jads-cta-box{ position: absolute;  z-index: 10;  width: 100%;}\n.jads-cta-top{top: 0}\n.jads-top-10{top: 10px}\n.jads-top-25{top: 25px}\n.jads-cta-bottom{bottom: 0;}\n.jads-cen-item{align-items: center;}\n.jads-row {flex-direction: row;}\n.jads-col{flex-direction: column;}\n.jads-bot-60{bottom: 60px;}\n.jads-d-none{display: none;}\n.jads-dynamic-display-cta-but{background-color:blue;width:100%;color: white;margin-top:10px;}\n.jads-interstitial-margin{margin-bottom: 12%;}\n.jads-modal{position: fixed;  background: rgba(200, 200, 200,0.75);  top: 0;  right: 0;  bottom: 0;  left: 0;  z-index: 999; -webkit-transition: all 0.3s;  -moz-transition: all 0.3s;  transition: all 0.3s;  opacity: 1;  pointer-events: auto;}\n.jads-banner .jads-d-flex:first-of-type{height: 90px;}\n@media only screen and (min-width : 280px) and (max-width : 727px) {\n  .jads-banner{  width: 320px; height: 50px; font-size: 0.7rem; line-height:15px}\n  .jads-banner .jads-d-flex:first-of-type{height: 50px;}\n}\n.jads-h-200{height:200px}\n.jads-h-210{ height: 210px;}\n.jads-h-40{ height: 40px;}\n.jads-h-50{ height: 50px;}\n.jads-text-elipse{text-overflow: ellipsis; overflow: hidden; white-space: nowrap; height: 100%;}\n.jads-media-player{display: block; width: 100%; height: 100%; z-index: 5;}\n.jads-media-player-audio{display: block; width: 100%; height:100%}\n.jads-interstitial{ width: 100%; height: 100%;position: relative;}\n.jads-dynamic-display{  position: relative;} \n@media only screen and (min-device-width: 320px) and (orientation: portrait) {\n  .jads-interstitial .jads-d-flex-aj-center,.jads-dynamic-display .jads-d-flex-aj-center{flex-direction: column;}\n  .jads-interstitial .jads-icon-close{background: url("+f+") no-repeat !important;}\n  .jads-interstitial {background-color: #ffffff;}\n  .jads-dynamic-display .jads-cta-box{margin-bottom: 0% !important;}\n  .jads-dynamic-display .jads-land-disp, .jads-interstitial .jads-land-disp{ display: none; }\n  .jads-dynamic-display .jads-port-disp,.jads-interstitial .jads-port-disp{  display: flex; }\n}\n@media only screen and (min-device-width: 480px) and (orientation: landscape) {\n  .jads-interstitial .jads-d-flex-aj-center,.jads-dynamic-display .jads-d-flex-aj-center{width: 100%;height: 90%;}\n  .jads-interstitial .jads-img-res,.jads-dynamic-display .jads-img-res{width: 100%;height: 100%}\n  .jads-interstitial{background-color: #212121;width: 100%;}\n  .jads-dynamic-display .jads-cta-box{margin-bottom: 0% !important;}\n  .jads-dynamic-display .jads-land-disp,.jads-interstitial .jads-land-disp{  display: block; }\n  .jads-dynamic-display .jads-port-disp,.jads-interstitial .jads-port-disp{ display: none; }\n}\n\n.jads-frame{margin: auto;border: 0;display: none;}\n.modal.modal-brand {  display: block;  position: absolute;  z-index: 1;  left: 0;  top: 0;  width: 100%; background: rgb(0,0,0); background: rgba(0,0,0,0.4);}\n.modal-content {  background: #fefefe;  border: 1px solid #888;  width: 100%;}\n.modal-clickhandler { display: block; position: absolute; z-index: 99; left: 0;  top: 0;  width: 100%;   height: 100%;  background: transparent;}\n.frame-content {  position: absolute;  top: calc(100vh - 471px);  left: 0;  height: 470px;  width: 100%;  background: #e2e3e5;}\n.frame-content.desktop {  top: 0px;  height: 100vh;  width: 350px;  right: 0px;  left: unset;}\n.close {  color: #aaaaaa;  float: right;  font-size: 28px;  font-weight: bold;}\n.close:hover, .close:focus {  color: #000;  text-decoration: none;  cursor: pointer;}\n.slideup, .slidedown {  max-height: 0; overflow-y: hidden;  -webkit-transition: max-height 0.8s ease-in-out; -moz-transition: max-height 0.8s ease-in-out; -o-transition: max-height 0.8s ease-in-out;\n  transition: max-height 0.8s ease-in-out;}\n.slidedown {max-height: 410px;}\n.jads-icon-play{  background: url("+g+") no-repeat;}\n.jads-icon-play.jads-icon-pause{  background: url("+y+") no-repeat;}\n.jads-icon-mute{ background: url("+v+") no-repeat;}\n.jads-icon-mute.jads-icon-unmute{ background: url("+b+") no-repeat;}\n.jads-icon-close{ background: url("+A+") no-repeat;}\n.jads-icon-skip{ background: url("+k+") no-repeat;}\n.jads-btn-right-arrow{  background: url("+g+") no-repeat;}",""]);const I=m},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(n[o]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);a&&n[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),t.push(c))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},187:e=>{"use strict";var t,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}e.exports=r,e.exports.once=function(e,t){return new Promise((function(i,a){function n(i){e.removeListener(t,r),a(i)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",n),i([].slice.call(arguments))}f(e,t,r,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,n)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function d(e,t,i,a){var n,r,o,d;if(s(i),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),r=e._events),o=r[t]),void 0===o)o=r[t]=i,++e._eventsCount;else if("function"==typeof o?o=r[t]=a?[i,o]:[o,i]:a?o.unshift(i):o.push(i),(n=c(e))>0&&o.length>n&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,d=l,console&&console.warn&&console.warn(d)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,i){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=l.bind(a);return n.listener=i,a.wrapFn=n,n}function h(e,t,i){var a=e._events;if(void 0===a)return[];var n=a[t];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(n):m(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function m(e,t){for(var i=new Array(t),a=0;a<t;++a)i[a]=e[a];return i}function f(e,t,i,a){if("function"==typeof e.on)a.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(r){a.once&&e.removeEventListener(t,n),i(r)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=r[e];if(void 0===c)return!1;if("function"==typeof c)a(c,this,t);else{var d=c.length,l=m(c,d);for(i=0;i<d;++i)a(l[i],this,t)}return!0},r.prototype.addListener=function(e,t){return d(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return d(this,e,t,!0)},r.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},r.prototype.removeListener=function(e,t){var i,a,n,r,o;if(s(t),void 0===(a=this._events))return this;if(void 0===(i=a[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,r=i.length-1;r>=0;r--)if(i[r]===t||i[r].listener===t){o=i[r].listener,n=r;break}if(n<0)return this;0===n?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,n),1===i.length&&(a[e]=i[0]),void 0!==a.removeListener&&this.emit("removeListener",e,o||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,i,a;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var n,r=Object.keys(i);for(a=0;a<r.length;++a)"removeListener"!==(n=r[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(a=t.length-1;a>=0;a--)this.removeListener(e,t[a]);return this},r.prototype.listeners=function(e){return h(this,e,!0)},r.prototype.rawListeners=function(e){return h(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},r.prototype.listenerCount=p,r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},117:(e,t,i)=>{var a=i(187),n=i(717);function r(e){if(!(this instanceof r))return new r(e);"number"==typeof e&&(e={max:e}),e||(e={}),a.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=r,n(r,a.EventEmitter),Object.defineProperty(r.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),r.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},r.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},r.prototype._unlink=function(e,t,i){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=i,this.cache[this.tail].prev=null):(this.cache[t].next=i,this.cache[i].prev=t)},r.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},r.prototype.set=function(e,t){var i;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((i=this.cache[e]).value=t,this.maxAge&&(i.modified=Date.now()),e===this.head)return t;this._unlink(e,i.prev,i.next)}else i={value:t,modified:0,next:null,prev:null},this.maxAge&&(i.modified=Date.now()),this.cache[e]=i,this.length===this.max&&this.evict();return this.length++,i.next=null,i.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},r.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge&&(this.remove(e),this.emit("evict",{key:e,value:t.value}),1))},r.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},r.prototype.evict=function(){if(this.tail){var e=this.tail,t=this.remove(this.tail);this.emit("evict",{key:e,value:t})}}},528:function(e,t){var i,a,n;!function(r,o){"use strict";"object"==typeof e.exports?e.exports=o():(a=[],void 0===(n="function"==typeof(i=o)?i.apply(t,a):i)||(e.exports=n))}(0,(function(){"use strict";var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function i(e){if(!e)return!0;if(n(e)&&0===e.length)return!0;if("string"!=typeof e){for(var i in e)if(t(e,i))return!1;return!0}return!1}function a(t){return e.call(t)}var n=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(e){var t=parseInt(e);return t.toString()===e?t:e}function o(e){var o,s,c=function(e){return Object.keys(c).reduce((function(t,i){return"create"===i||"function"==typeof c[i]&&(t[i]=c[i].bind(c,e)),t}),{})};function d(e,t){if(o(e,t))return e[t]}function l(e,t,i,a){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return l(e,t.split(".").map(r),i,a);var n=t[0],o=s(e,n);return 1===t.length?(void 0!==o&&a||(e[n]=i),o):(void 0===o&&("number"==typeof t[1]?e[n]=[]:e[n]={}),l(e[n],t.slice(1),i,a))}return o=(e=e||{}).includeInheritedProps?function(){return!0}:function(e,i){return"number"==typeof i&&Array.isArray(e)||t(e,i)},s=e.includeInheritedProps?function(e,t){"string"!=typeof t&&"number"!=typeof t&&(t=String(t));var i=d(e,t);if("__proto__"===t||"prototype"===t||"constructor"===t&&"function"==typeof i)throw new Error("For security reasons, object's magic properties cannot be set");return i}:function(e,t){return d(e,t)},c.has=function(i,a){if("number"==typeof a?a=[a]:"string"==typeof a&&(a=a.split(".")),!a||0===a.length)return!!i;for(var o=0;o<a.length;o++){var s=r(a[o]);if(!("number"==typeof s&&n(i)&&s<i.length||(e.includeInheritedProps?s in Object(i):t(i,s))))return!1;i=i[s]}return!0},c.ensureExists=function(e,t,i){return l(e,t,i,!0)},c.set=function(e,t,i,a){return l(e,t,i,a)},c.insert=function(e,t,i,a){var r=c.get(e,t);a=~~a,n(r)||(r=[],c.set(e,t,r)),r.splice(a,0,i)},c.empty=function(e,t){var r,s;if(!i(t)&&null!=e&&(r=c.get(e,t))){if("string"==typeof r)return c.set(e,t,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===a(e)}(r))return c.set(e,t,!1);if("number"==typeof r)return c.set(e,t,0);if(n(r))r.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===a(e)}(r))return c.set(e,t,null);for(s in r)o(r,s)&&delete r[s]}}},c.push=function(e,t){var i=c.get(e,t);n(i)||(i=[],c.set(e,t,i)),i.push.apply(i,Array.prototype.slice.call(arguments,2))},c.coalesce=function(e,t,i){for(var a,n=0,r=t.length;n<r;n++)if(void 0!==(a=c.get(e,t[n])))return a;return i},c.get=function(e,t,i){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return i;if("string"==typeof t)return c.get(e,t.split("."),i);var a=r(t[0]),n=s(e,a);return void 0===n?i:1===t.length?n:c.get(e[a],t.slice(1),i)},c.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(i(t))return e;if("string"==typeof t)return c.del(e,t.split("."));var a=r(t[0]);return s(e,a),o(e,a)?1!==t.length?c.del(e[a],t.slice(1)):(n(e)?e.splice(a,1):delete e[a],e):e},c}var s=o();return s.create=o,s.withInheritedProps=o({includeInheritedProps:!0}),s}))},379:(e,t,i)=>{"use strict";var a,n=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),r=[];function o(e){for(var t=-1,i=0;i<r.length;i++)if(r[i].identifier===e){t=i;break}return t}function s(e,t){for(var i={},a=[],n=0;n<e.length;n++){var s=e[n],c=t.base?s[0]+t.base:s[0],d=i[c]||0,l="".concat(c," ").concat(d);i[c]=d+1;var u=o(l),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(r[u].references++,r[u].updater(h)):r.push({identifier:l,updater:f(h,t),references:1}),a.push(l)}return a}function c(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var r=i.nc;r&&(a.nonce=r)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var o=n(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var d,l=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function u(e,t,i,a){var n=i?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=l(t,n);else{var r=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function h(e,t,i){var a=i.css,n=i.media,r=i.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var p=null,m=0;function f(e,t){var i,a,n;if(t.singleton){var r=m++;i=p||(p=c(t)),a=u.bind(null,i,r,!1),n=u.bind(null,i,r,!0)}else i=c(t),a=h.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var i=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<i.length;a++){var n=o(i[a]);r[n].references--}for(var c=s(e,t),d=0;d<i.length;d++){var l=o(i[d]);0===r[l].references&&(r[l].updater(),r.splice(l,1))}i=c}}}},816:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDY0IDY0Ij4KICA8cGF0aCBpZD0iUGF0aF80MDY3IiBkYXRhLW5hbWU9IlBhdGggNDA2NyIgZD0iTTIxNDIsMTA0NWEzMiwzMiwwLDEsMCwzMiwzMkEzMiwzMiwwLDAsMCwyMTQyLDEwNDVabTkuOTc2LDM4Ljc2NWEyLjI4NSwyLjI4NSwwLDEsMS0zLjIzMiwzLjIzMmwtNi43NjUtNi43NjUtNi43NjUsNi43NjVhMi4yODUsMi4yODUsMCwwLDEtMy4yMzItMy4yMzJsNi43NjUtNi43NjUtNi43NjUtNi43NjVhMi4yODUsMi4yODUsMCwwLDEsMy4yMzItMy4yMzJsNi43NjUsNi43NjUsNi43NjUtNi43NjVhMi4yODUsMi4yODUsMCwwLDEsMy4yMzIsMy4yMzJMMjE0NS4yMSwxMDc3WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxMTAgLTEwNDUpIiBmaWxsPSIjZjdmN2Y3Ii8+Cjwvc3ZnPgo="},384:e=>{"use strict";e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMCIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxNSAxNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTUgMTU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojMzEzMTNGO30KCS5zdDF7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNLTIyLjEsMTMuOGMtMC40LDAtMC43LTAuMS0xLTAuNHMtMC40LTAuNi0wLjQtMVY0LjFjMC0wLjQsMC4xLTAuNywwLjQtMXMwLjYtMC40LDEtMC40aDYuOQoJCQljMC4yLDAsMC40LDAuMSwwLjYsMC4yczAuMiwwLjQsMC4yLDAuNnMtMC4xLDAuNC0wLjIsMC42TC0xNSw0LjVjLTAuMiwwLjItMC40LDAuMi0wLjYsMC4yaC01Ljl2N2g3VjguNmMwLTAuMiwwLjEtMC40LDAuMi0wLjYKCQkJbDAuNC0wLjRjMC4xLTAuMiwwLjMtMC4yLDAuNS0wLjJjMC4zLDAsMC40LDAuMSwwLjYsMC4yYzAuMiwwLjEsMC4yLDAuNCwwLjIsMC42djQuMWMwLDAuNC0wLjEsMC43LTAuNCwxcy0wLjYsMC40LTEsMC40SC0yMi4xegoJCQkgTS0xNy42LDEwLjhjLTAuMiwwLTAuNC0wLjEtMC42LTAuMmwtMC41LTAuNUMtMTguOSw5LjgtMTksOS42LTE5LDkuNHMwLjEtMC40LDAuMi0wLjZsNS41LTUuNWwtMC43LTAuNwoJCQljLTAuMi0wLjItMC4yLTAuNC0wLjItMC42czAuMS0wLjQsMC4yLTAuNnMwLjQtMC4yLDAuNi0wLjJoM2MwLjIsMCwwLjQsMC4xLDAuNiwwLjJzMC4yLDAuNCwwLjIsMC42djNjMCwwLjItMC4xLDAuNC0wLjIsMC42CgkJCXMtMC40LDAuMi0wLjYsMC4ycy0wLjQtMC4xLTAuNi0wLjJMLTExLjYsNWwtNS41LDUuNUMtMTcuMiwxMC43LTE3LjQsMTAuOC0xNy42LDEwLjh6Ii8+CgkJPHBhdGggY2xhc3M9InN0MSIgZD0iTS0xMC4zLDEuNWMwLjIsMCwwLjMsMC4xLDAuNCwwLjJjMC4xLDAuMSwwLjIsMC4yLDAuMiwwLjR2M2MwLDAuMi0wLjEsMC4zLTAuMiwwLjRjLTAuMSwwLjEtMC4yLDAuMi0wLjQsMC4yCgkJCXMtMC4zLTAuMS0wLjQtMC4ybC0wLjgtMC44bC01LjcsNS43Yy0wLjEsMC4xLTAuMiwwLjItMC40LDAuMnMtMC4zLTAuMS0wLjQtMC4ybC0wLjUtMC41Yy0wLjEtMC4xLTAuMi0wLjItMC4yLTAuNAoJCQlzMC4xLTAuMywwLjItMC40bDUuNy01LjdsLTAuOC0wLjhjLTAuMS0wLjEtMC4yLTAuMi0wLjItMC40czAuMS0wLjMsMC4yLTAuNGMwLjEtMC4xLDAuMi0wLjIsMC40LTAuMkgtMTAuMyBNLTE1LjIsMwoJCQljMC4yLDAsMC4zLDAuMSwwLjQsMC4yYzAuMSwwLjEsMC4yLDAuMiwwLjIsMC40cy0wLjEsMC4zLTAuMiwwLjRsLTAuNCwwLjRjLTAuMSwwLjEtMC4yLDAuMi0wLjQsMC4yaC02LjJWMTJoNy41VjguNgoJCQljMC0wLjIsMC4xLTAuMywwLjItMC40bDAuNC0wLjRjMC4xLTAuMSwwLjItMC4yLDAuNC0wLjJjMCwwLDAsMCwwLDBjMC4yLDAsMC4zLDAuMSwwLjQsMC4yYzAuMSwwLjEsMC4yLDAuMiwwLjIsMC40djQuMQoJCQljMCwwLjMtMC4xLDAuNi0wLjMsMC44cy0wLjUsMC4zLTAuOCwwLjNoLTguM2MtMC4zLDAtMC42LTAuMS0wLjgtMC4zcy0wLjMtMC41LTAuMy0wLjhWNC4xYzAtMC4zLDAuMS0wLjYsMC4zLTAuOFMtMjIuNCwzLTIyLjEsMwoJCQlILTE1LjIgTS0xMC4zLDFoLTNjLTAuMywwLTAuNSwwLjEtMC44LDAuM2MtMC4yLDAuMi0wLjMsMC41LTAuMywwLjhzMC4xLDAuNSwwLjMsMC44bDAuNSwwLjVsLTAuNiwwLjZjMC0wLjEsMC4xLTAuMiwwLjEtMC4zCgkJCWMwLTAuMy0wLjEtMC41LTAuMy0wLjhjLTAuMi0wLjItMC41LTAuMy0wLjgtMC4zaC02LjljLTAuNCwwLTAuOCwwLjItMS4yLDAuNWMtMC4zLDAuMy0wLjUsMC43LTAuNSwxLjJ2OC4zCgkJCWMwLDAuNCwwLjIsMC44LDAuNSwxLjJjMC4zLDAuMywwLjcsMC41LDEuMiwwLjVoOC4zYzAuNCwwLDAuOC0wLjIsMS4yLTAuNWMwLjMtMC4zLDAuNS0wLjcsMC41LTEuMlY4LjNjMC0wLjMtMC4xLTAuNi0wLjMtMC44CgkJCWMtMC4yLTAuMi0wLjQtMC4zLTAuNy0wLjNsMCwwbDAsMGMwLDAsMCwwLTAuMSwwbDEuOC0xLjlsMC41LDAuNWMwLjIsMC4yLDAuNSwwLjMsMC44LDAuM1MtOS44LDYtOS42LDUuOAoJCQljMC4yLTAuMiwwLjMtMC41LDAuMy0wLjh2LTNjMC0wLjMtMC4xLTAuNS0wLjMtMC44Qy05LjgsMS4xLTEwLDEtMTAuMywxTC0xMC4zLDF6IE0tMjEuMyw1aDUuN2MwLjEsMCwwLjIsMCwwLjMtMC4xbC0zLjcsMy43CgkJCWMtMC4yLDAuMi0wLjMsMC41LTAuMywwLjhjMCwwLjMsMC4xLDAuNSwwLjMsMC44bDAuNSwwLjVjMC4yLDAuMiwwLjUsMC4zLDAuOCwwLjNzMC41LTAuMSwwLjgtMC4zbDIuMi0yLjJjMCwwLDAsMC4xLDAsMC4xdjIuOQoJCQloLTYuNVY1TC0yMS4zLDV6Ii8+Cgk8L2c+CjwvZz4KPGc+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTEuNSwxMi44Yy0wLjMsMC0wLjYtMC4xLTAuOS0wLjRMNy41LDkuM2wtMy4xLDMuMWMtMC4yLDAuMi0wLjUsMC40LTAuOSwwLjRzLTAuNi0wLjEtMC45LTAuNAoJCXMtMC40LTAuNS0wLjQtMC45czAuMS0wLjYsMC40LTAuOWwzLjEtMy4xTDIuNiw0LjRDMi40LDQuMSwyLjMsMy44LDIuMywzLjVjMC0wLjMsMC4xLTAuNiwwLjQtMC45czAuNS0wLjQsMC45LTAuNAoJCWMwLjMsMCwwLjYsMC4xLDAuOSwwLjRsMy4xLDMuMWwzLjEtMy4xYzAuMi0wLjIsMC41LTAuNCwwLjktMC40czAuNiwwLjEsMC45LDAuNHMwLjQsMC41LDAuNCwwLjlzLTAuMSwwLjYtMC40LDAuOUw5LjMsNy41CgkJbDMuMSwzLjFjMC4yLDAuMiwwLjQsMC41LDAuNCwwLjljMCwwLjMtMC4xLDAuNi0wLjQsMC45UzExLjgsMTIuOCwxMS41LDEyLjh6Ii8+Cgk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMy41LDIuNWMwLjMsMCwwLjUsMC4xLDAuNywwLjNsMy4zLDMuM2wzLjMtMy4zYzAuMi0wLjIsMC40LTAuMywwLjctMC4zYzAuMywwLDAuNSwwLjEsMC43LDAuMwoJCWMwLjQsMC40LDAuNCwxLDAsMS40TDguOSw3LjVsMy4zLDMuM2MwLjQsMC40LDAuNCwxLDAsMS40Yy0wLjIsMC4yLTAuNCwwLjMtMC43LDAuM3MtMC41LTAuMS0wLjctMC4zTDcuNSw4LjlsLTMuMywzLjMKCQljLTAuMiwwLjItMC40LDAuMy0wLjcsMC4zUzMsMTIuNCwyLjgsMTIuMmMtMC40LTAuNC0wLjQtMSwwLTEuNGwzLjMtMy4zTDIuOCw0LjJjLTAuNC0wLjQtMC40LTEsMC0xLjRDMywyLjYsMy4yLDIuNSwzLjUsMi41CgkJIE0zLjUsMkMzLjEsMiwyLjcsMi4yLDIuNCwyLjRDMi4yLDIuNywyLDMuMSwyLDMuNWMwLDAuNCwwLjIsMC44LDAuNCwxLjFsMywzbC0yLjksMi45Yy0wLjYsMC42LTAuNiwxLjUsMCwyLjEKCQlDMi43LDEyLjgsMy4xLDEzLDMuNSwxM2MwLjQsMCwwLjgtMC4yLDEuMS0wLjRsMi45LTIuOWwzLDNjMC4zLDAuMywwLjcsMC40LDEuMSwwLjRjMC40LDAsMC44LTAuMiwxLjEtMC40YzAuNi0wLjYsMC42LTEuNSwwLTIuMQoJCWwtMy0zbDIuOS0yLjljMC42LTAuNiwwLjYtMS41LDAtMi4xQzEyLjMsMi4yLDExLjksMiwxMS41LDJzLTAuOCwwLjItMS4xLDAuNEw3LjUsNS40bC0zLTNDNC4zLDIuMiwzLjksMiwzLjUsMkwzLjUsMnoiLz4KPC9nPgo8L3N2Zz4K"},357:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfMzE3ODgiIGRhdGEtbmFtZT0iR3JvdXAgMzE3ODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDY0IDY0Ij4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4KICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xNjEwNyIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgMTYxMDciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgZmlsbD0iI2ZmZiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+CiAgPGcgaWQ9Ikdyb3VwXzMxNzg2IiBkYXRhLW5hbWU9Ikdyb3VwIDMxNzg2IiBjbGlwLXBhdGg9InVybCgjY2xpcC1wYXRoKSI+CiAgICA8cGF0aCBpZD0iUGF0aF80MTE2IiBkYXRhLW5hbWU9IlBhdGggNDExNiIgZD0iTTM3LjMsMTQuMjE2YTUuMjUsNS4yNSwwLDAsMC01LjgwOSwxLjE0NUwxOS40MSwyNy4zODVIMTEuMjM2QzguMiwyNy4zODUsNiwyOS45NDEsNiwzMy41bC4xMzMsOC4zNDdBNS44NjMsNS44NjMsMCwwLDAsMTEuOTksNDcuN0gyMC4yTDMxLjYyOSw1OC4yODlhNS4yNzcsNS4yNzcsMCwwLDAsMy42LDEuNDM0LDUuMzkzLDUuMzkzLDAsMCwwLDIuMTU5LS40NTgsNS4yNjUsNS4yNjUsMCwwLDAsMy4yLTQuODg4VjE5LjE0MUE1LjI1Miw1LjI1MiwwLDAsMCwzNy4zLDE0LjIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIgLTQuNTk4KSIgZmlsbD0iI2ZmZiIvPgogICAgPHBhdGggaWQ9IlBhdGhfNDExNyIgZGF0YS1uYW1lPSJQYXRoIDQxMTciIGQ9Ik03Ny4zNDgsNDQuMTY3LDgxLjYsMzkuOTE0YTIsMiwwLDEsMC0yLjgyOC0yLjgyOEw3NC41Miw0MS4zMzlsLTQuMjUzLTQuMjUzYTIsMiwwLDEsMC0yLjgyOCwyLjgyOGw0LjI1Myw0LjI1My00LjI1Myw0LjI1M2EyLDIsMCwxLDAsMi44MjgsMi44MjhsNC4yNTMtNC4yNTMsNC4yNTMsNC4yNTNBMiwyLDAsMCwwLDgxLjYsNDguNDE5WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIyLjI4NCAtMTIuMTY3KSIgZmlsbD0iI2ZmZiIvPgogIDwvZz4KPC9zdmc+Cg=="},677:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCI+CiAgPGRlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImNsaXAtcGF0aCI+CiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMTYxMDQiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDE2MTA0IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNmZmYiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJHcm91cF8zMTc3OSIgZGF0YS1uYW1lPSJHcm91cCAzMTc3OSIgY2xpcC1wYXRoPSJ1cmwoI2NsaXAtcGF0aCkiPgogICAgPHBhdGggaWQ9IlBhdGhfNDExMiIgZGF0YS1uYW1lPSJQYXRoIDQxMTIiIGQ9Ik0zMiwwQTMyLDMyLDAsMSwwLDY0LDMyLDMyLDMyLDAsMCwwLDMyLDBNMjguMTkyLDQwLjc2MmEyLjI4NiwyLjI4NiwwLDEsMS00LjU3MiwwVjIzLjIzOGEyLjI4NiwyLjI4NiwwLDEsMSw0LjU3MSwwWm0xMi4xODcsMGEyLjI4NiwyLjI4NiwwLDEsMS00LjU3MSwwVjIzLjIzOGEyLjI4NiwyLjI4NiwwLDEsMSw0LjU3MSwwWiIgZmlsbD0iI2ZmZiIvPgogIDwvZz4KPC9zdmc+Cg=="},854:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCI+CiAgPGRlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImNsaXAtcGF0aCI+CiAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGVfMTYxMDMiIGRhdGEtbmFtZT0iUmVjdGFuZ2xlIDE2MTAzIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiNmZmYiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgogIDxnIGlkPSJHcm91cF8zMTc3NyIgZGF0YS1uYW1lPSJHcm91cCAzMTc3NyIgY2xpcC1wYXRoPSJ1cmwoI2NsaXAtcGF0aCkiPgogICAgPHBhdGggaWQ9IlBhdGhfNDExMSIgZGF0YS1uYW1lPSJQYXRoIDQxMTEiIGQ9Ik0zNy4zNjUsNS45YTMyLDMyLDAsMSwwLDMyLDMyLDMyLDMyLDAsMCwwLTMyLTMyTTQ3Ljg5Myw0MC42NDNsLS4wMjQuMDE5TDM0LjIzLDUxLjY3NWEzLjUxNCwzLjUxNCwwLDAsMS0yLjI1NC44MTUsMy42MTcsMy42MTcsMCwwLDEtMS41NDItLjM0MywzLjU2LDMuNTYsMCwwLDEtMi4wNjUtMy4yNTRMMjguMzkxLDI2LjlhMy41OTEsMy41OTEsMCwwLDEsNS44ODYtMi43NTlMNDcuODY5LDM1LjEwNmEzLjU5MSwzLjU5MSwwLDAsMSwuMDI0LDUuNTQ2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNS4zNjUgLTUuOSkiIGZpbGw9IiNmZmYiLz4KICA8L2c+Cjwvc3ZnPgo="},455:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfMzE3OTQiIGRhdGEtbmFtZT0iR3JvdXAgMzE3OTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDY0IDY0Ij4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4KICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xNjEwOSIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgMTYxMDkiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgZmlsbD0iI2ZmZiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+CiAgPGcgaWQ9Ikdyb3VwXzMxNzkyIiBkYXRhLW5hbWU9Ikdyb3VwIDMxNzkyIiBjbGlwLXBhdGg9InVybCgjY2xpcC1wYXRoKSI+CiAgICA8cGF0aCBpZD0iUGF0aF80MTIyIiBkYXRhLW5hbWU9IlBhdGggNDEyMiIgZD0iTTY5LjgxLDU4LjU0OGEyLDIsMCwwLDEtMi0ydi0zOGEyLDIsMCwwLDEsNCwwdjM4YTIsMiwwLDAsMS0yLDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMi42MDMgLTUuNTE2KSIgZmlsbD0iI2ZmZiIvPgogICAgPHBhdGggaWQ9IlBhdGhfNDEyMyIgZGF0YS1uYW1lPSJQYXRoIDQxMjMiIGQ9Ik0yNC42NzEsNTguNzM4YTQuMDcsNC4wNywwLDAsMS0xLjczMy0uMzkxLDQuMDE1LDQuMDE1LDAsMCwxLTIuMzI4LTMuNjcxbC4wMzQtMzQuNTQ5YTQuMDUsNC4wNSwwLDAsMSw2LjYzOS0zLjExMWwuMDkuMDc5TDQ1Ljc0OSwzNC4zMTlhNC4wNDksNC4wNDksMCwwLDEsMCw2LjE0MkwyNy4yNDksNTcuOGE0LjAyMSw0LjAyMSwwLDAsMS0yLjU3OS45NDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02Ljg3IC01LjM1OCkiIGZpbGw9IiNmZmYiLz4KICA8L2c+Cjwvc3ZnPgo="},341:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iR3JvdXBfMzE3ODUiIGRhdGEtbmFtZT0iR3JvdXAgMzE3ODUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgdmlld0JveD0iMCAwIDY0IDY0Ij4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcC1wYXRoIj4KICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xNjEwNiIgZGF0YS1uYW1lPSJSZWN0YW5nbGUgMTYxMDYiIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgZmlsbD0iI2ZmZiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+CiAgPGcgaWQ9Ikdyb3VwXzMxNzgzIiBkYXRhLW5hbWU9Ikdyb3VwIDMxNzgzIiBjbGlwLXBhdGg9InVybCgjY2xpcC1wYXRoKSI+CiAgICA8cGF0aCBpZD0iUGF0aF80MTEzIiBkYXRhLW5hbWU9IlBhdGggNDExMyIgZD0iTTc0LjQzLDU3LjA2NmEyLDIsMCwwLDEtMS4yNzctMy41NDFjNC4yNDUtMy41MTQsNi45ODktOC45NjUsNi45ODktMTMuODg2Uzc3LjQsMjkuMjU3LDczLjE1NiwyNS43NTVBMiwyLDAsMCwxLDc1LjcsMjIuNjY5YzUuMTI4LDQuMjMyLDguNDQxLDEwLjg5Myw4LjQ0MSwxNi45N1M4MC44Myw1Mi4zNjMsNzUuNyw1Ni42MDdhMS45OTEsMS45OTEsMCwwLDEtMS4yNzQuNDU5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjQuMTQzIC03LjQwNCkiIGZpbGw9IiNmZmYiLz4KICAgIDxwYXRoIGlkPSJQYXRoXzQxMTQiIGRhdGEtbmFtZT0iUGF0aCA0MTE0IiBkPSJNNjYuNzE3LDUzLjg1M2EyLDIsMCwwLDEtMS4xNzctMy42MThjMS45NjktMS40MzEsNC4zMTgtMy44NzMsNC4zMTgtNy4zODFzLTIuMzQ5LTUuOTQ5LTQuMzE5LTcuMzgxYTIsMiwwLDAsMSwyLjM1Mi0zLjIzNmMzLjg0NywyLjgsNS45NjcsNi41NjcsNS45NjcsMTAuNjE3cy0yLjExOSw3LjgyMy01Ljk2NywxMC42MTdhMS45OSwxLjk5LDAsMCwxLTEuMTczLjM4MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxLjU3MiAtMTAuNjE4KSIgZmlsbD0iI2ZmZiIvPgogICAgPHBhdGggaWQ9IlBhdGhfNDExNSIgZGF0YS1uYW1lPSJQYXRoIDQxMTUiIGQ9Ik0zNy4zLDE0LjIxNmE1LjI1MSw1LjI1MSwwLDAsMC01LjgwOSwxLjE0NUwxOS40MSwyNy4zODVIMTEuMjM2QzguMiwyNy4zODUsNiwyOS45NDEsNiwzMy41bC4xMzMsOC4zNDdBNS44NjMsNS44NjMsMCwwLDAsMTEuOTksNDcuN0gyMC4yTDMxLjYyOSw1OC4yODlhNS4yNzcsNS4yNzcsMCwwLDAsMy42LDEuNDM0LDUuMzkzLDUuMzkzLDAsMCwwLDIuMTU5LS40NTgsNS4yNjUsNS4yNjUsMCwwLDAsMy4yLTQuODg4VjE5LjE0MUE1LjI1Miw1LjI1MiwwLDAsMCwzNy4zLDE0LjIxNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIgLTQuNTk4KSIgZmlsbD0iI2ZmZiIvPgogIDwvZz4KPC9zdmc+Cg=="}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={id:a,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0;var a={};(()=>{"use strict";i.r(a),i.d(a,{closeAd:()=>Yr,closeAfter:()=>Qr,fireConversionApi:()=>no,getCreativeData:()=>Xr,isAdSkippable:()=>Zr,setConfiguration:()=>$r,ssaiDestroy:()=>ao,ssaiGetMediaURL:()=>io,ssaiGetViewPlayListURL:()=>to,ssaiManifestUpdate:()=>so,ssaiPeriodSwitch:()=>co,ssaiProgressUpdate:()=>oo,ssaiStartTracking:()=>ro,togglePlay:()=>eo});var e=i(379),t=i.n(e),n=i(756);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s(a.key),a)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}t()(n.Z,{insert:"head",singleton:!1}),n.Z.locals;var c=null,d={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},l=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.type,a=void 0===i?"local":i;this.type=a,this.storage=this.initStorage()},(t=[{key:"initStorage",value:function(){if(c)return c;try{c="undefined"!=typeof window&&null!==window?"local"==this.type?window.localStorage:window.sessionStorage:null}catch(e){c=null}return c&&!this.isStorageDisabled(c)||(c=d).clear(),c}},{key:"isStorageDisabled",value:function(e){var t="__JioTestStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){try{return JSON.parse(this.storage.getItem(e))}catch(t){return this.storage.getItem(e)}}},{key:"setItem",value:function(e,t){try{return"object"==r(t)&&(t=JSON.stringify(t)),this.storage.setItem(e,t)}catch(e){console.log("cant able to parse JSON",e)}}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),u={locationHandler:function(){if(ot.hasLocationSet)bt.log("Required location information is already set by Application");else{var e=function(e){var t=e.coords;t.latitude&&t.latitude&&t.accuracy&&e.timestamp&&(bt.log("Required information fetched using fetchLocation API hence remove geolocation listener"),navigator.geolocation.clearWatch(a));var i={latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,timestamp:e.timestamp};bt.log("locationInfo using fetchLocation API => ".concat(JSON.stringify(i))),ot.lo=i.longitude,ot.la=i.latitude,ot.acc=i.accuracy,ot.gts=i.timestamp,ot.hasLocationSet=!0,h.setItem("locationInfo",i)},t=function(e){navigator.geolocation.clearWatch(a)},i={enableHighAccuracy:!0,timeout:2e4,maximumAge:0};navigator.geolocation.getCurrentPosition(e,t,i);var a=navigator.geolocation.watchPosition(e,t,i)}}},h=new l;const p=u;var m=i(528),f=i.n(m);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function b(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,A(a.key),a)}}function A(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=g(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}const k=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.storageKey=t,this.isDefaultStorageEnable=function(){try{return localStorage.setItem("__JioTestStorage__","__JioTestStorage__"),localStorage.removeItem("__JioTestStorage__"),!0}catch(e){return!1}}())},(t=[{key:"getAllData",value:function(){try{if(!this.isDefaultStorageEnable)return{};var e=localStorage.getItem(this.storageKey);return JSON.parse(e)||{}}catch(e){return{}}}},{key:"getCampaigns",value:function(e,t){try{var i=this.getAllData();return t=t||e,!!(i&&Object.keys(i).length>0&&i.hasOwnProperty(t))&&i[t].asi[e].cmps}catch(e){return{}}}},{key:"getCampaignsConfig",value:function(e,t){try{var i=this.getAllData();return t=t||e,!!(i&&Object.keys(i).length>0&&i.hasOwnProperty(t))&&i[t].asi[e].config}catch(e){return{}}}},{key:"updateCampaignsConfig",value:function(e,t){try{var i=this.getAllData();if(!(i&&Object.keys(i).length>0&&i.hasOwnProperty(e)))return!1;if(i[e].config.ecount+=t,localStorage.setItem(this.storageKey,JSON.stringify(i)),100*i[e].config.ecount/i[e].config.tcount<80)return!0}catch(e){return!1}}},{key:"updateIgnoredAds",value:function(e,t){try{var i=this.getAllData();if(!(i&&Object.keys(i).length>0&&i.hasOwnProperty(e)))return!1;var a=i[e].config.ignoredAdsH,n=a.indexOf(t[0]);(0==a.length||n<0)&&(i[e].config.ignoredAdsH=[].concat(y(a),y(t)),localStorage.setItem(this.storageKey,JSON.stringify(i)))}catch(e){return!1}}},{key:"getBackupCampaigns",value:function(e){try{var t=this.getAllData();return!!(t&&Object.keys(t).length>0&&t.hasOwnProperty("asi"))&&t.asi[e].bkp.cmps}catch(e){return{}}}},{key:"getAdspotData",value:function(e,t){try{var i=this.getAllData();return t=t||e,!!(i&&Object.keys(i).length>0&&i.hasOwnProperty(t))&&i[t]}catch(e){return{}}}},{key:"setCampaigns",value:function(e,t,i,a){try{var n=this.getAllData();return a=a||e,!!(n&&Object.keys(n).length>0&&n.hasOwnProperty(a))&&(n[a].asi[e].cmps[i]=t,localStorage.setItem(this.storageKey,JSON.stringify(n)),!0)}catch(e){return!1}}},{key:"getAdSize",value:function(e){try{var t=this.getAllData();return!!(t&&Object.keys(t).length>0&&t.hasOwnProperty(e))&&t[e].size}catch(e){return!1}}},{key:"get",value:function(e){var t=e.type,i=e.value,a=e.defaultValue,n=t&&i?"":e,r={EXPIRYDATE:"expiryDate",EXPIRY:"exp",VR:"[adspotkey].config.vr",ADSPOT:"[adspotkey]",THROTTLE:"[adspotkey].pacing","MULTI-ADSPOT-TYPE":"[adspotkey].asi.[adspotkey].config.at",MULTIADS:"[adspotkey].ma","BACKUP-ADS":"[adspots][adspotkey].bkp",TMS:"[adspotkey].config.tms",TCOUNT:"[adspotkey].config.tcount",ECOUNT:"[adspotkey].config.ecount",IGNOREDADSH:"[adspotkey].config.ignoredAdsH"};return["exp","expiryDate"].map((function(e){return e.toUpperCase()})).indexOf(e)>=0?n=r[e]:n||(n=r[t].replace(/\[adspotkey\]/gi,i)),f().get(this.getAllData(),n,a||!1)}},{key:"setData",value:function(e,t){try{var i=this.getAllData();return i[e]=t,localStorage.setItem(this.storageKey,JSON.stringify(i)),!0}catch(e){return!1}}},{key:"set",value:function(e){try{return!(!this.isDefaultStorageEnable||!e||(localStorage.setItem(this.storageKey,JSON.stringify(e)),0))}catch(e){return!1}}}])&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function S(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,T(a.key),a)}}function T(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=I(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}const w=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"getConnectionType",value:function(){var e=navigator.connection||navigator.webkitConnection||navigator.mozConnection;return e?"wifi"==e.type?1:"cellular"==e.type?2:0:0}},{key:"getCellularConnectionType",value:function(){return 2==this.getConnectionType()?navigator.connection.effectiveType:0}},{key:"registerOnConnectionTypeChange",value:function(e){navigator.connection.addEventListener("change",(function(t){e()}))}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function C(e){var t=parseInt(Math.sqrt(e));return t*t==e}const E=function(e){return C(5*e*e+4)||C(5*e*e-4)};var L=["platform","app","reqType"];function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function j(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?j(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=D(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function O(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,D(a.key),a)}}function D(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=M(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}var N=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.appName;this.masterConfigKey="jio_master_config_".concat(i),this.HTTPRequest=new yt,this.masterConfigRequestStatusKey="master-config-request-status_".concat(i),this.appName=i,this.cbSuccess=[],this.cbError=[],this.extra={},this.storage=new l},(t=[{key:"fetch",value:function(e,t,i,a){var n=this.getConfigPath();this.HTTPRequest.ajax(n,{method:"GET",timeout:ot.adRequestTimeout,checkJSON:!0},i,a)}},{key:"isExpired",value:function(){var e=this.storage.getItem(this.masterConfigKey)||{},t=this.get("expiryDate"),i=this.validateExpiry(t);return 0==Object.keys(e).length||!i}},{key:"validateExpiry",value:function(e){return e>(Date.now?Date.now():(new Date).getTime())}},{key:"setExpiryTime",value:function(e,t,i){var a=new Date;!e&&Object.keys(t).length>0&&(e=f().get(t,"exp",0));var n=a.setMinutes(a.getMinutes()+parseInt(e)),r=P(P({},t),{},{expiryDate:n});return i?(this.storage.setItem(this.masterConfigKey,r),null):r}},{key:"init",value:function(e,t,i){var a=this;if(this.config=e,this.cbSuccess.push(t),this.cbError.push(i),this.masterConfigState=sessionStorage.getItem(this.masterConfigRequestStatusKey)||0,this.isPlatformKaios=this.config.hasOwnProperty("platform")&&"ki"==this.config.platform,ot.hasParentPkg&&ot.aic&&ot.ai!=ot.aic){this.config.app&&this.appName&&this.config.app!=this.appName&&(this.config.app=this.appName);var n="master-config-request-status_".concat(ot.ai);if(2==(sessionStorage.getItem(n)||0))return this.executeCallback(this.cbError)}if(!this.isExpired())return this.executeCallback(this.cbSuccess);if(0==this.masterConfigState)sessionStorage.setItem(this.masterConfigRequestStatusKey,1),this.download();else{if(2!=this.masterConfigState)return void(this.interval=setInterval((function(){var e=sessionStorage.getItem(a.masterConfigRequestStatusKey);if(0==e)a.executeCallback(a.cbSuccess),clearInterval(a.interval);else if(2==e)a.executeCallback(a.cbError),clearInterval(a.interval);else{if(1!=e)return;console.log("this ",a)}}),100));var r=sessionStorage.getItem(this.masterConfigKey+"_fibonacciNum")||0;if(r=parseInt(r),sessionStorage.setItem(this.masterConfigKey+"_fibonacciNum",r+1),!E(r))return this.executeCallback(this.cbError);this.download()}}},{key:"download",value:function(){var e=this;this.fetch("",{},(function(t){bt.debug(t),e.setExpiryTime("",t,1),sessionStorage.setItem(e.masterConfigRequestStatusKey,0),sessionStorage.setItem(e.masterConfigKey+"_fibonacciNum",0),e.executeCallback(e.cbSuccess)}),(function(t){bt.debug(t),sessionStorage.setItem(e.masterConfigRequestStatusKey,2),e.executeCallback(e.cbError)})),bt.info("Response from FETCH","rs")}},{key:"executeCallback",value:function(e){if(e.length){for(var t=0;t<e.length;t++)"function"==typeof e[t]&&e[t]();this.cbSuccess.length=0,this.cbError.length=0}}},{key:"get",value:function(e,t){var i=e.type,a=e.value,n=e.defaultValue,r=i&&a?"":e,o={EXPIRYDATE:"expiryDate",EXPIRY:"exp",SSAI_VR:"config.ssai.vr",AD_OP:"asi.[adspotkey].config.ad-op",CGI_URL:"config.ssai.pacing.urls",CGI_UE:"config.ssai.ue.urls",VR:"asi.[adspotkey].config.vr",EPF:"config.epf",ADSPOT:"asi.[adspotkey]",THROTTLE:"asi.[adspotkey].pacing",METD:"asi.[adspotkey].pacing.metd",MULTIADS:"asi.[adspotkey].config.ma","BACKUP-ADS":"asi.[adspotkey].bkp.cmps","OFFSET-LATENCY":"asi.[adspotkey].latencyPerAd",TARGETING:"asi.[adspotkey].config.te",APP_TARGETING:"config.te","CHUNK-LENGTH":"cz","BACKUP-ADSPOT-TYPE":"asi.[adspotkey].config.at",POD:"asi.[adspotkey].config.pod",PODC:"asi.[adspotkey].config.podc",PMXD:"asi.[adspotkey].config.pmxd",MAT:"asi.[adspotkey].config.mat",APZ:"asi.[adspotkey].config.lna",F_RATE:"config.f_rate",ASI:"asi.[adspotkey].config.asid",FRE:"asi.[adspotkey].config.fre",BLK:"asi.[adspotkey].config.blk"};return["expiry","exp","te","SSAI_VR","CGI_URL","CGI_UE","EPF","APP_TARGETING","CHUNK-LENGTH","f_rate"].map((function(e){return e.toUpperCase()})).indexOf(e.type)>=0?r=o[e.type]:r||(r=o[i].replace("[adspotkey]",a)),t||(t=this.storage.getItem(this.masterConfigKey)),f().get(t,r,n||"")}},{key:"getErrorLog",value:function(){var e="";if(this.storage.getItem(this.masterConfigKey)){var t=this.storage.getItem(this.masterConfigKey).config.csl;e=JSON.parse(t)}return e?e.csl:""}},{key:"getConfigPath",value:function(){var e,t="https://mercury.akamaized.net/cfg/",i=this.config,a=i.platform,n=i.app,r=i.reqType,o=function(e,t){if(null==e)return{};var i,a,n=function(e,t){if(null==e)return{};var i,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)i=r[a],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)i=r[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(i,L);return e="prod"==r?"".concat(t).concat(a,"/").concat(n,".json?t=").concat(Date.now()||(new Date).getTime(),"&").concat(this.obj2URLEncoded(o)):"".concat(t).concat(r,"/").concat(a,"/").concat(n,".json?t=").concat(Date.now()||(new Date).getTime(),"&").concat(this.obj2URLEncoded(o)),bt.log(e),e}},{key:"obj2URLEncoded",value:function(e){var t=[],i=["extra"];if("object"===M(e)){for(var a in e)e.hasOwnProperty(a)&&-1==i.indexOf(a)&&t.push(a+"="+e[a]);return encodeURI(t.join("&"))}return""}}])&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const R=N,x={hot:["APPLAUNCHEVENT","DEEPLINKLAUNCHEVENT","ADDTOCART","REMOVEFROMCART","ADDTOWISHLIST","REMOVEFROMWISHLIST","PURCHASECOMPLETED","PRODUCT CANCELLED EVENT","PRODUCT RETURNED EVENT"],cold:["CARTVIEWEVENT","PAGEVIEWEVENT","PRODUCTLISTVIEWEVENT","PRODUCTVIEWEVENT","SEARCHVIEWEVENT","LOCATIONEVENT","CUSTOMEVENT"],all:{1:"APPLAUNCHEVENT",2:"DEEPLINKLAUNCHEVENT",3:"ADDTOCART",4:"REMOVEFROMCART",5:"ADDTOWISHLIST",6:"REMOVEFROMWISHLIST",7:"PURCHASECOMPLETED",8:"CARTVIEWEVENT",9:"PAGEVIEWEVENT",10:"PRODUCTLISTVIEWEVENT",11:"PRODUCTVIEWEVENT",12:"SEARCHVIEWEVENT",13:"LOCATIONEVENT",14:"CUSTOMEVENT",15:"DEVICE INFORMATION",16:"UserDetails Event",17:"Product Cancelled Event",18:"Product Returned Event"}};function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function V(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,B(a.key),a)}}function B(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=U(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}const _=function(){return e=function e(t,i,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSkippable=t,this.skipOffset=i,this.isAutoPlay=a,this.position=n},(t=[{key:"toJSON",value:function(){return{isSkippable:this.isSkippable,skipOffset:this.skipOffset,isAutoPlay:this.isAutoPlay,position:this.position}}}])&&V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function K(){K=function(){return t};var e,t={},i=Object.prototype,a=i.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function d(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,i){return e[t]=i}}function l(e,t,i,a){var r=t&&t.prototype instanceof y?t:y,o=Object.create(r.prototype),s=new j(a||[]);return n(o,"_invoke",{value:C(e,i,s)}),o}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",p="suspendedYield",m="executing",f="completed",g={};function y(){}function v(){}function b(){}var A={};d(A,o,(function(){return this}));var k=Object.getPrototypeOf,I=k&&k(k(P([])));I&&I!==i&&a.call(I,o)&&(A=I);var S=b.prototype=y.prototype=Object.create(A);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(n,r,o,s){var c=u(e[n],e,r);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==F(l)&&a.call(l,"__await")?t.resolve(l.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(l).then((function(e){d.value=e,o(d)}),(function(e){return i("throw",e,o,s)}))}s(c.arg)}var r;n(this,"_invoke",{value:function(e,a){function n(){return new t((function(t,n){i(e,a,t,n)}))}return r=r?r.then(n,n):n()}})}function C(t,i,a){var n=h;return function(r,o){if(n===m)throw Error("Generator is already running");if(n===f){if("throw"===r)throw o;return{value:e,done:!0}}for(a.method=r,a.arg=o;;){var s=a.delegate;if(s){var c=E(s,a);if(c){if(c===g)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===h)throw n=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=m;var d=u(t,i,a);if("normal"===d.type){if(n=a.done?f:p,d.arg===g)continue;return{value:d.arg,done:a.done}}"throw"===d.type&&(n=f,a.method="throw",a.arg=d.arg)}}}function E(t,i){var a=i.method,n=t.iterator[a];if(n===e)return i.delegate=null,"throw"===a&&t.iterator.return&&(i.method="return",i.arg=e,E(t,i),"throw"===i.method)||"return"!==a&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+a+"' method")),g;var r=u(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,g;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,g):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function P(t){if(t||""===t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(a.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}throw new TypeError(F(t)+" is not iterable")}return v.prototype=b,n(S,"constructor",{value:b,configurable:!0}),n(b,"constructor",{value:v,configurable:!0}),v.displayName=d(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,d(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},T(w.prototype),d(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,i,a,n,r){void 0===r&&(r=Promise);var o=new w(l(e,i,a,n),r);return t.isGeneratorFunction(i)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(S),d(S,c,"Generator"),d(S,o,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(a,n){return s.type="throw",s.arg=t,i.next=a,n&&(i.method="next",i.arg=e),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),d=a.call(o,"finallyLoc");if(c&&d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),M(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var a=i.completion;if("throw"===a.type){var n=a.arg;M(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,i,a){return this.delegate={iterator:P(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=e),g}},t}function z(e,t,i,a,n,r,o){try{var s=e[r](o),c=s.value}catch(e){return void i(e)}s.done?t(c):Promise.resolve(c).then(a,n)}function G(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,H(a.key),a)}}function H(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=F(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var q=["error","loadeddata","timeupdate","volumechange","click","pause","play","fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"];const J=function(){return e=function e(t,i,a){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.verificationSettings_=i,this.VastProperties=_,this.CreativeType="video",this.AccessMode="full",this.OmidPartnerName="JioAds",this.OmidPartnerVersion="1.0.0",this.videoElement_=t,this.adSession_=null,this.adEvents_=null,this.mediaEvents_=null,this.lastVideoTime_=-1,this.adObject_=r,this.sessionClientInitialization(a),q.forEach((function(e){n.videoElement_.addEventListener(e,(function(e){return n.videoElementDidDispatchEvent_(e)}))}))},t=[{key:"sessionClientInitialization",value:function(e){var t=this;e?(this.onInjectScript_(),this.omsdkIframeDidLoad_()):(this.omsdkIframe_=this.createScriptTag_(),this.omsdkIframe_.addEventListener("load",(function(){t.onInjectScript_(),t.omsdkIframeDidLoad_()})),this.omsdkIframe_.setAttribute("src",this.verificationSettings_.SESSION_CLIENT_URL),document.body.appendChild(this.omsdkIframe_))}},{key:"onInjectScript_",value:function(){var e;try{e=OmidSessionClient&&OmidSessionClient.default}catch(e){return}e&&(this.AdSession=e.AdSession,this.Partner=e.Partner,this.Context=e.Context,this.VerificationScriptResource=e.VerificationScriptResource,this.AdEvents=e.AdEvents,this.MediaEvents=e.MediaEvents)}},{key:"createScriptTag_",value:function(e){var t=document.createElement("script");return t.type="text/javascript",t}},{key:"omsdkIframeDidLoad_",value:function(){this.adSession_=this.createAdSession_(),this.adSession_.setCreativeType(this.CreativeType),this.adSession_.setImpressionType("beginToRender"),this.adEvents_=new this.AdEvents(this.adSession_),this.mediaEvents_=new this.MediaEvents(this.adSession_),this.adSession_.start()}},{key:"createAdSession_",value:function(){var e=new this.Partner(this.OmidPartnerName,this.OmidPartnerVersion),t=new this.VerificationScriptResource(this.verificationSettings_.VERIFICATION_SCRIPT_URL,this.verificationSettings_.VENDOR_KEY,this.verificationSettings_.VERIFICATION_PARAMETERS,this.AccessMode),i=this.verificationSettings_.CONTENT_URL||null,a=new this.Context(e,[t],i,"");a.underEvaluation=!0,a.setVideoElement(this.videoElement_);var n=window.top;if(!n)throw new Error("OM SDK iframe content window not available.");return a.setServiceWindow(n),new this.AdSession(a)}},{key:"videoElementDidDispatchEvent_",value:function(e){if(this.adSession_&&this.adEvents_&&this.mediaEvents_&&this.adSession_.isSessionRunning_)switch(e.type){case"error":this.adSession_.error("video",this.videoElement_.error.message);break;case"loadeddata":var t=new this.VastProperties(!1,0,!0,"preroll");this.adEvents_.loaded(t);break;case"timeupdate":this.videoElementDidDispatchTimeUpdate_();break;case"click":this.mediaEvents_.adUserInteraction("click");break;case"pause":this.videoElement_.ended||this.mediaEvents_.pause();break;case"play":0!=(this.adObject_&&this.adObject_.curAdTime?this.adObject_.curAdTime:this.videoElement_.currentTime)&&this.mediaEvents_.resume();break;case"volumechange":this.mediaEvents_.volumeChange(this.videoElement_.volume);break;case"fullscreenchange":case"webkitfullscreenchange":case"mozfullscreenchange":case"msfullscreenchange":this.videoPlayerStateDidChange_()}}},{key:"videoPlayerStateDidChange_",value:function(){var e=null!==document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullScreen?VideoPlayerState.FULLSCREEN:VideoPlayerState.NORMAL;this.mediaEvents_.playerStateChange(e)}},{key:"videoElementDidDispatchTimeUpdate_",value:function(){if(this.adEvents_&&this.mediaEvents_&&0!=this.videoElement_.playbackRate){var e=this.adObject_&&this.adObject_.respDuration?this.adObject_.respDuration:this.videoElement_.duration,t=this.adObject_&&this.adObject_.respDuration?this.adObject_.curAdTime/this.adObject_.respDuration:this.videoElement_.currentTime/this.videoElement_.duration;this.lastVideoTime_<0&&t>=0?(this.adEvents_.impressionOccurred(),this.mediaEvents_.start(e,this.videoElement_.volume)):this.lastVideoTime_<.25&&t>=.25?this.mediaEvents_.firstQuartile():this.lastVideoTime_<.5&&t>=.5?this.mediaEvents_.midpoint():this.lastVideoTime_<.75&&t>=.75?this.mediaEvents_.thirdQuartile():this.lastVideoTime_<1&&t>=.97&&(this.mediaEvents_.complete(),this.adSession_.finish()),this.lastVideoTime_=t}}},{key:"destoryAdsession",value:(i=K().mark((function e(){return K().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.adSession_,!e.t0){e.next=4;break}return e.next=4,this.adSession_.finish();case 4:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(a,n){var r=i.apply(e,t);function o(e){z(r,a,n,o,s,"next",e)}function s(e){z(r,a,n,o,s,"throw",e)}o(void 0)}))},function(){return a.apply(this,arguments)})},{key:"click",value:function(){this.mediaEvents_.adUserInteraction("click")}}],t&&G(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,i,a}();function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}var Q={isNumber:function(e){return!(void 0===e||"number"!=typeof e||!Number.isFinite(e))},isObject:function(e){return null!=e&&"object"===Y(e)},isEmpty:function(e){return!0},getRandomInteger:function(e,t){return e&&t?Math.min(t,Math.floor(Math.random()*(t-e+1)+e)):(bt.log("insufficient prameter for getRandomInteger"),!1)},ellipsisText:function(e,t){return e.length>t?"".concat(e.substring(0,t-3)," ..."):e},getMasterConfigParameter:function(){return(3==ot.os||4==ot.os)&&ot.detectMobileVsDesktopForJioAds(),{platform:ot.platform,reqType:ot.reqType,app:ot.ai||ot.aic||ot.appName,vr:ot.vr,av:ot.av}},filtered:function(e){var t=e.raw,i=e.keyList;try{return Object.keys(t).filter((function(e){return i.includes(e)})).reduce((function(e,i){return t[i]&&(e[i]=t[i]),e}),{})}catch(e){return bt.log("cant able to filtered"),{}}},clickControlEnabled:function(e){return!0},replaceMacros:function(e){var t=e.str,i=e.search,a=e.macros,n=new RegExp(i,"gi");return t.replace(n,a||i)},getChannelName:function(e){return e},generateMacrosList:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object.assign(e,ot),ot.hasOwnProperty("globalMetaData")&&Object.keys(ot.globalMetaData).forEach((function(t){e["md_".concat(t)]=ot.globalMetaData[t]}));var a=At.getDOMDetails({id:t,dsKeys:["admetadata"]});if(a&&Object.keys(a).forEach((function(t){e["md_".concat(t)]=a[t]})),a&&a.admetadata){var n=JSON.parse(a.admetadata);Object.keys(n).forEach((function(t){e["md_".concat(t)]=n[t]}))}e.cmd="",Object.keys(e).forEach((function(t){t.startsWith("md_")&&"md_admetadata"!=t&&(e.cmd.length&&(e.cmd+=i?"__":"&"),e.cmd+="".concat(t,"=").concat(e[t]))}))},generateGlobalMacrosList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object.assign(e,ot),ot.hasOwnProperty("globalMetaData")&&Object.keys(ot.globalMetaData).forEach((function(t){e["md_".concat(t)]=ot.globalMetaData[t]})),e.cmd="",Object.keys(e).forEach((function(i){i.startsWith("md_")&&"md_admetadata"!=i&&(e.cmd.length&&(e.cmd+=t?"__":"&"),e.cmd+="".concat(i,"=").concat(e[i]))}))},isBrandPageURL:function(e){var t=e.split("?")[1];if(t){var i=t.split("&"),a=null,n={};if(i.forEach((function(e){a=e.split("="),n[a[0]]=a[1]})),n.jiopopup)return!0}return!1},renderBrandPage:function(e,t){var i=document.createElement("div");i.setAttribute("id","modelframe"),i.className="modal modal-brand";var a=document.createElement("div");a.className="modal-content";var n=document.createElement("iframe");n.setAttribute("id","rndIframeId10000"),n.className="frame-content","de"==ot.platform&&n.classList.add("desktop"),n.src="https://mercury.akamaized.net/jioads/websdk/brand/cad.html";var r=document.createElement("div");r.className="modal-clickhandler",a.appendChild(n),i.appendChild(a),i.appendChild(r),document.body.appendChild(i),window.onclick=function(e){e.target==r&&(i.style.display="none",i.parentNode.removeChild(i)),"rndIframeId10000"==e.target.id&&(i.style.display="none",i.parentNode.removeChild(i))}},replaceMacrosValues:function(e,t){var i=e;for(var a in t){var n=t[a];if("cmd"==a&&n){var r=n.toString();i=(i=i.replace(/__\[cmd\]|__\{cmd\}/gi,"__"+r.replace(/&/g,"__"))).replace(/&\[cmd\]|&\{cmd\}/gi,"&"+r)}i=i.replace(/%5B/g,"[").replace(/%5D/g,"]").replace(new RegExp("(?:\\[|%%)(".concat(a,")(?:\\]|%%)"),"g"),n).replace(/\[trq\]|\{trq\}/gi,encodeURI((new Date).getTime()))}return i},generateCCB:function(e){return Q.crc32((Date.now()||(new Date).getTime())+":"+ot.appName+":"+e+":"+100*Math.random(10))},crc32:function(e){for(var t,i=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;i[a]=t}for(var r=-1,o=0;o<e.length;o++)r=r>>>8^i[255&(r^e.charCodeAt(o))];return(-1^r)>>>0},jsonParser:function(e){try{return"string"==typeof e?JSON.parse(e):e}catch(e){return{}}},pick:function(e,t){return e=Object(e),t.reduce((function(t,i){return i in e&&(t[i]=e[i]),t}),{})},overlayInviewDetect:function(e){if(ot.overlayInview){var t=e.getBoundingClientRect(),i=(t.left+t.right)/2,a=(t.top+t.bottom)/2,n=document.elementFromPoint(i,a);return n&&(n==e||n.contains(e)||e.contains(n)||n.offsetParent==e.offsetParent||n.offsetParent&&n.offsetParent.parentElement&&n.offsetParent.parentElement.contains(e)||n.offsetParent&&n.offsetParent.contains(e)||e.offsetParent&&e.offsetParent.contains(n))?(bt.log("element view not overlayed by any other element"),!0):(bt.log("element view overlayed by any other element"),!1)}return!0},isEventExist:function(e){try{return!!x.all.hasOwnProperty(e)}catch(e){return bt.error("something went worng, ".concat(e)),!1}},isContainsAll:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=e.hasOwnProperty("productDetails")&&e.productDetails.hasOwnProperty("productList")&&Object.keys(e.productDetails.productList).length&&e.productDetails.productList||[],a=0;a<i.length;a++){var n=["id","vertical","price","segment","brickname","sku","quantity"];7!=e.eventId&&17!=e.eventId&&18!=e.eventId||(n=["id","price","sku","quantity"]);for(var r=0,o=n;r<o.length;r++){var s=o[r];if(null==Q.ensureExists(i[a],s))return!1}}for(var c=e.hasOwnProperty("customerDetails")&&e.customerDetails||[],d=0;d<c.length;d++)for(var l=0,u=["type"];l<u.length;l++){var h=u[l];if(null==Q.ensureExists(c[d],h))return!1}var p,m=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return W(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(t);try{for(m.s();!(p=m.n()).done;){var f=p.value;if(null==Q.ensureExists(e,f))return!1}}catch(e){m.e(e)}finally{m.f()}return!0},ensureExists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return Q.ensureExists(e,t.split(".").map(Q.getKey),i||"",!1);var n=t[0],r=Q.getShallowProperty(e,n);return 1===t.length?(void 0!==r&&null!=r||a||(e[n]=i),r):(void 0===r&&("number"==typeof t[1]?e[n]=[]:e[n]={}),Q.ensureExists(e[n],t.slice(1),i,a))},getShallowProperty:function(e,t){if(Q.hasShallowProperty(e,t))return e[t]},hasShallowProperty:function(e,t){return"number"==typeof t&&Array.isArray(e)||Q.hasOwnProperty(e,t)},getKey:function(e){var t=parseInt(e);return t.toString()===e?t:e},hasOwnProperty:function(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)},getTMS:function(){return(new Date).toISOString().replace(/.{0,1}$/,"+0000")},isfirstLaunchExist:function(){return null==localStorage.getItem("firstLaunch")?(localStorage.setItem("firstLaunch",0),1):0},stringToHTML:function(e){return(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("DIV")[0]},setTimeBasedOnUnits:function(e,t){var i=new Date;switch(e){case"d":return i.setHours(i.getHours()+24*t);case"h":return i.setHours(i.getHours()+t);case"m":return i.setMinutes(i.getMinutes()+t);case"s":return i.setSeconds(i.getSeconds()+t)}},modalHead:function(e){return'<div class="jads-modal jads-d-flex-aj-center">\n  <div class="jads-interstitial">\n    <div class="jads-d-flex-aj-center jads-height-inher">\n        <div class="jads-d-flex jads-f-j-right jads-cta-box jads-cta-top jads-p-10">\n          <a class="jads-icon jads-skip-close-event jads-d-none jads-icon-close '.concat(e,'"></a>\n        </div>')},topIntersCTA:function(e,t,i,a){return'<div class="jads-d-flex jads-f-j-right jads-cta-box jads-top-25 jads-p-10 jads-cta-selector">\n                            <a href="javascript:;" class="jads-btn jads-cta-event jads-d-none '.concat(e," ").concat(t?"":"jads-pe-n",'" ').concat(i,">").concat(a||"Visit Advertiser","</a>\n                </div>")},playerControls:function(e,t,i){return'<div class="jads-cta-box jads-cta-bottom jads-d-flex jads-bg-grey" style="margin-bottom:'.concat(arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,'%">\n  <div class="jads-d-flex jads-f-a-center jads-p-10"> \n    <a class="jads-icon jads-icon-play jads-icon-pause ').concat(e,'"></a>\n  </div>\n  <div class="jads-d-flex jads-flex-fill jads-f-a-center jads-f-j-left jads-p-10">\n    <span class="').concat(t,'">00:00</span>\n  </div>\n  <div class="jads-d-flex jads-f-a-center jads-f-j-right jads-p-10">\n      <a href="javascript:;" class="jads-icon jads-icon-mute ').concat(ot.initialUnMute?"":"jads-icon-unmute"," ").concat(i,'"></a>\n  </div>\n</div>')},isOmSDKAvailable:function(){var e;try{e=OmidSessionClient&&OmidSessionClient.default}catch(e){return!1}return!!e},setOMSDKParamater:function(e,t){var i=e.version,a=e.ads[0].adVerifications||[],n=e.ads[0].extensions||[];if(0==n.length&&0==a.length)return{};t.OMSDKParms={CONTENT_URL:window.location.href.split(/[?#]/)[0],OMSDK_URL:"https://mercury.akamaized.net/jioads/om/web/omweb-v1.js",SESSION_CLIENT_URL:"https://mercury.akamaized.net/jioads/om/web/omid-session-client-v1.js"};try{return i>=4?(t.OMSDKParms.VENDOR_KEY=a[0].parameters,t.OMSDKParms.VERIFICATION_PARAMETERS=a[0].parameters,t.OMSDKParms.VERIFICATION_SCRIPT_URL=a[0].resource,t.isOMEnable=!0):n.map((function(e,i){if("AdVerifications"==e.attributes.type)return t.isOMEnable=!0,t.OMSDKParms.VENDOR_KEY=e.children[0].children[0].attributes.vendor,e.children[0].children[0].children.map((function(e){e.value&&("VerificationParameters"==e.name?t.OMSDKParms.VERIFICATION_PARAMETERS=e.value:"JavaScriptResource"==e.name&&(t.OMSDKParms.VERIFICATION_SCRIPT_URL=e.value))}));i==n.length&&(t.OMSDKParms={})})),t.OMSDKParms}catch(e){return{}}},injectSessionClientScriptTag_:function(){var e=document.createElement("script");return e.type="text/javascript",e},OMSDKInit:function(e){if(Q.isOmSDKAvailable()){var t=new J(e.jioAdsMediaPlayer.player,e.OMSDKParms,!0);e.jioAdsMediaPlayer.OmsdkManager=t,e.jioAdsMediaPlayer.play()}else e.script=Q.injectSessionClientScriptTag_(),e.script.addEventListener("load",(function(){var t=new J(e.jioAdsMediaPlayer.player,e.OMSDKParms,!1);e.jioAdsMediaPlayer.OmsdkManager=t,e.jioAdsMediaPlayer.play()})),e.script.setAttribute("src",e.OMSDKParms.OMSDK_URL),document.body.appendChild(e.script)},getRefresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>=30?e<30?30:e:0==e||e>0&&e<30?t<=1e3&&t>=30?t:t>=0&&t<30||t<0?30:-1:-1}};const Z=Q;var X={impression:function(e){var t=e.id,i=e.URL,a=e.domElement,n=e.ccb,r=e.isClick,o=void 0===r||r,s=e.adsize,c=e.seq,d=void 0===c?0:c,l=e.frt,u=a?document.body:document.getElementById(t),h=document.createElement("iframe"),p=a?t+"_"+100*Math.random(10):100*Math.random(10);h.id=p,h.style="width: 0px; height: 0px; border: 0;";var m=[];if(i.length>0){for(var f in i){var g=i[f],y={bz:t?ot.adObject[t].adSize:s,ccb:n,seq:d,frt:l};Z.generateMacrosList(y,t,o&&a),g=Z.replaceMacrosValues(g,y,o),m.push('<img src="'+g+'" width="1" height="1" border="0">')}u.insertBefore(h,null);var v=document.getElementById(p).contentWindow.document;v.open(),v.write("<body>"+m.join("")+"</body>"),v.close()}},cleanDocument:function(e){var t=document.querySelectorAll("[id^="+e+"_]");t.length&&Array.prototype.forEach.call(t,(function(e){e.parentNode.removeChild(e)}))}};const $=X,ee=function(e){if(ot.AdManager.hasOwnProperty(e)){ot.adObject.hasOwnProperty(e)&&5==ot.adObject[e].type&&ot.adObject[e].getVideoContainer()&&(ot.adObject[e].getVideoContainer().innerHTML="");try{ot.adObject[e].destroy()}catch(e){}delete ot.AdManager[e],delete ot.adObject[e]}ot.ViewStreams.hasOwnProperty(e)&&delete ot.ViewStreams[e]};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}var ie={STORAGE:new l,setValue:function(e,t,i){var a=Array.isArray(e)?e:e.split(".");return a.length>1?(i.hasOwnProperty(a[0])&&"object"===te(i[a[0]])||(i[a[0]]={}),this.setValue(a.slice(1),t,i[a[0]])):(i[a[0]]=t,!0)},addCampaign:function(e,t){var i=ie.STORAGE.getItem("campaignList","local")||{},a=ie.STORAGE.getItem("serverExpiryTime","local")||{},n=new Date,r=t.i,o=t.c,s=t.cv,c=parseInt(t.expiry)||30,d=e;this.setCounter=function(e,t){e&&e.hasOwnProperty("m")&&this.setValue(d+"."+t+".m",null,i),e&&e.hasOwnProperty("h")&&this.setValue(d+"."+t+".h",null,i),e&&e.hasOwnProperty("d")&&this.setValue(d+"."+t+".d",null,i),e&&e.hasOwnProperty("l")&&this.setValue(d+"."+t+".l",null,i)},i.hasOwnProperty(d)?(i[d].i.hash!==JSON.stringify(r)&&(delete i[d].i,this.setCounter(r,"i"),a["c_"+d]=t),i[d].c.hash!==JSON.stringify(o)&&(delete i[d].c,this.setCounter(o,"c"),a["c_"+d]=t),i[d].cv.hash!==JSON.stringify(s)&&(delete i[d].cv,this.setCounter(o,"cv"),a["c_"+d]=t)):(this.setCounter(r,"i"),this.setCounter(o,"c"),this.setCounter(s,"cv")),a["c_"+d]=t,this.setValue(d+".i.hash",JSON.stringify(r),i),this.setValue(d+".c.hash",JSON.stringify(o),i),this.setValue(d+".cv.hash",JSON.stringify(s),i),this.setValue(d+".expireTime",n.setDate(n.getDate()+c)-(60*n.getHours()*60*1e3+60*n.getMinutes()*1e3+1e3*n.getSeconds()),i),ie.STORAGE.setItem("campaignList",i,"local"),ie.STORAGE.setItem("serverExpiryTime",a,"local"),bt.log("FCAP Campaign Expiry Time :  ".concat(new Date(i[d].expireTime)))},cleanUp:function(e){this.id=e&&e.id?e.id:"",this.type=e&&e.type?e.type:"",this.campaignList=ie.STORAGE.getItem("campaignList","local")||{},this.localStorageServerExpiryTime=ie.STORAGE.getItem("serverExpiryTime","local"),this.get=function(){return this.validate(""!==this.type?this.campaignList[this.id]:""==this.id?this.campaignList:Z.pick(this.campaignList,[this.id]))},this.storeAndReturn=function(){return!this.id&&!this.type&&(this.campaignList=this.get(),ie.STORAGE.setItem("campaignList",this.campaignList,"local"),this.campaignList)},this.validate=function(t){var i=Date.hasOwnProperty("now")?Date.now():(new Date).getTime(),a=null,n=JSON.parse(sessionStorage.getItem("ignoreCampaignList"))||[],r=this.campaignList.hasOwnProperty(this.id)&&this.campaignList[this.id].hasOwnProperty(this.type)&&this.campaignList[this.id][this.type].hasOwnProperty("expireTime"),o=t;if(e&&this.id&&this.type&&!r)return o;if(""!==this.type)for(var s in o[this.type])i>o[this.type].expireTime[s]&&(o[this.type][s]=0,delete o[this.type].expireTime[s]);else for(var c in o){for(var d in o[c])if(d.match(/^(i|c|cv)$/))for(var l in o[c][d])o[c][d].hasOwnProperty("expireTime")&&l.match(/^(m|h|d)$/)&&i>o[c][d].expireTime[l]&&(o[c][d][l]=0,n.splice(n.indexOf(c),1),sessionStorage.setItem("ignoreCampaignList",JSON.stringify(n)),delete o[c][d].expireTime[l]),l.match(/^(m|h|d|l)$/)&&"number"==typeof o[c][d][l]&&(a+=o[c][d][l]);(i>o[c].expireTime||0===a)&&(delete o[c],delete this.localStorageServerExpiryTime["c_"+c],ie.STORAGE.setItem("serverExpiryTime",this.localStorageServerExpiryTime,"local"))}return o}},incrementCounter:function(e){if(this.setExpiryTime=function(e){if(e){var t=e,i={};if(t&&t.hasOwnProperty("m")){var a=new Date;i.m=a.setMinutes(a.getMinutes()+parseInt(t.m))}if(t&&t.hasOwnProperty("h")){var n=new Date;i.h=n.setHours(n.getHours()+parseInt(t.h))}if(t&&t.hasOwnProperty("d")){var r=new Date;i.d=r.setDate(r.getDate()+parseInt(t.d))}return i}},this.setExpiryTimeByType=function(e){var r=a["c_"+n]?a["c_"+n][t]:null;if(r){var o=function(e,t,i){var a;return a=function(e,t){if("object"!=te(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=te(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==te(a)?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({},e,r[e]);if(null!=o[e]||null!=o[e]){var s=this.setExpiryTime(o)[e];this.setValue(n+"."+t+".expireTime."+e,s,i)}}},this.print=function(){for(var e in bt.log("FCAP Cuurent Time :  ".concat(new Date)),i[n][t].expireTime)bt.debug("FCAP for ".concat(t.repeat(3).toUpperCase()," :=: ").concat(e.toUpperCase()," : ").concat(new Date(i[n][t].expireTime[e])));bt.log("campaignList "+JSON.stringify(i))},e){var t=e.type,i=ie.STORAGE.getItem("campaignList","local"),a=ie.STORAGE.getItem("serverExpiryTime","local"),n=e.campaignId;if(i[n]=new this.cleanUp({id:n,type:t}).get(),i[n][t].hasOwnProperty("expireTime")){var r=i[n][t].expireTime;r.hasOwnProperty("m")||this.setExpiryTimeByType("m"),r.hasOwnProperty("h")||this.setExpiryTimeByType("h"),r.hasOwnProperty("d")||this.setExpiryTimeByType("d")}else{var o=a["c_"+n]?a["c_"+n][t]:null;o&&(i[n][t].expireTime=this.setExpiryTime(o))}for(var s in this.print(),i[n][t])s.match(/^(m|h|d|l)$/)&&(i[n][t][s]+=1);ie.STORAGE.setItem("campaignList",i,"local")}},getCampaignList:function(){var e=this.clean();for(var t in e)e[t].hasOwnProperty("i")&&(e[t].i.hasOwnProperty("expireTime")&&delete e[t].i.expireTime,e[t].i.hasOwnProperty("hash")&&delete e[t].i.hash),e[t].hasOwnProperty("c")&&(e[t].c.hasOwnProperty("expireTime")&&delete e[t].c.expireTime,e[t].c.hasOwnProperty("hash")&&delete e[t].c.hash),e[t].hasOwnProperty("cv")&&(e[t].cv.hasOwnProperty("expireTime")&&delete e[t].cv.expireTime,e[t].cv.hasOwnProperty("hash")&&delete e[t].cv.hash),e[t].hasOwnProperty("expireTime")&&delete e[t].expireTime;return e},isFrequencyCapped:function(e){var t=e.selectedCampaign,i=e.limit,a=new this.cleanUp({id:t}).get()[t]||{},n=JSON.parse(sessionStorage.getItem("ignoreCampaignList"))||[],r={limit:i,i:a.i||{},c:a.c||{},cv:a.cv||{}},o=!1;for(var s in r.limit){var c=r[s].hasOwnProperty("m")&&r[s].m,d=r[s].hasOwnProperty("d")&&r[s].d,l=r[s].hasOwnProperty("h")&&r[s].h,u=r[s].hasOwnProperty("l")&&r[s].l;if(r.limit[s].hasOwnProperty("l")&&r.limit[s].l<=u){o=!0,bt.log("FCAP limit reached for "+s+" of type L");break}if(r.limit[s].hasOwnProperty("m")&&r.limit[s].m<=c){bt.log("FCAP limit reached for "+s+" of type M"),o=!0;break}if(r.limit[s].hasOwnProperty("h")&&r.limit[s].h<=l){o=!0,bt.log("FCAP limit reached for "+s+" of type H");break}if(r.limit[s].hasOwnProperty("d")&&r.limit[s].d<=d){o=!0,bt.log("FCAP limit reached for "+s+" of type D");break}}return o&&(n.push(t),sessionStorage.setItem("ignoreCampaignList",JSON.stringify(n))),o},getIgnoreCampaignList:function(){return this.clean(),JSON.parse(sessionStorage.getItem("ignoreCampaignList"))||[]},init:function(e){if(e){var t=e.pId,i=e.type,a=e.campaignId,n=void 0!==a&&a,r=At.getElement(t);(n||r&&r.hasAttribute("data-fcap"))&&this.incrementCounter({campaignId:n||r.getAttribute("data-fcap"),type:i})}},clean:function(){return(new ie.cleanUp).storeAndReturn()}};const ae=ie,ne={m105:"Internet is not available",m108:"Network Error",m109:"Mandatory params missing",m110:"Ad rendition error",m111:"Parsing error",m112:"cacheAd failed",m113:"Error while downloading ad",m120:"Error while fetching advid or uid",m121:"AdPod Timeout error",m123:"Player preparation failed",m136:"Invalid Ad Request Parameters",m101:"Error while fetching advid",m102:"Error while fetching UID",m103:"Error fetching vast meta data",m138:"Error during CTA click",m140:"Not able to render backup ad",m141:"JS Exception during targeting",m143:"LoadAd failed",m104:"No Fill",m106:"Timeout while fetching ad",m107:"Wrong UX type",m114:"Ad spot doesn't exist",m115:"AD request not allowed",m116:"Adspot is not linked to application",m117:"Request from Invalid/restricted origin",m118:"UA is Invalid/doesn't exist",m119:"OS is Invalid/doesn't exist",m122:"Restricted api, please contact your account manager for more details",m124:"User daily impression limit reached",m125:"user lifetime impression limit reached",m126:"user click daily limit reached",m127:"user click lifetime limit reached",m128:"user completed view daily limit reached",m129:"user completed view lifetime limit reached",m130:"user minute wise impression limit reached",m131:"user hourly impression limit reached",m132:"user click minute wise limit reached",m133:"user click hourly limit reached",m134:"user completed view minute wise limit reached",m135:"user completed view hourly limit reached",m137:"Master Config Download failed",m139:"Mediation Error",s101:"Stream view url cannot be empty",s105:"Malformed URL Observed",s109:"IOException while network call",s112:"Vast Parsing Error",s113:"Manifest Parsing Error",s114:"Cohort Group ID Failure"};function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}const oe=function(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r="https://mercury.akamaized.net/web/".concat(ot.ai,"/err.gif?"),o=ne[t]?ne[t]:"",s=new Date,c=s.getFullYear()+"-"+("00"+s.getDate()).slice(-2)+"-"+("00"+(s.getMonth()+1)).slice(-2)+" "+("00"+s.getHours()).slice(-2)+":"+("00"+s.getMinutes()).slice(-2)+":"+("00"+s.getSeconds()).slice(-2);console.log(c);var d=i;"object"===re(d)&&(d=JSON.stringify(d));var l,u=t,h=a;l="".concat(r,"mth=").concat(h,"&uid=").concat(ot.uid,"&des=").concat(d,"&package=").concat(ot.ai,"&code=").concat(u,"&pt=").concat(ot.platform,"&adspot=").concat(e||"","&advid=").concat(ot.ifa,"&title=").concat(o,"&ts=").concat(c,"&dvm=web&av=").concat(ot.av,"&vr=").concat(ot.vr,"&dvb=web&osv=").concat(ot.osv,"&viewUrl=").concat(n);var p=new XMLHttpRequest;p.open("GET",l,!0),p.send()},se=function(e,t,i,a,n){for(var r=0;r<e.length;r++){var o,s=e[r],c={asi:t,a:ot.ai,adreqs:i?1:0,adres:a?1:0,fs:n?1:0};o=Z.replaceMacrosValues(s,c,!1);var d=new XMLHttpRequest;d.open("GET",o,!0),d.send()}};function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function de(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,le(a.key),a)}}function le(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=ce(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}const ue=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"isPortrait",value:function(){return!!window.matchMedia("(orientation: portrait)").matches}},{key:"isFullScreenMode",value:function(){return!(!this.isPortrait()||240!=window.innerWidth||320!=window.innerHeight)||!this.isPortrait()&&320==window.innerWidth&&240==window.innerHeight}},{key:"registerOnOrientationChange",value:function(e){window.addEventListener("orientationchange",(function(t){e(screen.orientation.angle)}),!1)}}])&&de(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),he={AF:"Afrikaans","AF-NA":"Afrikaans","AF-ZA":"Afrikaans",AGQ:"Aghem","AGQ-CM":"Aghem",AK:"Akan","AK-GH":"Akan",AM:"Amharic","AM-ET":"Amharic",AR:"Arabic",ARS:"ars","AR-001":"Arabic","AR-AE":"Arabic","AR-BH":"Arabic","AR-DJ":"Arabic","AR-DZ":"Arabic","AR-EG":"Arabic","AR-EH":"Arabic","AR-ER":"Arabic","AR-IL":"Arabic","AR-IQ":"Arabic","AR-JO":"Arabic","AR-KM":"Arabic","AR-KW":"Arabic","AR-LB":"Arabic","AR-LY":"Arabic","AR-MA":"Arabic","AR-MR":"Arabic","AR-OM":"Arabic","AR-PS":"Arabic","AR-QA":"Arabic","AR-SA":"Arabic","AR-SD":"Arabic","AR-SO":"Arabic","AR-SS":"Arabic","AR-SY":"Arabic","AR-TD":"Arabic","AR-TN":"Arabic","AR-YE":"Arabic",AS:"Assamese",ASA:"Asu","ASA-TZ":"Asu",AST:"Asturian","AST-ES":"Asturian","AS-IN":"Assamese",AZ:"Azerbaijani","AZ-CYRL":"Azerbaijani","AZ-CYRL-AZ":"Azerbaijani","AZ-LATN":"Azerbaijani","AZ-LATN-AZ":"Azerbaijani",BAS:"Basaa","BAS-CM":"Basaa",BE:"Belarusian",BEM:"Bemba","BEM-ZM":"Bemba",BEZ:"Bena","BEZ-TZ":"Bena","BE-BY":"Belarusian",BG:"Bulgarian","BG-BG":"Bulgarian",BM:"Bambara","BM-ML":"Bambara",BN:"Bengali","BN-BD":"Bengali","BN-IN":"Bengali",BO:"Tibetan","BO-CN":"Tibetan","BO-IN":"Tibetan",BR:"Breton",BRX:"Bodo","BRX-IN":"Bodo","BR-FR":"Breton",BS:"Bosnian","BS-CYRL":"Bosnian","BS-CYRL-BA":"Bosnian","BS-LATN":"Bosnian","BS-LATN-BA":"Bosnian",CA:"Catalan","CA-AD":"Catalan","CA-ES":"Catalan","CA-FR":"Catalan","CA-IT":"Catalan",CE:"Chechen","CE-RU":"Chechen",CGG:"Chiga","CGG-UG":"Chiga",CHR:"Cherokee","CHR-US":"Cherokee",CKB:"Sorani Kurdish","CKB-IQ":"Sorani Kurdish","CKB-IR":"Sorani Kurdish",CS:"Czech","CS-CZ":"Czech",CY:"Welsh","CY-GB":"Welsh",DA:"Danish",DAV:"Taita","DAV-KE":"Taita","DA-DK":"Danish","DA-GL":"Danish",DE:"German","DE-AT":"German","DE-BE":"German","DE-CH":"German","DE-DE":"German","DE-LI":"German","DE-LU":"German",DJE:"Zarma","DJE-NE":"Zarma",DSB:"Lower Sorbian","DSB-DE":"Lower Sorbian",DUA:"Duala","DUA-CM":"Duala",DYO:"Jola-Fonyi","DYO-SN":"Jola-Fonyi",DZ:"Dzongkha","DZ-BT":"Dzongkha",EBU:"Embu","EBU-KE":"Embu",EE:"Ewe","EE-GH":"Ewe","EE-TG":"Ewe",EL:"Greek","EL-CY":"Greek","EL-GR":"Greek",EN:"English","EN-001":"English","EN-150":"English","EN-AD":"English","EN-AG":"English","EN-AI":"English","EN-AL":"English","EN-AS":"English","EN-AT":"English","EN-AU":"English","EN-BA":"English","EN-BB":"English","EN-BE":"English","EN-BI":"English","EN-BM":"English","EN-BR":"English","EN-BS":"English","EN-BW":"English","EN-BZ":"English","EN-CA":"English","EN-CC":"English","EN-CH":"English","EN-CK":"English","EN-CM":"English","EN-CN":"English","EN-CX":"English","EN-CY":"English","EN-CZ":"English","EN-DE":"English","EN-DG":"English","EN-DK":"English","EN-DM":"English","EN-EE":"English","EN-ER":"English","EN-ES":"English","EN-FI":"English","EN-FJ":"English","EN-FK":"English","EN-FM":"English","EN-FR":"English","EN-GB":"English","EN-GD":"English","EN-GG":"English","EN-GH":"English","EN-GI":"English","EN-GM":"English","EN-GR":"English","EN-GU":"English","EN-GY":"English","EN-HK":"English","EN-HR":"English","EN-HU":"English","EN-IE":"English","EN-IL":"English","EN-IM":"English","EN-IN":"English","EN-IO":"English","EN-IS":"English","EN-IT":"English","EN-JE":"English","EN-JM":"English","EN-JP":"English","EN-KE":"English","EN-KI":"English","EN-KN":"English","EN-KR":"English","EN-KY":"English","EN-LC":"English","EN-LR":"English","EN-LS":"English","EN-LT":"English","EN-LU":"English","EN-LV":"English","EN-ME":"English","EN-MG":"English","EN-MH":"English","EN-MO":"English","EN-MP":"English","EN-MS":"English","EN-MT":"English","EN-MU":"English","EN-MV":"English","EN-MW":"English","EN-MY":"English","EN-NA":"English","EN-NF":"English","EN-NG":"English","EN-NL":"English","EN-NO":"English","EN-NR":"English","EN-NU":"English","EN-NZ":"English","EN-PG":"English","EN-PH":"English","EN-PK":"English","EN-PL":"English","EN-PN":"English","EN-PR":"English","EN-PT":"English","EN-PW":"English","EN-RO":"English","EN-RU":"English","EN-RW":"English","EN-SB":"English","EN-SC":"English","EN-SD":"English","EN-SE":"English","EN-SG":"English","EN-SH":"English","EN-SI":"English","EN-SK":"English","EN-SL":"English","EN-SS":"English","EN-SX":"English","EN-SZ":"English","EN-TC":"English","EN-TK":"English","EN-TO":"English","EN-TR":"English","EN-TT":"English","EN-TV":"English","EN-TW":"English","EN-TZ":"English","EN-UG":"English","EN-UM":"English","EN-US":"English","EN-US-POSIX":"English","EN-VC":"English","EN-VG":"English","EN-VI":"English","EN-VU":"English","EN-WS":"English","EN-ZA":"English","EN-ZM":"English","EN-ZW":"English",EO:"Esperanto",ES:"Spanish","ES-419":"Spanish","ES-AR":"Spanish","ES-BO":"Spanish","ES-BZ":"Spanish","ES-CL":"Spanish","ES-CO":"Spanish","ES-CR":"Spanish","ES-CU":"Spanish","ES-DO":"Spanish","ES-EA":"Spanish","ES-EC":"Spanish","ES-ES":"Spanish","ES-GQ":"Spanish","ES-GT":"Spanish","ES-HN":"Spanish","ES-IC":"Spanish","ES-MX":"Spanish","ES-NI":"Spanish","ES-PA":"Spanish","ES-PE":"Spanish","ES-PH":"Spanish","ES-PR":"Spanish","ES-PY":"Spanish","ES-SV":"Spanish","ES-US":"Spanish","ES-UY":"Spanish","ES-VE":"Spanish",ET:"Estonian","ET-EE":"Estonian",EU:"Basque","EU-ES":"Basque",EWO:"Ewondo","EWO-CM":"Ewondo",FA:"Persian","FA-AF":"Persian","FA-IR":"Persian",FF:"Fulah","FF-CM":"Fulah","FF-GN":"Fulah","FF-MR":"Fulah","FF-SN":"Fulah",FI:"Finnish",FIL:"Filipino","FIL-PH":"Filipino","FI-FI":"Finnish",FO:"Faroese","FO-DK":"Faroese","FO-FO":"Faroese",FR:"French","FR-BE":"French","FR-BF":"French","FR-BI":"French","FR-BJ":"French","FR-BL":"French","FR-CA":"French","FR-CD":"French","FR-CF":"French","FR-CG":"French","FR-CH":"French","FR-CI":"French","FR-CM":"French","FR-DJ":"French","FR-DZ":"French","FR-FR":"French","FR-GA":"French","FR-GF":"French","FR-GN":"French","FR-GP":"French","FR-GQ":"French","FR-HT":"French","FR-KM":"French","FR-LU":"French","FR-MA":"French","FR-MC":"French","FR-MF":"French","FR-MG":"French","FR-ML":"French","FR-MQ":"French","FR-MR":"French","FR-MU":"French","FR-NC":"French","FR-NE":"French","FR-PF":"French","FR-PM":"French","FR-RE":"French","FR-RW":"French","FR-SC":"French","FR-SN":"French","FR-SY":"French","FR-TD":"French","FR-TG":"French","FR-TN":"French","FR-VU":"French","FR-WF":"French","FR-YT":"French",FUR:"Friulian","FUR-IT":"Friulian",FY:"Western Frisian","FY-NL":"Western Frisian",GA:"Irish","GA-IE":"Irish",GD:"Scottish Gaelic","GD-GB":"Scottish Gaelic",GL:"Galician","GL-ES":"Galician",GSW:"Swiss German","GSW-CH":"Swiss German","GSW-FR":"Swiss German","GSW-LI":"Swiss German",GU:"Gujarati",GUZ:"Gusii","GUZ-KE":"Gusii","GU-IN":"Gujarati",GV:"Manx","GV-IM":"Manx",HA:"Hausa",HAW:"Hawaiian","HAW-US":"Hawaiian","HA-GH":"Hausa","HA-NE":"Hausa","HA-NG":"Hausa",HE:"Hebrew","HE-IL":"Hebrew",HI:"Hindi","HI-IN":"Hindi",HR:"Croatian","HR-BA":"Croatian","HR-HR":"Croatian",HSB:"Upper Sorbian","HSB-DE":"Upper Sorbian",HU:"Hungarian","HU-HU":"Hungarian",HY:"Armenian","HY-AM":"Armenian",ID:"Indonesian","ID-ID":"Indonesian",IG:"Igbo","IG-NG":"Igbo",II:"Sichuan Yi","II-CN":"Sichuan Yi",IS:"Icelandic","IS-IS":"Icelandic",IT:"Italian","IT-CH":"Italian","IT-IT":"Italian","IT-SM":"Italian",IU:"Inuktitut","IU-CA":"Inuktitut",JA:"Japanese","JA-JP":"Japanese",JGO:"Ngomba","JGO-CM":"Ngomba",JMC:"Machame","JMC-TZ":"Machame",KA:"Georgian",KAB:"Kabyle","KAB-DZ":"Kabyle",KAM:"Kamba","KAM-KE":"Kamba","KA-GE":"Georgian",KDE:"Makonde","KDE-TZ":"Makonde",KEA:"Kabuverdianu","KEA-CV":"Kabuverdianu",KHQ:"Koyra Chiini","KHQ-ML":"Koyra Chiini",KI:"Kikuyu","KI-KE":"Kikuyu",KK:"Kazakh",KKJ:"Kako","KKJ-CM":"Kako","KK-KZ":"Kazakh",KL:"Kalaallisut",KLN:"Kalenjin","KLN-KE":"Kalenjin","KL-GL":"Kalaallisut",KM:"Khmer","KM-KH":"Khmer",KN:"Kannada","KN-IN":"Kannada",KO:"Korean",KOK:"Konkani","KOK-IN":"Konkani","KO-KP":"Korean","KO-KR":"Korean",KS:"Kashmiri",KSB:"Shambala","KSB-TZ":"Shambala",KSF:"Bafia","KSF-CM":"Bafia",KSH:"Colognian","KSH-DE":"Colognian","KS-IN":"Kashmiri",KW:"Cornish","KW-GB":"Cornish",KY:"Kirghiz","KY-KG":"Kirghiz",LAG:"Langi","LAG-TZ":"Langi",LB:"Luxembourgish","LB-LU":"Luxembourgish",LG:"Ganda","LG-UG":"Ganda",LKT:"lkt","LKT-US":"lkt",LN:"Lingala","LN-AO":"Lingala","LN-CD":"Lingala","LN-CF":"Lingala","LN-CG":"Lingala",LO:"Lao","LO-LA":"Lao",LRC:"lrc","LRC-IQ":"lrc","LRC-IR":"lrc",LT:"Lithuanian","LT-LT":"Lithuanian",LU:"Luba-Katanga",LUO:"Luo","LUO-KE":"Luo",LUY:"Luyia","LUY-KE":"Luyia","LU-CD":"Luba-Katanga",LV:"Latvian","LV-LV":"Latvian",MAS:"Masai","MAS-KE":"Masai","MAS-TZ":"Masai",MER:"Meru","MER-KE":"Meru",MFE:"Morisyen","MFE-MU":"Morisyen",MG:"Malagasy",MGH:"Makhuwa-Meetto","MGH-MZ":"Makhuwa-Meetto",MGO:"Meta","MGO-CM":"Meta","MG-MG":"Malagasy",MK:"Macedonian","MK-MK":"Macedonian",ML:"Malayalam","ML-IN":"Malayalam",MN:"Mongolian","MN-MN":"Mongolian",MR:"Marathi","MR-IN":"Marathi",MS:"Malay","MS-ARAB":"Malay","MS-ARAB-BN":"Malay","MS-ARAB-MY":"Malay","MS-BN":"Malay","MS-MY":"Malay","MS-SG":"Malay",MT:"Maltese","MT-MT":"Maltese",MUA:"Mundang","MUA-CM":"Mundang",MY:"Burmese","MY-MM":"Burmese",MZN:"mzn","MZN-IR":"mzn",NAQ:"Nama","NAQ-NA":"Nama",NB:"Norwegian Bokml","NB-NO":"Norwegian Bokml","NB-SJ":"Norwegian Bokml",ND:"North Ndebele","ND-ZW":"North Ndebele",NE:"Nepali","NE-IN":"Nepali","NE-NP":"Nepali",NL:"Dutch","NL-AW":"Dutch","NL-BE":"Dutch","NL-BQ":"Dutch","NL-CW":"Dutch","NL-NL":"Dutch","NL-SR":"Dutch","NL-SX":"Dutch",NMG:"Kwasio","NMG-CM":"Kwasio",NN:"Norwegian Nynorsk",NNH:"Ngiemboon","NNH-CM":"Ngiemboon","NN-NO":"Norwegian Nynorsk",NUS:"Nuer","NUS-SS":"Nuer",NYN:"Nyankole","NYN-UG":"Nyankole",OM:"Oromo","OM-ET":"Oromo","OM-KE":"Oromo",OR:"Oriya","OR-IN":"Oriya",OS:"Ossetic","OS-GE":"Ossetic","OS-RU":"Ossetic",PA:"Punjabi","PA-ARAB":"Punjabi","PA-ARAB-PK":"Punjabi","PA-GURU":"Punjabi","PA-GURU-IN":"Punjabi",PL:"Polish","PL-PL":"Polish",PS:"Pashto","PS-AF":"Pashto",PT:"Portuguese","PT-AO":"Portuguese","PT-BR":"Portuguese","PT-CV":"Portuguese","PT-GW":"Portuguese","PT-MO":"Portuguese","PT-MZ":"Portuguese","PT-PT":"Portuguese","PT-ST":"Portuguese","PT-TL":"Portuguese",QU:"Quechua","QU-BO":"Quechua","QU-EC":"Quechua","QU-PE":"Quechua",RM:"Romansh","RM-CH":"Romansh",RN:"Rundi","RN-BI":"Rundi",RO:"Romanian",ROF:"Rombo","ROF-TZ":"Rombo","RO-MD":"Romanian","RO-RO":"Romanian",RU:"Russian","RU-BY":"Russian","RU-KG":"Russian","RU-KZ":"Russian","RU-MD":"Russian","RU-RU":"Russian","RU-UA":"Russian",RW:"Kinyarwanda",RWK:"Rwa","RWK-TZ":"Rwa","RW-RW":"Kinyarwanda",SAH:"Sakha","SAH-RU":"Sakha",SAQ:"Samburu","SAQ-KE":"Samburu",SBP:"Sangu","SBP-TZ":"Sangu",SE:"Northern Sami",SEH:"Sena","SEH-MZ":"Sena",SES:"Koyraboro Senni","SES-ML":"Koyraboro Senni","SE-FI":"Northern Sami","SE-NO":"Northern Sami","SE-SE":"Northern Sami",SG:"Sango","SG-CF":"Sango",SHI:"Tachelhit","SHI-LATN":"Tachelhit","SHI-LATN-MA":"Tachelhit","SHI-TFNG":"Tachelhit","SHI-TFNG-MA":"Tachelhit",SI:"Sinhala","SI-LK":"Sinhala",SK:"Slovak","SK-SK":"Slovak",SL:"Slovenian","SL-SI":"Slovenian",SMN:"Inari Sami","SMN-FI":"Inari Sami",SN:"Shona","SN-ZW":"Shona",SO:"Somali","SO-DJ":"Somali","SO-ET":"Somali","SO-KE":"Somali","SO-SO":"Somali",SQ:"Albanian","SQ-AL":"Albanian","SQ-MK":"Albanian","SQ-XK":"Albanian",SR:"Serbian","SR-CYRL":"Serbian","SR-CYRL-BA":"Serbian","SR-CYRL-ME":"Serbian","SR-CYRL-RS":"Serbian","SR-CYRL-XK":"Serbian","SR-LATN":"Serbian","SR-LATN-BA":"Serbian","SR-LATN-ME":"Serbian","SR-LATN-RS":"Serbian","SR-LATN-XK":"Serbian",SV:"Swedish","SV-AX":"Swedish","SV-FI":"Swedish","SV-SE":"Swedish",SW:"Swahili","SW-CD":"Swahili","SW-KE":"Swahili","SW-TZ":"Swahili","SW-UG":"Swahili",TA:"Tamil","TA-IN":"Tamil","TA-LK":"Tamil","TA-MY":"Tamil","TA-SG":"Tamil",TE:"Telugu",TEO:"Teso","TEO-KE":"Teso","TEO-UG":"Teso","TE-IN":"Telugu",TG:"Tajik","TG-TJ":"Tajik",TH:"Thai","TH-TH":"Thai",TI:"Tigrinya","TI-ER":"Tigrinya","TI-ET":"Tigrinya",TK:"Turkmen","TK-TM":"Turkmen",TO:"Tongan","TO-TO":"Tongan",TR:"Turkish","TR-CY":"Turkish","TR-TR":"Turkish",TWQ:"Tasawaq","TWQ-NE":"Tasawaq",TZM:"Central Atlas Tamazight","TZM-MA":"Central Atlas Tamazight",UG:"Uighur","UG-CN":"Uighur",UK:"Ukrainian","UK-UA":"Ukrainian",UR:"Urdu","UR-IN":"Urdu","UR-PK":"Urdu",UZ:"Uzbek","UZ-ARAB":"Uzbek","UZ-ARAB-AF":"Uzbek","UZ-CYRL":"Uzbek","UZ-CYRL-UZ":"Uzbek","UZ-LATN":"Uzbek","UZ-LATN-UZ":"Uzbek",VAI:"Vai","VAI-LATN":"Vai","VAI-LATN-LR":"Vai","VAI-VAII":"Vai","VAI-VAII-LR":"Vai",VI:"Vietnamese","VI-VN":"Vietnamese",VUN:"Vunjo","VUN-TZ":"Vunjo",WAE:"Walser","WAE-CH":"Walser",XOG:"Soga","XOG-UG":"Soga",YAV:"Yangben","YAV-CM":"Yangben",YI:"Yiddish","YI-001":"Yiddish",YO:"Yoruba","YO-BJ":"Yoruba","YO-NG":"Yoruba",YUE:"Cantonese","YUE-HK":"Cantonese",ZGH:"zgh","ZGH-MA":"zgh",ZH:"Chinese","ZH-HANS":"Chinese","ZH-HANS-CN":"Chinese","ZH-HANS-HK":"Chinese","ZH-HANS-MO":"Chinese","ZH-HANS-SG":"Chinese","ZH-HANT":"Chinese","ZH-HANT-HK":"Chinese","ZH-HANT-MO":"Chinese","ZH-HANT-TW":"Chinese",ZU:"Zulu","ZU-ZA":"Zulu"};function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function me(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function fe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?me(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=ye(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):me(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ge(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ye(a.key),a)}}function ye(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=pe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}var ve=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.id,a=void 0!==i&&i;this.id=a,this.deliveryParameter={},this.customMetadata={},this.getGlobalMetadata(this.customMetadata),this.getDOMDataSet(),this.set()},t=[{key:"getParameter",value:function(e){e.onSuccess,e.onError}},{key:"getGlobalMetadata",value:function(e){ot.hasOwnProperty("globalMetaData")&&Object.keys(ot.globalMetaData).forEach((function(t){e["md_".concat(t)]=ot.globalMetaData[t]}))}},{key:"getDOMDataSet",value:function(){this.insTagParams=this.id&&At.getDOMDetails({id:this.id,dsKeys:["adspotKey","source","refreshRate","admetadata","adSizes","adBreakCount","adBreakDuration"]})||{},this.insTagParams.admetadata&&this.keyConverter(this.insTagParams.admetadata)}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deliveryParameter?fe(fe({},e),this.deliveryParameter):{}}},{key:"getURL",value:function(){return ot.url[0].replace("<zoneid>",this.insTagParams.adspotKey)}},{key:"getMultiAdURL",value:function(){return ot.url[1].replace("<zoneid>",this.insTagParams.adspotKey)}},{key:"getAdspotKey",value:function(){return this.insTagParams.adspotKey||!1}},{key:"getAppName",value:function(){return this.insTagParams.source||!1}},{key:"getAllCustomMetaData",value:function(){return fe(fe({},this.customMetadata),{language:he[navigator.language.toLocaleUpperCase()]})}},{key:"keyConverter",value:function(e){if(0==e.length)return{};try{for(var t in e=JSON.parse(e))e.hasOwnProperty(t)&&(this.customMetadata["md_".concat(t)]=e[t]);delete this.insTagParams.custommetadata}catch(e){return{}}}},{key:"set",value:function(){var e=new ue;ot.ao=e.isPortrait()?"p":"l";var t=new Date;ot.trq=t.getTime(),ot.md_hr=t.getHours(),ot.md_min=t.getMinutes(),ot.hasParentPkg?ot.hasParentPkg&&ot.ai!=this.insTagParams.source&&(ot.aic=this.insTagParams.source):ot.ai=this.insTagParams.source,ot.asi=this.insTagParams.adspotKey,ot.sbz=this.insTagParams.adSizes?this.insTagParams.adSizes:"",ot.pmad=this.insTagParams.adBreakCount,ot.pmxd=1e3*this.insTagParams.adBreakDuration,bt.log("preparing the request params for Ad request");try{this.deliveryParameter=fe(fe({},fe(fe(fe({},this.insTagParams),this.customMetadata),{placementId:this.id})),Z.filtered({raw:ot,keyList:["la","lo","cl","acc","gts","ap","av","ao","lc","se","qk","ifa","trq","ai","aic","vr","asi","ua","mn","br","os","osv","sh","sw","dt","tz","uid","suid","so","cc","nc","md_language","md_dvb","md_dvm","md_srid","md_isq","md_hr","md_min","md_nt","md_osv","lt","fn","md_nt","sbz","pmad","pmxd","cgi"]}))}catch(e){bt.log("Cant able to set deliveryParameter",e)}}}],t&&ge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const be=ve;function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function ke(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Ie(e,t,i){var a;return a=function(e,t){if("object"!=Ae(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ae(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ae(a)?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Se=function(e,t,i){var a,n=i.req,r=i.res,o=i.f,s=i.dl,c=i.cl,d=ot.AdManager[e].masterConfigManager.get("config.f-rate")||[],l=d&&d.urls?d.urls:[],u=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(i),!0).forEach((function(t){Ie(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ke(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},new be({id:e}).get());if(u){delete u.placementId,delete u.loadAd,delete u.isPS;var h=Object.keys(u).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(u[e])})).join("&")}var p=ot.AdManager[e].masterConfigManager.get({type:"ASI",value:t,defaultValue:""}),m={req:n,res:r,f:o,cl:c,dl:s};a=Z.replaceMacrosValues("req=[req]&res=[res]&f=[f]&dl=[dl]&cl=[cl]",m,!1);for(var f=0;f<l.length;f++){var g,y=l[f],v={asid:p,frt:a,reqp:h};g=Z.replaceMacrosValues(y,v,!1);var b=new XMLHttpRequest;b.open("GET",g,!0),b.send()}};var Te={},we=new l;Te.onSpotAdStart=function(e,t){"function"==typeof JioAds.onSpotAdStart&&JioAds.onSpotAdStart(e,t)},Te.onSpotAdEnd=function(e){"function"==typeof JioAds.onSpotAdEnd&&JioAds.onSpotAdEnd(e)},Te.onAdPrepared=function(e){var t=e.placementId,i=e.adUxType;"function"==typeof JioAds.onAdPrepared&&JioAds.onAdPrepared(t,i)},Te.onAdMediaStart=function(e){var t=e.placementId;"function"==typeof JioAds.onAdMediaStart&&JioAds.onAdMediaStart(t,e)},Te.onAdClicked=function(e){var t=e.placementId,i=e.isAdDestroy,a=e.isFcapDisable,n=void 0===a||a,r=e.url,o=e.urld;n&&ae.init({pId:t,type:"c"}),i&&ee(t),"function"==typeof JioAds.onAdClicked&&JioAds.onAdClicked(t,r,o)},Te.onAdMediaEnd=function(e){var t=e.placementId,i=e.reward,a=e.isFcapDisable;(void 0===a||a)&&ae.init({pId:t,type:"cv"}),"function"==typeof JioAds.onAdMediaEnd&&JioAds.onAdMediaEnd(t,i,e)},Te.onAdSkippable=function(e){var t=e.placementId;"function"==typeof JioAds.onAdSkippable&&JioAds.onAdSkippable(t)},Te.onAdRefresh=function(e){var t=e.placementId;$.cleanDocument(t),ee(t),"function"==typeof JioAds.onAdRefresh&&JioAds.onAdRefresh(t)},Te.onAdRender=function(e){var t=e.placementId,i=e.url,a=e.adParams,n=e.isFcapDisable;(void 0===n||n)&&ae.init({pId:t,type:"i"}),we.removeItem("".concat(t,"_Programmatic_Ad"));var r=At.getInsData(t),o=ot.AdManager[t].masterConfigManager.get({type:"AD_OP",value:r.adspot,defaultValue:[]});o.length&&se(o,r.adspot,!0,!0,!0),"function"==typeof JioAds.onAdRender&&JioAds.onAdRender(t,i&&i[0]?i[0]:"",i&&i[1]?i[1]:"",a,i&&i[2]?i[2]:"")},Te.onAdViewed=function(e){var t=e.placementId;"function"==typeof JioAds.onAdViewed&&JioAds.onAdViewed(t)},Te.onAdDuration=function(e){var t=e.placementId,i=e.adTime,a=e.skip;"function"==typeof JioAds.onAdDuration&&JioAds.onAdDuration(t,i,a)},Te.onAdFailedToLoad=function(e){var t=e.placementId,i=e.errorCode,a=e.response,n=e.methodname;try{var r=At.getInsData(t);if(r){if(ot.enableLogging){var o=Object.keys(ne).indexOf(i),s=Object.keys(ne).indexOf("m104"),c=Object.keys(ne).indexOf("m139");o>=s&&o<=c||"m108"==i||oe(r.adspot,i,a,n)}if("m115"!=i){var d=sessionStorage.getItem(r.adspot+"_fibonacciNumAd")||0;d=parseInt(d),sessionStorage.setItem(r.adspot+"_fibonacciNumAd",d+1);var l=ot.AdManager[t].masterConfigManager.get({type:"FRE",value:r.adspot,defaultValue:0}),u=parseInt(ot.AdManager[t].masterConfigManager.get({type:"MULTIADS",value:r.adspot,defaultValue:0}));if(1===l&&ot.frEn&&u){var h=ot.AdManager[t].adbreakDuration,p=ot.AdManager[t].adbreakCount;this.placementNodeDetails=At.getDOMDetails({id:t,dsKeys:["adBreakDuration",,"adBreakCount"]});var m=h||0,f=p||0,g=1,y=0,v=0;("m111"==i||ot.AdManager[t].rendError||"m123"==i)&&(g=1,y=1,v=1,m=0,f=0),(m||f)&&(g=0);var b=ot.AdManager[t].rendErAdBreakList,A=b.length;if(A>0){if(g=A,y=A,v=A,m>0){var k=0;b.forEach((function(e){return k+=e})),m-=k}f>1&&(f-=A),0==m&&(m=0,f=0)}Se(t,r.adspot,{req:g,res:y,f:v,dl:m>0?m:0,cl:f>0&&0==m?f:0})}}var I=ot.AdManager[t].masterConfigManager.get({type:"AD_OP",value:r.adspot,defaultValue:[]});if(I.length){o=Object.keys(ne).indexOf(i);var S=Object.keys(ne).indexOf("m109"),T=Object.keys(ne).indexOf("m141");c=Object.keys(ne).indexOf("m139"),o<=S?se(I,r.adspot,!1,!1,!1):o<=T?se(I,r.adspot,!0,!0,!1):o<=c&&se(I,r.adspot,!0,!1,!1)}}ee(t),bt.log("Destroyed "+t),"function"==typeof JioAds.onAdFailedToLoad&&(bt.log("onAdFailedToLoadCalled "+t),JioAds.onAdFailedToLoad(t,e))}catch(i){ee(t),bt.log("Destroyed "+t),"function"==typeof JioAds.onAdFailedToLoad&&(bt.log("onAdFailedToLoadCalled "+t),JioAds.onAdFailedToLoad(t,e))}},Te.onAdClosed=function(e){var t=e.placementId,i=e.isVideoCompleted,a=e.reward;$.cleanDocument(t),ee(t),"function"==typeof JioAds.onAdClosed&&JioAds.onAdClosed(t,i,a)},Te.onMediaURLReady=function(e){var t=e.streamURL,i=e.mediaURL,a=e.clientSideTracking,n=e.type;"function"==typeof JioAds.onMediaURLReady&&JioAds.onMediaURLReady(t,i,a,n)},Te.onMediaURLFailedToLoad=function(e){var t=e.streamURL,i=e.errorCode,a=e.response,n=e.methodname;ot.enableLogging&&oe(null,i,a,n,t),ee(t),"function"==typeof JioAds.onMediaURLFailedToLoad&&(bt.log("onMediaURLFailedToLoad "+t),JioAds.onMediaURLFailedToLoad(t,e))},Te.onAdChange=function(e){var t=e.placementId,i=e.adInfo,a=e.adCpInfo;"function"==typeof JioAds.onAdChange&&JioAds.onAdChange(t,i,a)},Te.onAdsReceived=function(e){var t=e.placementId,i=e.adResponse;e.vastad,"function"==typeof JioAds.onAdsReceived&&JioAds.onAdsReceived(t,i)},Te.isAdClick=function(e){var t=e.placementId;"function"==typeof JioAds.isAdClick&&JioAds.isAdClick(t)},Te.onAdProgress=function(e){var t=e.placementId,i=e.progress,a=e.currentTime;"function"==typeof JioAds.onAdProgress&&JioAds.onAdProgress(t,i,a)},Te.onIDFA=function(){2!=ot.ifaStatus||ot.present||(ot.present=!0,"function"==typeof JioAds.onInitialised&&JioAds.onInitialised())},Te.adBreaksDetected=function(e){var t=e.streamURL,i=e.adBreakList;"function"==typeof JioAds.adBreaksDetected&&JioAds.adBreaksDetected(t,i)};const Ce=Te;function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function Le(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Me(a.key),a)}}function Me(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ee(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ee(t)?t:t+""}var je=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.identifiers;this.identifiers=i;var a=localStorage.getItem("IDFA");if(a){bt.log("uid fetched: "+a),ot.ifa=a,ot.ifaStatus=2,Ce.onIDFA();var n=localStorage.getItem("partner-uid");null!=n&&(ot.pcd=n),bt.log("Partner IDs fetched: "+n)}else 0==(sessionStorage.getItem("ifa_fetch_status")||0)&&(sessionStorage.setItem("ifa_fetch_status",1),this.initFrame())},(t=[{key:"initFrame",value:function(){var e=this;this.frame=document.createElement("iframe"),this.frame.setAttribute("id","JioAdsUidGenerator"),this.frame.style.width="100%",this.frame.style.height="100%",this.frame.style.display="none",this.frame.src="https://mercury.akamaized.net/jioads/uid/uidgen.html",this.frame.onload=function(){bt.log("post message for fetching uid"),e.frame.contentWindow.postMessage(JSON.stringify({event:"uid-fetcher",args:e.identifiers?[e.hashMD5(JSON.stringify(e.identifiers))]:null}),"https://mercury.akamaized.net")},document.body.appendChild(this.frame),window.addEventListener("message",this.onMessage)}},{key:"onMessage",value:function(e){if("https://mercury.akamaized.net"===e.origin){var t;try{t=JSON.parse(e.data)}catch(e){return}if("uid-fetcher-res"===t.event){bt.log("uid fetched: "+t.args),ot.ifa=t.args,localStorage.setItem("IDFA",t.args),ot.ifa&&(ot.ifaStatus=2,Ce.onIDFA());var i=document.getElementById("JioAdsUidGenerator");i&&i.parentNode.removeChild(i),sessionStorage.setItem("ifa_fetch_status",0)}}}},{key:"hashMD5",value:function(e){function t(e,t){return e<<t|e>>>32-t}function i(e,t){var i,a,n,r,o;return n=2147483648&e,r=2147483648&t,o=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(a=1073741824&t)?2147483648^o^n^r:i|a?1073741824&o?3221225472^o^n^r:1073741824^o^n^r:o^n^r}function a(e,a,n,r,o,s,c){return e=i(e,i(i(function(e,t,i){return e&t|~e&i}(a,n,r),o),c)),i(t(e,s),a)}function n(e,a,n,r,o,s,c){return e=i(e,i(i(function(e,t,i){return e&i|t&~i}(a,n,r),o),c)),i(t(e,s),a)}function r(e,a,n,r,o,s,c){return e=i(e,i(i(function(e,t,i){return e^t^i}(a,n,r),o),c)),i(t(e,s),a)}function o(e,a,n,r,o,s,c){return e=i(e,i(i(function(e,t,i){return t^(e|~i)}(a,n,r),o),c)),i(t(e,s),a)}function s(e){var t,i="",a="";for(t=0;t<=3;t++)i+=(a="0"+(e>>>8*t&255).toString(16)).substr(a.length-2,2);return i}var c,d,l,u,h,p,m,f,g,y;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}(e),c=function(e){for(var t,i=e.length,a=i+8,n=16*((a-a%64)/64+1),r=new Array(n-1),o=0,s=0;s<i;)o=s%4*8,r[t=(s-s%4)/4]=r[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,r[t=(s-s%4)/4]=r[t]|128<<o,r[n-2]=i<<3,r[n-1]=i>>>29,r}(e),m=1732584193,f=4023233417,g=2562383102,y=271733878,d=0;d<c.length;d+=16)l=m,u=f,h=g,p=y,m=a(m,f,g,y,c[d+0],7,3614090360),y=a(y,m,f,g,c[d+1],12,3905402710),g=a(g,y,m,f,c[d+2],17,606105819),f=a(f,g,y,m,c[d+3],22,3250441966),m=a(m,f,g,y,c[d+4],7,4118548399),y=a(y,m,f,g,c[d+5],12,1200080426),g=a(g,y,m,f,c[d+6],17,2821735955),f=a(f,g,y,m,c[d+7],22,4249261313),m=a(m,f,g,y,c[d+8],7,1770035416),y=a(y,m,f,g,c[d+9],12,2336552879),g=a(g,y,m,f,c[d+10],17,4294925233),f=a(f,g,y,m,c[d+11],22,2304563134),m=a(m,f,g,y,c[d+12],7,1804603682),y=a(y,m,f,g,c[d+13],12,4254626195),g=a(g,y,m,f,c[d+14],17,2792965006),m=n(m,f=a(f,g,y,m,c[d+15],22,1236535329),g,y,c[d+1],5,4129170786),y=n(y,m,f,g,c[d+6],9,3225465664),g=n(g,y,m,f,c[d+11],14,643717713),f=n(f,g,y,m,c[d+0],20,3921069994),m=n(m,f,g,y,c[d+5],5,3593408605),y=n(y,m,f,g,c[d+10],9,38016083),g=n(g,y,m,f,c[d+15],14,3634488961),f=n(f,g,y,m,c[d+4],20,3889429448),m=n(m,f,g,y,c[d+9],5,568446438),y=n(y,m,f,g,c[d+14],9,3275163606),g=n(g,y,m,f,c[d+3],14,4107603335),f=n(f,g,y,m,c[d+8],20,1163531501),m=n(m,f,g,y,c[d+13],5,2850285829),y=n(y,m,f,g,c[d+2],9,4243563512),g=n(g,y,m,f,c[d+7],14,1735328473),m=r(m,f=n(f,g,y,m,c[d+12],20,2368359562),g,y,c[d+5],4,4294588738),y=r(y,m,f,g,c[d+8],11,2272392833),g=r(g,y,m,f,c[d+11],16,1839030562),f=r(f,g,y,m,c[d+14],23,4259657740),m=r(m,f,g,y,c[d+1],4,2763975236),y=r(y,m,f,g,c[d+4],11,1272893353),g=r(g,y,m,f,c[d+7],16,4139469664),f=r(f,g,y,m,c[d+10],23,3200236656),m=r(m,f,g,y,c[d+13],4,681279174),y=r(y,m,f,g,c[d+0],11,3936430074),g=r(g,y,m,f,c[d+3],16,3572445317),f=r(f,g,y,m,c[d+6],23,76029189),m=r(m,f,g,y,c[d+9],4,3654602809),y=r(y,m,f,g,c[d+12],11,3873151461),g=r(g,y,m,f,c[d+15],16,530742520),m=o(m,f=r(f,g,y,m,c[d+2],23,3299628645),g,y,c[d+0],6,4096336452),y=o(y,m,f,g,c[d+7],10,1126891415),g=o(g,y,m,f,c[d+14],15,2878612391),f=o(f,g,y,m,c[d+5],21,4237533241),m=o(m,f,g,y,c[d+12],6,1700485571),y=o(y,m,f,g,c[d+3],10,2399980690),g=o(g,y,m,f,c[d+10],15,4293915773),f=o(f,g,y,m,c[d+1],21,2240044497),m=o(m,f,g,y,c[d+8],6,1873313359),y=o(y,m,f,g,c[d+15],10,4264355552),g=o(g,y,m,f,c[d+6],15,2734768916),f=o(f,g,y,m,c[d+13],21,1309151649),m=o(m,f,g,y,c[d+4],6,4149444226),y=o(y,m,f,g,c[d+11],10,3174756917),g=o(g,y,m,f,c[d+2],15,718787259),f=o(f,g,y,m,c[d+9],21,3951481745),m=i(m,l),f=i(f,u),g=i(g,h),y=i(y,p);return(s(m)+s(f)+s(g)+s(y)).toLowerCase()}}])&&Le(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Pe=je;function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function De(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ne(a.key),a)}}function Ne(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Oe(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}var Re=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.storageKey=t,this.lastEventTime=0,this.isDefaultStorageEnable=function(){try{return localStorage.setItem("__JioTestStorage__","__JioTestStorage__"),localStorage.removeItem("__JioTestStorage__"),!0}catch(e){return!1}}())},t=[{key:"getAllEvent",value:function(){try{if(!this.isDefaultStorageEnable)return{};var e=localStorage.getItem(this.storageKey);return JSON.parse(e)||[]}catch(e){return{}}}},{key:"getRemainingEvents",value:function(){try{var e=this.getAllEvent(),t=[];for(var i in e)e[i].hasOwnProperty("tid")||t.push(e[i]);return t||[]}catch(e){return[]}}},{key:"setTransactionId",value:function(e,t){try{if(!this.isDefaultStorageEnable)return{};var i=JSON.parse(localStorage.getItem(this.storageKey));for(var a in i)for(var n in t)if(i[a].tms==t[n].tms){i[a].tid=e;break}localStorage.setItem(this.storageKey,JSON.stringify(i))}catch(e){console.error("cant able to set transaction id of event : ".concat(e))}}},{key:"resetTransactionId",value:function(e){try{if(!this.isDefaultStorageEnable)return{};var t=JSON.parse(localStorage.getItem(this.storageKey));for(var i in t)t[i].hasOwnProperty("tid")&&t[i].tid==e&&delete t[i].tid;localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(e){console.error("cant able to reset transaction id of event : ".concat(e))}}},{key:"removeEventsOfTransaction",value:function(e){try{var t=JSON.parse(localStorage.getItem(this.storageKey)),i=[];for(var a in t)t[a].hasOwnProperty("tid")&&t[a].tid===e||i.push(t[a]);localStorage.setItem(this.storageKey,JSON.stringify(i))}catch(e){console.error("cant able to remove event : ".concat(e))}}},{key:"getEventSize",value:function(){try{var e=this.getAllEvent();return e&&Object.keys(e).length}catch(e){return 0}}},{key:"logEvent",value:function(e,t){try{var i=this.getAllEvent();return i&&Object.keys(i).length>0?this.lastEventTime=i[0].tms:this.lastEventTime=t.tms,i.push(t),localStorage.setItem(this.storageKey,JSON.stringify(i)),!0}catch(e){return!1}}},{key:"getEvent",value:function(e){try{var t=this.getAllEvent();return!!(t&&Object.keys(t).length>0&&t.hasOwnProperty(e))&&t[e]}catch(e){return{}}}},{key:"getLastEventTime",value:function(){try{var e=this.getAllEvent();e&&Object.keys(e).length>0?this.lastEventTime=e[0].tms:this.lastEventTime=0}catch(e){console.error("cant able to remove event : ".concat(e))}return this.lastEventTime}},{key:"removeEventList",value:function(){return localStorage.setItem(this.storageKey,JSON.stringify([]))}},{key:"removeLastEvent",value:function(){try{var e=this.getAllEvent();e.shift(),localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){console.error("cant able to remove event : ".concat(e))}}}],t&&De(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const xe=Re;function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Ve(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Be(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=Fe(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ve(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Fe(a.key),a)}}function Fe(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}var Ke=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.logs=[]},t=[{key:"log",value:function(e){var t=e.imsi,i=e.idfa,a=e.timestamp,n=e.ai,r=e.vr,o=e.ua,s=e.bst,c={};if(t=t||this.imsi){var d=t.substr(0,6).match(/.{1,3}/g);c.mcc=d[0],c.mnc=d[1]}var l={timestamp:a,bst:s,ai:n,vr:r,idfa:i||this.idfa,ua:o};l=Be(Be({},l),c),this.logs.push(l)}},{key:"editLogDetails",value:function(e,t){if(this.imsi=e,this.idfa=t,bt.log("editLogDetails fun called"),this.imsi)var i=this.imsi.substr(0,6).match(/.{1,3}/g),a=i[0],n=i[1];for(var r=0;r<this.logs.length;r++)this.logs[r].mnc=n,this.logs[r].mcc=a,this.logs[r].idfa=this.idfa,this.logs[r].ai=ot.AppName}},{key:"createBeaconNode",value:function(e){var t=document.createElement("span"),i=this.url,a="";for(var n in e)e[n]&&(i+="&"+n+"="+encodeURIComponent(e[n]));return a+='<img src="'.concat(i,'" height="1" width="1" style="display:none"/>'),t.innerHTML=a,t}},{key:"isAllValuePresentInLog",value:function(e){if(!Array.isArray(e)||0==this.logs.length)return!1;for(var t,i=this,a=function(t){return{v:e.every((function(e,a){return i.logs[t].hasOwnProperty(e)&&i.logs[t][e]}))}},n=0;n<this.logs.length;n++)if(t=a(n))return t.v}},{key:"insertBeaconNode",value:function(){for(var e=this.logs.length,t=0;t<e;t++){var i=this.createBeaconNode(this.logs[0]);this.logs.shift(),document.body.appendChild(i)}}}],t&&_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const ze=Ke;function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function He(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function qe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?He(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=We(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):He(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Je(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,We(a.key),a)}}function We(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ge(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}var Ye=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=ot.initUrl,i=new ze(ot.cdnUrl);this.initService(t,i)},t=[{key:"initService",value:function(e,t){var i,a=new l,n=a.getItem("UID");if(null!=n)return ot.uid=n,bt.log("Init identification service UID already available"),void(ot.uidStatus=2);if(ot.ap=2,2===ot.ap){var r={timestamp:new Date,ai:ot.appName,vr:ot.version,ua:navigator.userAgent,bst:"hit"};t.log(r),(new yt).ajax(e,{method:"GET",timeout:6e3},(function(e,n){var o=JSON.parse(e);if(o&&o.hasOwnProperty("success")&&!1===o.success)bt.log("Init identification service HTTP req failure response received");else{bt.log("Init identification service HTTP req success"),o&&o.hasOwnProperty("sessionAttributes")&&o.sessionAttributes&&o.sessionAttributes.hasOwnProperty("user")&&o.sessionAttributes.user&&o.sessionAttributes.user.hasOwnProperty("subscriberId")&&o.sessionAttributes.user.subscriberId&&(i=o.sessionAttributes.user.subscriberId,bt.log("Init identification service subscriberID fetched: "+i));var s={};i?(a.setItem("UID",i),ot.uid=i,ot.uidStatus=2,s=qe(qe({},r),{},{timestamp:n,bst:"success"})):s=qe(qe({},r),{},{timestamp:n,bst:"error",error:o}),t.log(s)}}),(function(e,i){bt.log("Init identification service failed to fectch subscriberID"),ot.uidStatus=2;var a=qe(qe({},r),{},{timestamp:i,bst:"error"});t.log(a)}))}}}],t&&Je(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Qe=Ye;const Ze={JioUidHandler:function(){new Qe}};function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}var $e,et,tt={sdkVer:"2.1.6",appName:"",appId:"com.jio.web",appSdkVer:"1.0",language:navigator.language,country:"IN",maxEvents:10,maxRedirects:5,maxRetries:5,sdkRetries:0,eventExpiry:10080,maxStorageTime:1440,gzipEnablePayloadSize:1300,appVersion:"",version:"2.1.6",endpoint:"mercury",platform:"si",reqType:"prod",tz:(new Date).toString(),clkSelf:!1,lo:0,la:0,acc:0,gts:0,hasLocationSet:!1,isTouch:($e=window.screen.width,et=window.screen.height,480==et||480==$e||408==et||408==$e),ao:"p",tpl:1,ua:navigator.userAgent,qk:0,ap:2,lc:navigator.language,md_language:navigator.language,cl:document.documentElement.lang||navigator.languages[navigator.languages.length-1]||"",idfa:"",uid:"",so:"",cc:"",nc:"",imsi:"",ifa:"",os:4,trq:"",md_hr:"",md_min:"",ai:"",aic:"",vr:"1.0.0",asi:"",cgi:"",suid:"",mn:rt(navigator.userAgent),md_dvm:rt(navigator.userAgent),md_srid:"",osv:2.5,md_osv:2.5,md_nt:function(){var e=new w;if(2!=e.getConnectionType())return 1;switch(e.getCellularConnectionType()){case"slow-2g":case"2g":return 3;case"3g":return 4;case"4g":return 5}}(),dt:4,fn:"0",lt:"0",sw:window.screen.width,sh:window.screen.height,se:45,hasParentPkg:!1,deeplinkingHostName:"dl.kaios.jioads.com",IDFAFetchFrequency:15,cacheAdPSExpiry:0,instream:{instreamVideoContainer:"test",rotateInstreamVideo:!1,setTimerVisibility:!1},nativeInterstitial:{enableControl:!1},logLevel:1,adRequestTimeout:6e3,adRenderingTimeout:5e3,md_cn:"",md_st:"",md_ct:"",md_pn:"",enableAMP:!1,initialVisibilityAMP:!0,initialUnMute:!1,noSkipDisplay:!1,retPoint:"prod",enableLogging:0,autoplay:!0,locationData:{},loc:{},spotadEndDelay:0,pcd:"",present:!1,ifaStatus:0,fbLimit:5,frEn:!0},it=new l,at=document.currentScript.src;function nt(){switch(tt.reqType){case"stg":tt.url=["https://mercury-stg.jio.com/delivery/api.php?<zoneid>","https://mercury-stg.jio.com/delivery/mapi.php?<zoneid>"];break;case"prod":tt.url=["https://mercury.jio.com/delivery/api.php?<zoneid>","https://mercury.jio.com/delivery/mapi.php?<zoneid>"];break;case"dev":tt.url=["http://49.40.64.244:6080/proxy.api.php?<zoneid>","http://49.40.64.244:6080/proxy.mads.php?<zoneid>","http://49.40.64.244:6080/gocsync.php"];break;case"sit":tt.url=["http://49.40.64.244:6080/sit.goapi.php?<zoneid>","http://49.40.64.244:6080/sit.gomapi.php?<zoneid>","http://49.40.64.244:6080/sit.gocsync.php"]}}function rt(e){var t=e.split("LYF");return t.length>1?t[1].slice(1,t[1].length-1):""}tt.locationData=it.getItem("location_data"),tt.loc=it.getItem("location_data"),tt.vr="WEB-".concat(tt.version),tt.av=tt.version,tt.priorityEvents=["APP_LAUNCH","DEEPLINK_LAUNCH","ADD_TO_CART","REMOVE_FROM_CART","ADD_TO_WISHLIST","REMOVE_FROM_WISHLIST","PURCHASE_COMPLETED"],tt.nonPriorityEvents=["CART_VIEW","PAGE_VIEW","PRODUCT_LIST_VIEW","PRODUCT_VIEW","SEARCH_VIEW","LOCATION","CUSTOM","DEVICE_INFORMATION","USER_DETAILS","PRODUCT_CANCELLED","PRODUCT_RETURNED"],tt.detectMobileVsDesktopForJioAds=function(){var e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?(tt.os=3,tt.dt=2,void(tt.platform="de")):/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?(tt.os=3,tt.dt=1,void(tt.platform="si")):(tt.os=4,tt.dt=4,void(tt.platform="de"))},tt.detectMobileVsDesktopForJioAds(),nt(),tt.url_ret="v1/retarget/data",tt.url_ret_Gzip="v1/retarget/data/compressed",tt.conversionUrl="https://mercury-ck.jio.com/delivery/cn.php?",tt.cdnUrl="https://mercury.akamaized.net/beacon/kaib.gif?",tt.initUrl="http://api.jio.com/v2/users/me?app-name=RJIL_JioAds_KaiOS",tt.errorLogging="https://jioads.akamaized.net/err/com.jio.store/an_err.gif?",tt.setApplicationConfiguration=function(e){if(e.hasOwnProperty("logLevel")&&(tt.logLevel=e.logLevel,bt.setLogLevel(tt.logLevel)),e.hasOwnProperty("ai")&&(tt.hasParentPkg=!0),e.hasOwnProperty("lo")?tt.hasLocationSet=!0:tt.hasLocationSet||p.locationHandler(),e.hasOwnProperty("isJioNetwork")&&!e.hasOwnProperty("uid")&&Ze.JioUidHandler(),!e.hasOwnProperty("ifa")&&!tt.ifa){var t;t=tt.identifiers?tt.identifiers:e.identifiers,new Pe({identifiers:t})}Object.assign(tt,e),nt()},tt.setConversion=function(e,t,i,a){var n,r=e,o=t,s=i,c=a||tt.conversionUrl;n=s?"".concat(c,"cid=").concat(r,"&level=").concat(o,"&").concat(tt.obj2URLEncode(s)):"".concat(c,"cid=").concat(r,"&level=").concat(o);var d=new XMLHttpRequest;d.open("GET",n,!0),d.send()},tt.obj2URLEncode=function(e){var t=[],i=["extra"];if("object"===Xe(e)){for(var a in e)e.hasOwnProperty(a)&&-1==i.indexOf(a)&&t.push(a+"="+e[a]);return encodeURI(t.join("&"))}return""},void 0!==window.isAdBlockActive&&(window.isAdBlockActive=!1),tt.ecommConfig={attribution:[]},tt.adObject={},tt.AdManager={},tt.ViewStreams={},tt.PreFetchManger={},tt.ProductionAd=new k("jio_production_ad"),tt.PrefetchAd=new k("jio_prefetch_ad"),tt.AdLoggerManager={},tt.EventStorageManager=new xe("jio_ads_event_log"),window.addEventListener("DOMContentLoaded",(function(){var e=function(){var e=at;if(e)try{return new URL(e).searchParams}catch(t){console.warn("The URL '".concat(e,"' is not valid."))}else console.warn("Something went wrong. This probably means that the browser you are using is non-modern. You should debug it!")}();e&&tt.setApplicationConfiguration(Object.fromEntries(e))}));const ot=tt;var st={},ct={allowCache:"X-Jio-MediaCaching",refreshTime:"X-Jio-AdRefresh",adspotType:"X-Jio-Adtype",delay:"X-Jio-SkipDuration",requestTimeout:"X-Jio-AdReqTimeout",mediaTimeout:"X-Jio-Mediatimeout",jioCSL:"X-Jio-CSL",orientation:"X-Jio-orientation",rewardIn:"X-Jio-RewardIn",mid:"X-Jio-MID",block:"X-Jio-Block",adSeq:"X-Jio-AdSeq",fcap:"X-Jio-Fcap",contentType:"Content-Type",wh:"X-Jio-WH",data:"X-Jio-Data",loc:"X-Jio-LOC",vce:"X-Jio-VCE"};function dt(e){var t=e.xhr,i=e.key,a="";try{a=t.getResponseHeader(i)}catch(e){bt.log("cant able to get header",e)}return a}const lt=function(e){for(var t=e.xhr,i=Object.keys(ct),a=0;a<i.length;a++){var n=i[a];st[n]=dt({xhr:t,key:ct[n]})}if(st.data){var r=function(){try{var e,t=JSON.parse(st.data);return(null==t||null===(e=t.pod)||void 0===e?void 0:e.app_zone)||t}catch(e){return{}}}();st.allowCache=r.mdc,st.refreshTime=r.adr,st.adspotType=function(){try{return r.hasOwnProperty("at")&&r.at||r.hasOwnProperty("pod")&&r.pod.app_zone.at||r.hasOwnProperty("fbk")&&r.fbk.app_zone.at}catch(e){bt.error("Cant able to parse",e)}}(),st.delay=r.skd,st.requestTimeout=r.adrt,st.mediaTimeout=r.mdt,st.jioCSL=r.csl,st.orientation=r.ao,st.rewardIn=r.rwin,st.mim=r.mim,st.block=r.blk,st.fcap=r.fcr,Object.assign(st,r)}return st};function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function ht(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function pt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=ft(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ht(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function mt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ft(a.key),a)}}function ft(e){var t=function(e,t){if("object"!=ut(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=ut(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ut(t)?t:t+""}var gt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cbSuccess=null,this.cbError=null,this.STORAGE=new l},t=[{key:"ajax",value:function(e,t,i,a){var n=this,r=new XMLHttpRequest({mozSystem:!0}),o=this.STORAGE.getItem("maskingInfo")||{},s=ae.getCampaignList(),c=t&&t.hasOwnProperty("data")?t.data:{};this.adSpotKey=c.adspotKey,this.appname=c.ai,this.isMultiAdEnable=c.isMultiAdEnable||!1,this.masterConfigVr=c.masterConfigVr||!1,this.hybridMultiAdsEnable=c.mat||!1,this.channelName=c.channelName||this.adSpotKey,this.id=c.placementId;var d=t&&t.hasOwnProperty("method")&&-1!==["GET","POST"].indexOf(t.method)?t.method:"GET",l=t&&t.hasOwnProperty("headers")?t.headers:null,u=t&&t.hasOwnProperty("timeout")?t.timeout:ot.adRequestTimeout,h=(t&&t.hasOwnProperty("ontimeout")&&"function"==typeof t.ontimeout&&t.ontimeout,!(!t||!t.hasOwnProperty("withCredentials"))&&t.withCredentials),p=!(!t||!t.hasOwnProperty("checkJSON"))&&t.checkJSON,m=t&&t.hasOwnProperty("ssai")?t.ssai:0,f=t&&t.hasOwnProperty("returnPayload")?t.returnPayload:{};f=pt(pt({},f),c),"function"==typeof i&&(this.cbSuccess=i),"function"==typeof a&&(this.cbError=a);var g=null;if("GET"==d&&Object.keys(c).length){var y=pt({},c);delete y.placementId,delete y.loadAd,delete y.isPS,e=e.split("?")[0]+"?",e+=Object.keys(y).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(y[e])})).join("&")}for(var v in r.open(d,e,!0),h&&(r.withCredentials=!0),r.timeout=u,l)l.hasOwnProperty(v)&&(bt.debug(v+" => "+l[v]),r.setRequestHeader(v,l[v]));if(t.hasOwnProperty("data")){if(Object.keys(o).length){var b=o.hasOwnProperty("UUID")?o.UUID:o[c.ai];if(b&&b.hasOwnProperty("mtype"))switch(b.mtype){case"0":c.ifa="";break;case"1":c.ifa=b.id;break;case"2":c.ifa=ot.ifa}b&&r.setRequestHeader("X-Jio-MID",JSON.stringify(b))}""!=ot.pcd&&r.setRequestHeader("X-Jio-Pcd",JSON.stringify(ot.pcd)),0!=Object.keys(s).length&&r.setRequestHeader("X-Jio-FC",JSON.stringify(s))}/GET/i.test(d)||(r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g=this.obj2URLEncoded(c)||null),r.onreadystatechange=function(){if(4==r.readyState){if(200!=r.status&&304!=r.status){var e=r.status;return bt.warn("HTTP Call Status: "+r.status+" | State: "+r.readyState),ot.AdManager[n.id]&&ot.AdManager[n.id].requestThrottleManager&&ot.AdManager[n.id].requestThrottleManager.nextWLIndex(),void("function"==typeof n.cbError&&n.cbError({status:e,errorCode:"m108",errorDesc:ne.m108,data:f}))}if(bt.debug("Successfully completed HTTP request..."+r),""!==r.responseText&&p)n.onSuccessValidation(r,f);else if("function"==typeof n.cbSuccess&&0!=m)n.cbSuccess(r.response,m,r,f);else if("function"==typeof n.cbSuccess)try{n.cbSuccess(r.response,r,f)}catch(e){if(ot.AdManager[n.id]&&ot.AdManager[n.id].requestThrottleManager&&ot.AdManager[n.id].requestThrottleManager.nextWLIndex(),"function"==typeof n.cbError)return n.cbError({status:{},errorCode:"m113",errorDesc:ne.m113,data:f});bt.debug("No cbError defined!")}}},r.ontimeout=function(){ot.AdManager[n.id]&&ot.AdManager[n.id].requestThrottleManager&&ot.AdManager[n.id].requestThrottleManager.nextWLIndex(),n.cbError({status,errorCode:"m106",errorDesc:ne.m106,data:f})};try{r.send(g)}catch(e){bt.error("Error Occured!"+e)}}},{key:"obj2URLEncoded",value:function(e){var t=[];if("object"===ut(e)){for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+e[i]);return encodeURI(t.join("&"))}return""}},{key:"onSuccessValidation",value:function(e,t){bt.log("HTTP request successfull trying for Ad format selection");try{if(this.adSpotKey){var i,a=e.getResponseHeader("x-jio-data")?JSON.parse(e.getResponseHeader("x-jio-data")).blk:"";if((i=this.id&&ot.AdManager[this.id].masterConfigManager?ot.AdManager[this.id].masterConfigManager.get({type:"BLK",value:this.adSpotKey,defaultValue:!1}):a)&&i>0){var n=new Date((new Date).getTime()+6e4*i);this.STORAGE.setItem("blockAdRequest_"+this.adSpotKey,{adspot:this.adSpotKey,blockUpto:n},"local"),bt.warn("Ad request blocked further for this Adspot: "+this.adSpotKey+" upto: "+n)}}var r=e.responseText,o=e.getResponseHeader("Content-Type");if("application/xml; charset=UTF-8"===o)return"function"==typeof this.cbSuccess?this.cbSuccess({ad:r,xhr:e,adSpotKey:this.adSpotKey,data:t}):void 0;if("text/html; charset=UTF-8"===o||"text/html;charset=UTF-8"===o)return"function"==typeof this.cbSuccess?this.cbSuccess({ad:r,xhr:e,data:t}):void 0;var s=JSON.parse(r);if(s.hasOwnProperty("exp"))return this.cbSuccess(s);if(s.hasOwnProperty("vastURL"))return this.cbSuccess(s);if(s.hasOwnProperty("errors")&&s.errors.length&&(ot.AdManager[this.id]&&ot.AdManager[this.id].requestThrottleManager&&ot.AdManager[this.id].requestThrottleManager.nextWLIndex(),"function"==typeof this.cbError)){var c=ne.m104,d="m104";switch(s.errors[0].errorCode){case"AS16":case"AS19":case"AS22":case"AS23":c=ne.m114,d="m114";break;case"AS20":case"L04":case"TA01":c=ne.m116,d="m116";break;case"C30":c=ne.m125,d="m125";break;case"C33":case"C35":case"C36":c=ne.m124,d="m124";break;default:c=ne.m104,d="m104"}return this.cbError({status:s.errors,errorCode:d,errorDesc:c,data:t})}if(e&&e.responseText&&s){if("function"==typeof this.cbSuccess){if(0==t.hasOwnProperty("pgm_only")&&s&&this.id&&ot.AdManager[this.id].isMultiAdEnable()){var l=s.result;if(s.success&&l.asi[this.adSpotKey]&&l.asi[this.adSpotKey].hasOwnProperty("cmps")&&Object.keys(l.asi[this.adSpotKey].cmps).length){if(l.config.vr=this.masterConfigVr||ot.AdManager[this.id].masterConfigManager.get({type:"VR",value:this.adSpotKey,defaultValue:""}),this.hybridMultiAdsEnable){var u=new Date,h=this.adSpotKey,p=0;l.config.tms=u.setMinutes(u.getMinutes()+parseInt(l.asi[h].config.tms)),Object.keys(l.asi[h].cmps).forEach((function(e){Object.keys(l.asi[h].cmps[e]).forEach((function(t){p+=Object.keys(l.asi[h].cmps[e][t].ads).length}))})),l.config.tcount=p,l.config.ecount=0,l.config.ignoredAdsH=[]}if(l.asi[this.adSpotKey].cmps.pgm){var m=l.asi[this.adSpotKey].cmps.pgm.pgm_expiry||0,f=new Date((new Date).getTime()+6e4*m);this.STORAGE.setItem("".concat(this.adSpotKey,"_Programmatic_Ad_expiry"),f,"local")}ot.ProductionAd.setData(this.channelName,l),this.cbSuccess({isProductionData:!0,hybridMultiAdsEnable:this.hybridMultiAdsEnable,id:this.id,adSpotKey:this.adSpotKey,channelName:this.channelName,data:t})}else this.cbSuccess({isProductionData:!1,hybridMultiAdsEnable:this.hybridMultiAdsEnable,id:this.id,adSpotKey:this.adSpotKey,channelName:this.channelName,data:t});return}if(0==t.hasOwnProperty("pgm_only")&&s&&!this.id){var g=s.result;return void(s.success&&g.asi[this.adSpotKey]&&g.asi[this.adSpotKey].hasOwnProperty("cmps")&&Object.keys(g.asi[this.adSpotKey].cmps).length&&this.cbSuccess({isProductionData:!0,hybridMultiAdsEnable:this.hybridMultiAdsEnable,id:this.id,adSpotKey:this.adSpotKey,channelName:this.channelName,data:g}))}return t.hasOwnProperty("pgm_only")&&0==s.success?(ot.AdManager[this.id]&&ot.AdManager[this.id].requestThrottleManager&&ot.AdManager[this.id].requestThrottleManager.nextWLIndex(),this.cbError({status:s.statusCode,errorCode:"m108",errorDesc:s.errors,data:t})):this.cbSuccess({ad:r,xhr:e,data:t})}}else if("function"==typeof this.cbError){if(ot.AdManager[this.id]&&ot.AdManager[this.id].requestThrottleManager&&ot.AdManager[this.id].requestThrottleManager.nextWLIndex(),c=ne.m104,d="m104",resp&&resp.errors)switch(resp.errors[0].errorCode){case"AS16":case"AS19":case"L04":case"AS22":case"AS23":c=ne.m114,d="m114";break;case"AS20":c=ne.m116,d="m116";break;case"C30":c=ne.m125,d="m125";break;case"C33":case"C35":case"C36":c=ne.m124,d="m124";break;default:c=ne.m104,d="m104"}return this.cbError({status:resp.errors,errorCode:d,errorDesc:c,data:t})}}catch(e){if(ot.AdManager[this.id]&&ot.AdManager[this.id].requestThrottleManager&&ot.AdManager[this.id].requestThrottleManager.nextWLIndex(),"function"==typeof this.cbError){var y={};return"application/xml; charset=UTF-8"!=o&&(y=JSON.parse(r).errors),this.cbError({status:y,errorCode:"m111",errorDesc:y,data:t})}bt.debug("No cbError defined!")}}}],t&&mt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const yt=gt;var vt={LOG_LEVEL:{debug:1,log:2,info:3,trace:4,warn:5,error:6},consoleStyleOne:"color: white; background-color: #095aac; padding:1px 3px; border-radius: 3px; margin-right: 7px",logCache:[]};vt.logLevel=vt.LOG_LEVEL.debug,vt.logCacheEnable=!1,vt.maxCacheSize=1024,vt.loggingURL=null,vt.setLogLevel=function(e){vt.logLevel=e},vt.debug=function(e){vt.logLevel<=vt.LOG_LEVEL.debug&&(vt.cacheLog(e),window.console.debug("%cWebsdk log%c"+e,vt.consoleStyleOne,""))},vt.log=function(e){vt.logLevel<=vt.LOG_LEVEL.log&&(vt.cacheLog(e),window.console.log("%cWebsdk log%c"+e,vt.consoleStyleOne,""))},vt.info=function(e){vt.logLevel<=vt.LOG_LEVEL.info&&(vt.cacheLog(e),window.console.info("%cWebsdk log%c"+e,vt.consoleStyleOne,""))},vt.trace=function(e){vt.logLevel<=vt.LOG_LEVEL.trace&&(vt.cacheLog(e),window.console.trace("%cWebsdk log%c"+e,vt.consoleStyleOne,""))},vt.warn=function(e){vt.logLevel<=vt.LOG_LEVEL.warn&&(vt.cacheLog(e),window.console.warn("%cWebsdk log%c"+e,vt.consoleStyleOne,""))},vt.error=function(e){vt.logLevel<=vt.LOG_LEVEL.error&&(vt.cacheLog(e),window.console.error("%cWebsdk log%c"+e,vt.consoleStyleOne,""))},vt.setLogCacheing=function(e,t,i){vt.logCacheEnable=e,vt.maxCacheSize=t,vt.loggingURL=i},vt.cacheLog=function(e){if(vt.logCacheEnable){vt.logCache.push(e);var t=vt.logCache;if(vt.logCache.length>=vt.maxCacheSize){var i={method:"POST",timeout:5e3,pushLogData:t};(new yt).ajax(vt.loggingURL,i,(function(e,t){var i=e.response;i&&i.hasOwnProperty("success")&&!1===i.success||(vt.logCache=[])}),(function(e,t){vt.logCache=[]}))}}};const bt=vt;var At={addClass:function(e,t){e&&"string"==typeof t&&(e.className?-1===e.className.indexOf(t)&&(e.className=(e.className+" "+t).replace(/\s\s+/g," ")):e.className=t)},removeClass:function(e,t){e&&"string"==typeof t&&e.className.indexOf(t)>-1&&(e.className=e.className.replace(t,"").replace(/\s\s+/g," "))}},kt=function(e,t){var i=function(e,t){var i="";if(e&&"function"==typeof window.getComputedStyle){var a=window.getComputedStyle(e,null);a&&(i=(i=a.getPropertyValue(t)).toString().toLowerCase())}return i}(e,t)||0;return(i=i.toString()).indexOf("px")>-1&&(i=i.replace("px","")),parseFloat(i)};At.setStyle=function(e,t){if(e&&Z.isObject(t))for(var i=Object.keys(t),a=0,n=i.length;a<n;a++){var r=i[a];e.style[r]=t[r]}},At.getWidth=function(e){return e?Z.isNumber(e.offsetWidth)&&0!==e.offsetWidth?e.offsetWidth:kt(e,"width"):0},At.getHeight=function(e){return e?Z.isNumber(e.offsetHeight)&&0!==e.offsetHeight?e.offsetHeight:kt(e,"height"):0},At.show=function(e){e&&(e.style.display="block")},At.hide=function(e){e&&(e.style.display="none")},At.removeElement=function(e){if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(e){bt.trace(e)}},At.hasDOMParser=function(){return void 0!==window.DOMParser},At.getElement=function(e){var t=null;if(e)try{return document.querySelector("#".concat(e))}catch(e){return bt.log("Element Not Found"),null}return t},At.getInsData=function(e){var t=this.getElement(e);return t?{adspot:t.getAttribute("data-adspot-key"),refreshTime:t.getAttribute("data-refresh-rate"),dataAdSize:t.getAttribute("data-ad-sizes")}:null},At.createDOMElement=function(e,t){var i=document.createElement(e);for(prop in t)i.setAttribute(prop,t[prop]);return i},At.getDOMDetails=function(e){var t=e.id,i=e.dsKeys,a=e.subKeys,n=[],r={};if(!t)return{};var o=this.getElement(t);return i?"Array"!==i.constructor.name?o.dataset.hasOwnProperty(i)?(r[i]=o.dataset[i],r):{}:(n=i.slice(0),function(e,t,i){var a={},n=!(!i||t.length!==i.length);for(var r in t)e.hasOwnProperty(t[r])&&(a[n?i[r]:t[r]]=e[t[r]]);return a}(o.dataset,n,a)):o.dataset};var It={isDefaultCohortID:function(e){return"defaultCGI"==e},makeCohortBeaconHit:function(e){if(e&&!(e.length<1)){ot.locationData&&(ot.md_cn=ot.locationData.cn?ot.locationData.cn:"",ot.md_ct=ot.locationData.ct?ot.locationData.ct:"",ot.md_pn=ot.locationData.pn?ot.locationData.pn:"",ot.md_st=ot.locationData.st?ot.locationData.st:"");var t={ts:(new Date).getTime(),uid:ot.uid,ifa:ot.ifa};Z.generateGlobalMacrosList(t);for(var i=0;i<e.length;i++){var a="".concat(e[i],"?ts=").concat((new Date).getTime(),"&uid=").concat(t.uid?t.uid:"","&ifa=").concat(t.ifa?t.ifa:"","&st=").concat(t.md_st?t.md_st:"","&ct=").concat(t.md_ct?t.md_ct:"","&g=").concat(t.md_g?t.md_g:"","&ag=").concat(t.md_ag?t.md_ag:"","&dp=").concat(t.md_dp?t.md_dp:"","&msc=");(new yt).ajax(a,{method:"GET",timeout:ot.adRequestTimeout,checkJSON:!1},(function(e){bt.debug("Successfull hit becon for updating user info")}),(function(e){bt.error("Unable to hit becon for updating user info")}))}}},RequestForCohortID:function(e,t,i){return new Promise((function(a,n){var r=ot.uid,o=ot.ifa;if(r||o)if(e){for(var s,c=function(){s=e[d],s=r?"".concat(s,"?b=").concat(r):"".concat(s,"?i=").concat(o);var n=new XMLHttpRequest({mozSystem:!0});n.onload=function(){if(200!=n.status)bt.log("Network Error = "+n.status+" statusText = "+n.statusText),ot.cgi="defaultCGI",It.makeCohortBeaconHit(t),a();else{var e=JSON.parse(n.responseText);if(e.gp_id){localStorage.setItem("cgi",e.gp_id),localStorage.setItem("cgi_vr",i);var r=new Date;localStorage.setItem("cgi_exp",r.setHours(r.getHours()+24)),ot.cgi=e.gp_id,It.isDefaultCohortID(e.gp_id)&&It.makeCohortBeaconHit(t),a()}}},n.onerror=function(){bt.warn("Unable to Fetch Cohort ID. Using Default One"),ot.cgi="defaultCGI",It.makeCohortBeaconHit(t),a()},n.open("GET",s,!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send()},d=0;d<e.length;d++)c();a()}else ot.cgi="defaultCGI",It.makeCohortBeaconHit(t),a()}))}};const St=It;function Tt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function Ct(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Et(a.key),a)}}function Et(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=wt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wt(t)?t:t+""}const Lt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.customKeys={},this.isNativePlatform=!1,this.setPlatformIdentifier(),bt.log("Jio TargettingValidator - 'v1.0.0'")},t=[{key:"setPlatformIdentifier",value:function(){this.isNativePlatform="object"==("undefined"==typeof tvjsInterface?"undefined":wt(tvjsInterface))}},{key:"isTargetingMatched",value:function(e){var t=e;if(t){var i=this.checkCustomKVTargetting(t);return bt.info("%c Targeting - EXP_VALUE => "+i,"background: #222; color: #FF0"),i}return!0}},{key:"checkCustomKVTargetting",value:function(e){for(var t=/mdt\('(.*?)',\s*'(.*?)',\s*'(.*?)\'\)/gm,i=void 0,a=[];null!==(i=t.exec(e));)i.index===t.lastIndex&&t.lastIndex++,i.result=this.executeCustomKVExpression(i[1].trim(),i[2].trim(),i[3].trim()),a.push(i);for(var n=0;n<a.length;n++)e=e.replace(a[n][0],a[n].result);return e=e.replaceAll("and","&&").replaceAll("or","||"),this.booleanStringCompiler(e)}},{key:"booleanStringCompiler",value:function(e){for(var t="true"==(e=e.trim().split(" "))[0],i=1;i<e.length;i+=2)"&&"==e[i]?t&&(t="true"==e[i+1]):"||"==e[i]&&(t||(t="true"==e[i+1]));return t}},{key:"isKVPresentInList",value:function(e,t){for(var i in e)if(t=t.toString(),bt.log("isKVPresentInList => ",t.toUpperCase(),e[i]),t=t.split(",").map((function(e){return e.trim()})).join("|"),new RegExp("^"+t.toUpperCase()+"$","i").test(e[i].trim()))return bt.log("isKVPresentInList => Returns: TRUE"),!0;return bt.log("isKVPresentInList => Returns: FALSE"),!1}},{key:"executeCustomKVExpression",value:function(e,t,i){try{if(["pcat","scat"].includes(e))return bt.log("Evaluted to TRUE as key: "+e+" found!"),!0;t=(t=t.toString()).split(",").map((function(e){return e.toUpperCase()}));var a=Object.keys(this.customKeys).length,n=0,r=!1;if(a)for(var o in this.customKeys)if(new RegExp("^"+o+"$","i").test(e)){if("!="==i&&!this.isKVPresentInList(t,this.customKeys[o])||"=="==i&&this.isKVPresentInList(t,this.customKeys[o]))return!0;r=!0}else"!="==i?n++:r=!0;else if("!="==i)return!0;return!r&&n>0}catch(e){return bt.debug(e),!1}}},{key:"isTargetingExpressionMatch",value:function(e,t){try{var i;if(this.customKeys=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=Et(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Tt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t),bt.log("Custom key values input: "+JSON.stringify(t)+" expression is: "+e),i=this.isTargetingMatched(e),!this.isNativePlatform)return i;this.onMatchTargetingExpression(i)}catch(e){bt.log("something went wrong",e),this.onMatchTargetingExpression(!1)}}},{key:"onMatchTargetingExpression",value:function(e){try{bt.log("Dispatch in onMatchTargetingExpression: VAL => "+e),tvjsInterface.onMatchTargetingExpression(e)}catch(t){bt.log("Caught in onMatchTargetingExpression: VAL => "+e+", Error: "+t)}}}],t&&Ct(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Mt(e){return function(e){if(Array.isArray(e))return jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Ot(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Dt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=Rt(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ot(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Nt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Rt(a.key),a)}}function Rt(e){var t=function(e,t){if("object"!=Pt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Pt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pt(t)?t:t+""}var xt=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WEIGHT",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RANDOM",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),bt.log("LOG >>> AD_SELECTION Module Loaded!"),this.algo=t,this.adAlgoType=i,this.adbc=n,this._=f(),this.macros={ccb:!1},this.ignoreCampaignList=[],this.adBreakIgnoreCampaignList=[],this.adBreakIgnoreAdList=[],this.adCappingCampaignIgnoreList=[],this.adCappingAdIgnoreList=[],this.campaignCounter=0,this.matchedKVCount=0,this.customKeyValues=a,this.count=0,this.sizeArr=[]},t=[{key:"getAd",value:function(e){if(0!=Object.keys(e).length){var t=this,i=e.spotId,a=e.hybridMultiAdsEnable,n=e.callback,r=e.campaignsList,o=e.isFcap,s=void 0===o||o,c=e.CustomeKeyList,d=void 0===c?{}:c,l=e.macros,u=void 0===l?{}:l,h=e.duration,p=e.nextAdSelectionAdIgnoreId,m=e.nextAdSelectionCampaignIgnoreId,f=void 0===m?[]:m,g=e.campCategoryIgnoreList,y=void 0===g?null:g,v=e.backupAdIgnoreList,b=e.backUpAdIgnoreCampaignList;if(u=u instanceof Object&&u||{},this.macros=Dt(Dt({},{ccb:!1,advid:!1,ua:!1,uid:!1,vr:!1,ci:!1,co:!1,st:!1,DVM:!1,dvb:!1,mid:!1}),u),this.duration=void 0===h?-1:h,this.nextAdSelectionAdIgnoreId=p||[],this.nextAdSelectionCampaignIgnoreId=f,this.campCategoryIgnoreList=y,this.backupAdIgnoreList=v||[],this.backUpAdIgnoreCampaignList=b||[],this.hybridMultiAdsEnable=a,ae.clean(),i){var A=At.getElement(i);A&&A.hasAttribute("data-ad-sizes")&&(this.AdData=At.getInsData(i),this.dataAdSizes=this.AdData?this.AdData.dataAdSize:"",this.sizeArr=this.dataAdSizes.split(",")),A&&A.hasAttribute("data-fcap")&&A.removeAttribute("data-fcap")}if(this.ignoreCampaignList=ae.getIgnoreCampaignList(),0===("object"==Pt(r)?Object.keys(r):[]).length)return this.resetAdCappingIgnoreList(),void("function"==typeof n&&n({ad:{},modifiedData:r}));"DURATION-CLOSEST"==this.adAlgoType&&this.addCampaignIntoIgnoreList(r);var k=this.selectCampaign(r,this.algo);if(""==k)return this.resetAdCappingIgnoreList(),void("function"==typeof n&&n({ad:{},modifiedData:r}));this.selectedCampaign=r[k];var I=this._.get(this.selectedCampaign,"config.cart",!1);I||"SEQUENTIAL"!=this.adAlgoType&&"CUSTOM"!=this.adAlgoType||(this.adAlgoType="RANDOM"),I&&this.setAdAlgoType(I),this.mod=this._.get(this.selectedCampaign,"config.fcr",!1);var S=this.checkFrequencyCapForCampaign({campaignid:k,mod:this.mod,spotId:i,isFcap:s});if(bt.log("Selected campaign "+this.selectedCampaign+" is FCAP available: "+this.mod),S)this.getAd({spotId:i,hybridMultiAdsEnable:this.hybridMultiAdsEnable,callback:n,CustomeKeyList:d,campaignsList:r,isFcap:s,macros:this.macros,duration:this.duration,nextAdSelectionAdIgnoreId:this.nextAdSelectionAdIgnoreId,nextAdSelectionCampaignIgnoreId:this.nextAdSelectionCampaignIgnoreId,campCategoryIgnoreList:this.campCategoryIgnoreList,backupAdIgnoreList:this.backupAdIgnoreList,backUpAdIgnoreCampaignList:this.backUpAdIgnoreCampaignList});else{var T=this.selectAd(this.selectedCampaign.ads,k,i);if(0==Object.keys(T).length){var w=[].concat(Mt(this.adBreakIgnoreCampaignList),Mt(this.adCappingCampaignIgnoreList),Mt(this.ignoreCampaignList),Mt(this.backUpAdIgnoreCampaignList)),C=Object.keys(r);return this.campaignCounter==Object.keys(r).length||this.arrayContainsArray(w,C)?(this.resetAdCappingIgnoreList(),void("function"==typeof n&&n({ad:{},modifiedData:r}))):(this.campaignCounter++,void this.getAd({spotId:i,hybridMultiAdsEnable:this.hybridMultiAdsEnable,callback:n,CustomeKeyList:d,campaignsList:r,isFcap:s,macros:this.macros,duration:this.duration,nextAdSelectionAdIgnoreId:this.nextAdSelectionAdIgnoreId,nextAdSelectionCampaignIgnoreId:this.nextAdSelectionCampaignIgnoreId,campCategoryIgnoreList:this.campCategoryIgnoreList,backupAdIgnoreList:this.backupAdIgnoreList,backUpAdIgnoreCampaignList:this.backUpAdIgnoreCampaignList}))}var E=T.adId,L=this._.get(T,"mod.surl",[]);L.length?this._ajax(i,L[0],(function(e){if(304===e.status||200===e.status)if(bt.log("AD CAPPING >>> Success (Ad ID: ".concat(E,")")),t.adCapping({campaignsList:r,randomCampaignKey:k,adId:E,instructions:e.response,spotId:i}))t.getAd({spotId:i,hybridMultiAdsEnable:t.hybridMultiAdsEnable,callback:n,CustomeKeyList:d,campaignsList:r,isFcap:s,macros:t.macros,duration:t.duration,nextAdSelectionAdIgnoreId:t.nextAdSelectionAdIgnoreId,nextAdSelectionCampaignIgnoreId:t.nextAdSelectionCampaignIgnoreId,backupAdIgnoreList:t.backupAdIgnoreList,campCategoryIgnoreList:t.campCategoryIgnoreList,backUpAdIgnoreCampaignList:t.backUpAdIgnoreCampaignList});else{var a={ad:T.ad,adId:T.adId,"video-duration":T["video-duration"],campaignId:k,ccbString:t.ccbString,mod:t.mod};t.resetAdCappingIgnoreList(),t.adbc?"SEQUENTIAL"==t.adAlgoType&&t.count<t.adbc&&t.addIntoIgnoreListForRank(T.adId):"SEQUENTIAL"==t.adAlgoType&&t.addIntoIgnoreListForRank(T.adId),t.count++,"function"==typeof n&&n({ad:a,modifiedData:r})}else bt.log("AD CAPPING >>> Error other than 404 (Ad ID: ".concat(E,"). Skipping to next ad...")),t.adCappingAdIgnoreList.push(E),t.getAd({spotId:i,hybridMultiAdsEnable:t.hybridMultiAdsEnable,callback:n,CustomeKeyList:d,campaignsList:r,isFcap:s,macros:t.macros,duration:t.duration,nextAdSelectionAdIgnoreId:t.nextAdSelectionAdIgnoreId,nextAdSelectionCampaignIgnoreId:t.nextAdSelectionCampaignIgnoreId,backupAdIgnoreList:t.backupAdIgnoreList,campCategoryIgnoreList:t.campCategoryIgnoreList,backUpAdIgnoreCampaignList:t.backUpAdIgnoreCampaignList})}),!0):(bt.log("AD CAPPING >>> No becaon URL found for ad so (ad id: ".concat(E,") skip")),this.adCappingAdIgnoreList.push(E),this.getAd({spotId:i,hybridMultiAdsEnable:this.hybridMultiAdsEnable,callback:n,CustomeKeyList:d,campaignsList:r,isFcap:s,macros:this.macros,duration:this.duration,nextAdSelectionAdIgnoreId:this.nextAdSelectionAdIgnoreId,nextAdSelectionCampaignIgnoreId:this.nextAdSelectionCampaignIgnoreId,campCategoryIgnoreList:this.campCategoryIgnoreList,backupAdIgnoreList:this.backupAdIgnoreList,backUpAdIgnoreCampaignList:this.backUpAdIgnoreCampaignList}))}}}},{key:"checkFrequencyCapForCampaign",value:function(e){var t=e.campaignid,i=e.mod,a=e.spotId,n=e.isFcap,r=Z.pick(i,["i","c","cv"]);return!(!i||!n)&&(a&&At.getElement(a).setAttribute("data-fcap",t),ae.addCampaign(t,r),ae.isFrequencyCapped({selectedCampaign:t,limit:Z.pick(i.lmt,["i","c","cv"])||{}}))}},{key:"selectAd",value:function(e,t,i){switch(this.adAlgoType){case"DURATION":return this.selectAdDuration(e,t,!1,i);case"DURATION-CLOSEST":return this.selectAdDurationClosest(e,t,!1,i);case"DURATION-KV-PARITY":return this.selectAdDuration(e,t,!0,i);case"DURATION-CLOSEST-KV-PARITY":return this.selectAdDurationClosest(e,t,!0,i);case"KV-PARITY":return this.selectAdKVParity(e,t,i);case"SEQUENTIAL":return this.selectAdSequentially(e,t,i);case"CUSTOM":return this.selectAdCustomily(e,t,i);default:return this.selectAdRandom(e,t,i)}}},{key:"selectAdRandom",value:function(e,t,i){var a=[],n=Date.parse(new Date);for(var r in e)if(e[r].adId=r,-1==this.nextAdSelectionAdIgnoreId.indexOf(r)&&-1==this.backupAdIgnoreList.indexOf(r)&&-1==this.adCappingAdIgnoreList.indexOf(r)&&-1==ot.AdManager[i].fbIgnoreList.indexOf(r)&&(!e[r].hasOwnProperty("skipTime")||e[r].hasOwnProperty("skipTime")&&n>e[r].skipTime))if(this.sizeArr.length>0){var o=e[r].config.hasOwnProperty("wh")?e[r].config.wh:"";o&&this.sizeArr.includes(o)&&a.push(e[r])}else a.push(e[r]);if(0==a.length)return{};var s=this.getRndInteger(a.length);return bt.log("AD SELECTION >>> (Ads array length: ".concat(a.length,") (Random Value selected: ").concat(s,")")),ot.AdManager[i].fbIgnoreList.push(a[s].adId),a[s]}},{key:"matchCustomKeyValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._.get(e,"mod.trgt.cde","");return(new Lt).isTargetingExpressionMatch(t,this.customKeyValues)}},{key:"selectAdKVParity",value:function(e,t,i){var a=[],n=Date.parse(new Date);for(var r in e)if(e[r].adId=r,-1==this.adBreakIgnoreAdList.indexOf(r)&&-1==this.adCappingAdIgnoreList.indexOf(r)&&-1==ot.AdManager[i].fbIgnoreList.indexOf(r)&&(!e[r].hasOwnProperty("skipTime")||e[r].hasOwnProperty("skipTime")&&n>e[r].skipTime)&&this.matchCustomKeyValues(e[r]))if(this.sizeArr.length>0){var o=e[r].config.hasOwnProperty("wh")?e[r].config.wh:"";o&&this.sizeArr.includes(o)&&a.push(e[r])}else a.push(e[r]);var s=0;return 0==a.length?(this.adBreakIgnoreCampaignList.push(t),{}):(a.length>1&&(s=this.getRndInteger(a.length)),this.adBreakIgnoreAdList.push(a[s].adId),bt.log("AD SELECTION by 'AD-PARITY' >>> (Ads array length: ".concat(a.length,") (Random Value selected: ").concat(s,")")),ot.AdManager[i].fbIgnoreList.push(a[s].adId),a[s])}},{key:"selectAdDuration",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,n=0,r=Date.parse(new Date),o=[];for(var s in e)if(e[s].adId=s,e[s]["video-duration"]=parseInt(e[s].config.vd),-1==this.nextAdSelectionAdIgnoreId.indexOf(s)&&-1==this.backupAdIgnoreList.indexOf(s)&&-1==this.adBreakIgnoreAdList.indexOf(s)&&-1==this.adCappingAdIgnoreList.indexOf(s)&&-1==ot.AdManager[a].fbIgnoreList.indexOf(s)){var c=parseInt(e[s].config.vd);if(bt.log("Selected Ad Duration => "+c),void 0!==c&&0!=c&&(!e[s].hasOwnProperty("skipTime")||e[s].hasOwnProperty("skipTime")&&r>e[s].skipTime))if(c==n)if(1==i){if(!this.matchCustomKeyValues(e[s])){this.adBreakIgnoreAdList.push(s);continue}n=c,o.push(e[s])}else o.push(e[s]);else if(c>n&&c<=this.duration)if(1==i){var d=this.matchCustomKeyValues(e[s]);if(bt.log("Ad Selection - KV Condition => ",i,s),o=[],!d){this.adBreakIgnoreAdList.push(s);continue}n=c,o.push(e[s])}else(o=[]).push(e[s]),n=c}if(o.length>1){var l=this.getRndInteger(o.length);return this.adBreakIgnoreAdList.push(o[l].adId),ot.AdManager[a].fbIgnoreList.push(o[l].adId),o[l]}return 1==o.length?(this.adBreakIgnoreAdList.push(o[0].adId),ot.AdManager[a].fbIgnoreList.push(o[0].adId),o[0]):(this.adBreakIgnoreCampaignList.push(t),{})}},{key:"selectAdDurationClosest",value:function(e,t){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,r=[],o=Date.parse(new Date);for(var s in e)if(e[s].adId=s,e[s]["video-duration"]=parseInt(e[s].config.vd),-1==this.nextAdSelectionAdIgnoreId.indexOf(s)&&-1==this.backupAdIgnoreList.indexOf(s)&&-1==this.adBreakIgnoreAdList.indexOf(s)&&-1==this.adCappingAdIgnoreList.indexOf(s)&&-1==ot.AdManager[n].fbIgnoreList.indexOf(s)){var c=parseInt(e[s].config.vd);if(bt.log("Selected Ad Duration"+c),void 0!==c&&0!=c){var d=this.duration-c;if(!e[s].hasOwnProperty("skipTime")||e[s].hasOwnProperty("skipTime")&&o>e[s].skipTime)if(void 0===i)if(1==a){if(!this.matchCustomKeyValues(e[s])){this.adBreakIgnoreAdList.push(s);continue}i=c,r.push(e[s])}else(r=[]).push(e[s]),i=d;else if(d==i)if(1==a){if(r=[],!this.matchCustomKeyValues(e[s])){this.adBreakIgnoreAdList.push(s);continue}r.push(e[s])}else r.push(e[s]);else if(i+d==0&&d>=0||Math.abs(d)<Math.abs(i))if(1==a){if(!this.matchCustomKeyValues(e[s])){this.adBreakIgnoreAdList.push(s);continue}r.push(e[s])}else(r=[]).push(e[s]),i=d}}if(bt.log("Selected Ad by - ".concat(a?"Duration + MatchCustomKeyValues":"Duration"," :: ").concat(r)),r.length>1){var l=this.getRndInteger(r.length);return this.adBreakIgnoreAdList.push(r[l].adId),ot.AdManager[n].fbIgnoreList.push(r[l].adId),r[l]}return 1==r.length?(this.adBreakIgnoreAdList.push(r[0].adId),ot.AdManager[n].fbIgnoreList.push(r[0].adId),r[0]):(this.adBreakIgnoreCampaignList.push(t),{})}},{key:"selectCampaign",value:function(e){var t={},i=Date.parse(new Date);if(Object.keys(e).length){for(var a in e){var n=e[a].config&&e[a].config.hasOwnProperty("aci")?e[a].config.aci:"";-1!=this.nextAdSelectionCampaignIgnoreId.indexOf(a)||n&&this.campCategoryIgnoreList==n||-1!=this.adCappingCampaignIgnoreList.indexOf(a)||-1!=this.ignoreCampaignList.indexOf(a)||-1!=this.adBreakIgnoreCampaignList.indexOf(a)||-1!=this.backUpAdIgnoreCampaignList.indexOf(a)||(!e[a].hasOwnProperty("skipTime")||e[a].hasOwnProperty("skipTime")&&i>e[a].skipTime)&&e[a].hasOwnProperty("wt")&&e[a].wt>0&&(t[a]=parseInt(e[a].wt))}return Object.keys(t).length?"RANDOM"===this.algo?this.randomLogic(t):this.weightLogic(t):""}return null}},{key:"getAdListByWeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,a={},n=this._.get(this.selectedCampaign,"config.ignoreList",[]),r=Object.keys(this.selectedCampaign.ads),o=this.arrayContainsArrayForAds(r,n);this._.set(this.selectedCampaign,"config.ignoreList",o?[]:n);var s=this._.get(this.selectedCampaign,"config.ignoreList",[]),c=Date.parse(new Date);for(var d in e)if(e[d].adId=d,-1==this.nextAdSelectionAdIgnoreId.indexOf(d)&&-1==this.backupAdIgnoreList.indexOf(d)&&-1==this.adCappingAdIgnoreList.indexOf(d)&&-1==ot.AdManager[i].fbIgnoreList.indexOf(d)&&-1==s.indexOf(d)&&(!e[d].hasOwnProperty("skipTime")||e[d].hasOwnProperty("skipTime")&&c>e[d].skipTime)&&e[d].config.hasOwnProperty("wt")&&e[d].config.wt>0){var l=parseInt(e[d].config.wt);t?a[l]=d:a[d]=l}return a}},{key:"selectAdSequentially",value:function(e,t,i){var a=this.selectSequentialin(e,i);if(Object.keys(a).length>0){if(this.matchCustomKeyValues(e[a]))return ot.AdManager[i].fbIgnoreList.push(e[a].adId),e[a]["video-duration"]=parseInt(e[a].config.vd),e[a];this.addIntoIgnoreListForRank(e[a].adId);var n=this.selectSequentialin(e,i);return ot.AdManager[i].fbIgnoreList.push(e[n].adId),e[n]["video-duration"]=parseInt(e[n].config.vd),e[n]}return{}}},{key:"selectSequentialin",value:function(e,t){var i=this.getAdListByWeight(e,!0,t);return 0==Object.keys(i).length?{}:i[this.getHeighestRank(i)]}},{key:"addIntoIgnoreListForRank",value:function(e){var t=this._.get(this.selectedCampaign,"config.ignoreList",[]);t.includes(e)||t.push(e);var i=Object.keys(this.selectedCampaign.ads),a=this.arrayContainsArrayForAds(i,t);this._.set(this.selectedCampaign,"config.ignoreList",a?[]:t)}},{key:"selectAdCustomily",value:function(e,t,i){var a=this.selectAdCustomilyin(e,i),n={},r=null;if(Object.keys(a).length>0&&(n=a[0],r=a[1]),Object.keys(n).length>0||-1!=ot.AdManager[i].fbIgnoreList.indexOf(r)){if(this.matchCustomKeyValues(e[n]))return ot.AdManager[i].fbIgnoreList.push(n.adId),n;this.addIntoIgnoreListForRank(e[n].adId);var o=this.selectAdCustomilyin(e,i);return ot.AdManager[i].fbIgnoreList.push(o.adId),o}return{}}},{key:"selectAdCustomilyin",value:function(e,t){var i=this.getAdListByWeight(e,!1,t);if(0==Object.keys(i).length)return{};var a=this.weightLogic(i);return e[a]["video-duration"]=parseInt(e[a].config.vd),[e[a],a]}},{key:"getHeighestRank",value:function(e){var t=Object.keys(e);return Math.min.apply(Math,t)}},{key:"weightLogic",value:function(e){bt.debug("CampaignWeight :  ".concat(JSON.stringify(e)));var t=this.getRndInteger(function(e){return Object.values(e).reduce((function(e,t){return e+t}))}(e));for(var i in bt.log("Random_Num  : ".concat(t)),e){if(t<e[i])return bt.log("AD SELECTION >>> (Selected Campaign : ".concat(i,")")),i;t-=e[i]}}},{key:"_ajax",value:function(e,t,i,a){this.ccbString=Z.crc32((Date.now()||(new Date).getTime())+":"+ot.appName+":"+e+":"+100*Math.random(10)),t=t.replace(/\[ccb\]|\{ccb\}/gi,this.ccbString?encodeURIComponent(this.ccbString):"");var n=new XMLHttpRequest;n.timeout=ot.adRequestTimeout,n.onreadystatechange=function(){4==this.readyState&&i(a?this:this.status)},n.ontimeout=function(){bt.debug("Campaign beacon timeout!"+t),bt.log("errno=6&errDesc=Campaign beacon timeout!"),i("timeout")},n.open("GET",t,!0),n.send()}},{key:"getRndInteger",value:function(e){return Math.floor(Math.random()*e)}},{key:"addAdToIgnoreList",value:function(e){this.adBreakIgnoreAdList.push(e)}},{key:"adCapping",value:function(e){var t=e.campaignsList,i=e.randomCampaignKey,a=e.adId,n=e.instructions,r=e.spotId,o=[],s=Date.parse(new Date),c=t[i],d=t[i].ads[a];if(!this.isJsonValid(n))return this.adCappingAdIgnoreList.push(a),bt.log("AD CAPPING >>> JSON Not Valid For (Ad id: ".concat(a,")")),!0;var l=At.getInsData(r),u=this.hybridMultiAdsEnable?Z.getChannelName(l.adspot,r):l.adspot;n=JSON.parse(n).instructions;for(var h=0;h<n.length;h++){if("DC"==n[h].action){if(this.hybridMultiAdsEnable){for(var p in ot.ProductionAd.updateCampaignsConfig(u,Object.keys(t[i].ads).length),t[i].ads)o.push(p);ot.ProductionAd.updateIgnoredAds(u,o)}return delete t[i],!0}if("DA"==n[h].action)return this.hybridMultiAdsEnable&&(ot.ProductionAd.updateCampaignsConfig(u,1),o.push(a),ot.ProductionAd.updateIgnoredAds(u,o)),delete t[i].ads[a],0==Object.keys(t[i].ads).length&&(bt.log("AD CAPPING >>> No ad found for Campaign so (Campaign id: ".concat(i,"). Deleting campaign from storage ")),delete t[i]),!0;if("SC"==n[h].action){if(n[h]["action-expiry"]>0){var m=n[h]["action-expiry"];m>s?c.skipTime=m:this.adCappingCampaignIgnoreList.push(i)}else this.adCappingCampaignIgnoreList.push(i);if(this.hybridMultiAdsEnable){for(var f in ot.ProductionAd.updateCampaignsConfig(u,Object.keys(t[i].ads).length),t[i].ads)o.push(f);ot.ProductionAd.updateIgnoredAds(u,o)}return!0}if("SA"==n[h].action){var g=Object.keys(c.ads);if(n[h]["action-expiry"]>0){var y=n[h]["action-expiry"];y>s&&(d.skipTime=y,this.isAllAdsAreSkip(c.ads)&&(c.skipTime=y))}return this.adCappingAdIgnoreList.push(a),this.hybridMultiAdsEnable&&(ot.ProductionAd.updateCampaignsConfig(u,1),o.push(a),ot.ProductionAd.updateIgnoredAds(u,o)),this.arrayContainsArray([].concat(Mt(this.adCappingAdIgnoreList),Mt(this.getSkipAdList(c.ads))),g)&&this.adCappingCampaignIgnoreList.push(i),!0}return"noaction"==n[h].action?(c.hasOwnProperty("skipTime")&&delete c.skipTime,d.hasOwnProperty("skipTime")&&delete d.skipTime,!1):(this.adCappingAdIgnoreList.push(a),!0)}}},{key:"isJsonValid",value:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}},{key:"resetAdCappingIgnoreList",value:function(){this.campaignCounter=0,"RANDOM"==this.adAlgoType&&(this.adCappingAdIgnoreList=[],this.adCappingCampaignIgnoreList=[])}},{key:"arrayContainsArray",value:function(e,t){return 0!==t.length&&0!==e.length&&t.every((function(t){return e.indexOf(t)>=0}))}},{key:"arrayContainsArrayForAds",value:function(e,t){return 0!==t.length&&0!==e.length&&e.every((function(e){return t.indexOf(e)>=0}))}},{key:"isAllAdsAreSkip",value:function(e){var t=0;for(var i in e)e[i].hasOwnProperty("skipTime")&&t++;return Object.keys(e).length===t}},{key:"getSkipAdList",value:function(e){var t=[],i=Date.parse(new Date);for(var a in e)e[a].hasOwnProperty("skipTime")&&i<e[a].skipTime&&t.push(a);return t}},{key:"addCampaignIntoIgnoreList",value:function(e){for(var t in e){var i=Object.keys(e[t].ads);this.arrayContainsArray(this.backupAdIgnoreList,i)&&-1==this.backUpAdIgnoreCampaignList.indexOf(t)&&this.backUpAdIgnoreCampaignList.push(t)}}},{key:"setAdAlgoType",value:function(e){if("2"==e)this.adAlgoType="SEQUENTIAL";else{if("3"!=e)return;this.adAlgoType="CUSTOM"}}}],t&&Nt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ut=xt;var Vt=i(111),Bt={createStdEvent:function(e,t){var i;if(t)if("function"==typeof window.Event)try{i=new Event(e),t.dispatchEvent(i)}catch(e){bt.trace(e)}else try{(i=document.createEvent("Event")).initEvent(e,!0,!0),t.dispatchEvent(i)}catch(e){bt.trace(e)}},vastReadableTime:function(e){if(void 0!==e&&"number"==typeof e&&Number.isFinite(e)&&e>=0){var t=0,i=0,a=0,n=Math.floor(e%1e3);return n=0===n?"000":n<10?"00"+n:n<100?"0"+n:n.toString(),(t=Math.floor(1*e/1e3))>59&&(t-=60*(i=Math.floor(1*t/60))),t=0===t?"00":t<10?"0"+t:t.toString(),i>59&&(i-=60*(a=Math.floor(1*i/60))),i=0===i?"00":i<10?"0"+i:i.toString(),(a=0===a?"00":a<10?"0"+a:a>23?"00":a.toString())+":"+i+":"+t+"."+n}return"00:00:00.000"},generateCacheBusting:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"+Math.floor(Date.now()),a=0;a<e;a++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},getNodeValue:function(e,t){for(var i=e.childNodes,a="",n=0,r=i.length;n<r;n++)i[n]&&i[n].textContent&&(a+=i[n].textContent.trim());if(a){if(/^<!\[CDATA\[.*\]\]>$/i.test(a)&&(a=a.replace("<![CDATA[","").replace("]]>","")),!t)return a;if(/^(https?:)?\/\//i.test(a))return a}return null},RFC3986EncodeURIComponent:function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))},isValidDuration:function(e){return!!/^\d+:\d+:\d+(\.\d+)?$/i.test(e)},convertDurationToSeconds:function(e){var t=e.split("."),i=(t=t[0]).split(":");return 60*parseInt(i[0])*60+60*parseInt(i[1])+parseInt(i[2])}},_t=/^\d+:\d+:\d+(\.\d+)?$/i,Ft=/^\d+%$/i;Bt.isValidOffset=function(e){return!(!_t.test(e)&&!Ft.test(e))},Bt.convertOffsetToSeconds=function(e,t){var i=0;if(_t.test(e)){var a=e.split("."),n=(a=a[0]).split(":");i=60*parseInt(n[0])*60+60*parseInt(n[1])+parseInt(n[2])}else if(Ft.test(e)&&t>0){var r=e.split("%");r=parseInt(r[0]),i=Math.round(t*r/100/1e3)}return i},Bt.logVideoEvents=function(e,t){["loadstart","durationchange","loadedmetadata","loadeddata","canplay","canplaythrough"].forEach((function(i){e.addEventListener(i,(function(e){e&&e.type&&bt.log(t+" player event - "+e.type)}))}))},Bt.openWindow=function(e){try{e=-1===e.indexOf("://")?"https://"+e:e,window.open(e,"width=".concat(ot.sw,", height=").concat(ot.sh,", scrollbars=yes"))}catch(e){bt.trace(e)}},Bt.openInApp=function(e){try{e=-1===e.indexOf("://")?"https://"+e:e,window.location.assign(e)}catch(e){bt.trace(e)}},Bt.click=function(e,t){if(!window.focus)return!0;var i="string"==typeof e?e:e.href;if(i.indexOf(ot.deeplinkingHostName),Z.clickControlEnabled(),!ot.clkSelf)try{Z.isBrandPageURL(e)?Z.renderBrandPage(e):t?Bt.openInApp(i):Bt.openWindow(i),bt.debug("PopUp open called",i)}catch(e){bt.log("Cant able to open the url page",e)}return!1},Bt.setOptions=function(e){var t={name:"view",data:{type:"url",url:e}},i=document.createElement("a"),a="";i.style="display: none;",i.href=decodeURI(e);var n=Bt.getUriParams(i,"__");e=n.hasOwnProperty("r")?decodeURIComponent(n.r):i.href,a=i.href.replace("__r="+n.r,"");var r=document.createElement("a");if(r.href=e,r.hostname===ot.deeplinkingHostName){if(a&&-1===a.indexOf(ot.deeplinkingHostName)){var o=new Image;o.src=a,document.body.appendChild(o)}return{name:-1!==r.pathname.indexOf("/")?r.pathname.replace("/",""):r.pathname,data:Bt.getUriParams(r)}}return t},Bt.getUriParams=function(e,t){var i,a={},n=e.search&&0===e.search.indexOf("?")?e.search.replace("?","").split(t||"&"):e.search;for(var r in n)n.hasOwnProperty(r)&&(a[(i=n[r].split("="))[0]]=i[1]);return a||null},Bt.imagePattern=/^image\/(gif|jpeg|jpg|png)$/i;const Kt=Bt;function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Gt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ht(a.key),a)}}function Ht(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=zt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zt(t)?t:t+""}function qt(e,t){var i=document.getElementById(e).that;if(i){if(i.dom&&"INS"===i.dom.tagName||t.preventDefault(),i.fullAdClick&&i.dom&&"INS"===i.dom.tagName)return t.preventDefault(),void i.callback.click();if(i.rowAdClick){var a=function(e,t){for(;e.parentNode;)if("A"===(e=e.parentNode).tagName)return e;return null}(t.target);if(null!=a&&a.classList.value.includes(i.rndFullCtaEvent))return t.preventDefault(),void i.callback.click()}var n=t.srcElement||t.target;if(n.classList.contains(i.clickClass)||n.classList.contains(i.secClickClass)||n.classList.contains(i.rndCtaEvent)||n.classList.contains(i.rndSecCtaEvent)||n.classList.contains("jads-custom-click-btn")){var r=!!n.classList.contains(i.rndSecCtaEvent);t.preventDefault(),i.callback.click(r)}else(n.classList.contains(i.rndSkipClose)||n.classList.contains("jads-custom-close-btn"))&&(t.preventDefault(),i.callback.close())}}var Jt=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.callback,a=t.dom,n=t.clickClass,r=t.closeClass,o=t.secClickClass,s=t.fullAdClick,c=void 0!==s&&s,d=t.rowAdClick,l=void 0!==d&&d,u=t.rndSkipClose,h=t.rndCtaEvent,p=t.rndSecCtaEvent,m=t.rndFullCtaEvent,f=t.id;this.callback=i,this.dom=a,this.clickClass=n,this.closeClass=r,this.secClickClass=o,this.fullAdClick=c,this.rowAdClick=l,this.rndSkipClose=u,this.rndCtaEvent=h,this.rndSecCtaEvent=p,this.rndFullCtaEvent=m,this.id=f},(t=[{key:"clickBind",value:function(){bt.log("Ad click listener binding"),0==(this.dom.getAttribute("data-isClick-listener-attached")||!1)&&(this.dom.setAttribute("data-isClick-listener-attached",!0),this.dom.addEventListener("click",qt.bind(this,this.id))),this.dom.that=this}},{key:"clickUnbind",value:function(){null!=this.dom&&(bt.log("Ad click listener unbinding"),this.dom.removeEventListener("click",qt))}}])&&Gt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Wt=Jt;function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Qt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Zt(a.key),a)}}function Zt(e){var t=function(e,t){if("object"!=Yt(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Yt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yt(t)?t:t+""}var Xt=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.enter,a=t.exit,n=t.once,r=t.selector,o=t.visibilityHandler;this.enter=i,this.exit=a,this.once=n,this.selector=r,this.init(),this.visibilityHandler=o,this.visible(),this.isOnce=!1},(t=[{key:"init",value:function(){var e=this;this.intersectionObserver=new IntersectionObserver((function(t){console.log("inviewTest percentage",Math.round(100*t[0].intersectionRatio)),console.log(t[0],"inviewTest"),!0===t[0].isIntersecting?(0==e.isOnce&&e.onceEnter(t[0].target),"function"==typeof e.enter&&1==e.isOnce&&e.enter(t[0].target)):"function"==typeof e.exit&&e.exit(t[0].target)}),{threshold:[.5]}),this.intersectionObserver.observe(document.querySelector(this.selector))}},{key:"onceEnter",value:function(e){"function"==typeof this.once&&(this.once(e),this.isOnce=!0)}},{key:"visible",value:function(){document.addEventListener("visibilitychange",this.visibilityHandler)}}])&&Qt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const $t=Xt;function ei(e){return function(e){if(Array.isArray(e))return ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ti(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ti(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var ii,ai,ni,ri,oi,si,ci,di;const li=(ii={},ai={},ni={},oi=function(){for(var e,t,i,a,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(0===r.length)throw Error("Timeout.set() requires at least one argument");if("function"==typeof r[0]?(t=r[0],i=r[1],a=r.slice(2),e=t.toString()):(e=r[0],t=r[1],i=r[2],a=r.slice(3)),!t)throw Error("Timeout.set() requires a function parameter");return ri(e),ii[e]=setTimeout((function(){return ni[e]=!1,t.apply(void 0,ei(a))}),i||0),ai[e]=ai[e]||i,ni[e]={func:t,key:e,ms:i,params:a,paused:!1,startTime:(new Date).getTime(),timeSpentWaiting:0},function(){return ci(e)}},di=function(e){return si(e)&&ni[e].paused},{clear:ri=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];clearTimeout(ii[e]),delete ii[e],t&&(delete ni[e],delete ai[e])},executed:ci=function(e){return!1===ni[e]},exists:si=function(e){return e in ii||void 0!==ni[e]},pause:function(e){return!(!ni[e]||di(e))&&(ri(e,!1),ni[e].paused=!0,ni[e].timeSpentWaiting=(new Date).getTime()-ni[e].startTime,ni[e].timeSpentWaiting)},paused:di,pending:function(e){return si(e)&&!ci(e)},remaining:function(e){if(!ni[e])return 0;var t=ni[e],i=t.ms,a=t.startTime,n=t.timeSpentWaiting;return di(e)?i-n:Math.max(0,a+i-(new Date).getTime())},restart:function(e){if(!ni[e])return!1;var t=ni[e],i=t.func,a=t.params,n=t.paused;return ri(e,!1),n&&(ni[e].paused=!1),oi.apply(void 0,[e,i,ai[e]].concat(ei(a)))},resume:function(e){if(!ni[e])return!1;var t=ni[e],i=t.func,a=t.ms,n=t.params,r=t.paused,o=t.timeSpentWaiting;return!!r&&oi.apply(void 0,[e,i,a-o].concat(ei(n)))},set:oi}),ui=function(e){var t=e.placementId,i=e.pId,a=e.callback,n=void 0===a?function(){}:a,r=e.viewableCB,o=void 0===r?function(){}:r,s=e.firstTimePlay,c=void 0===s?function(){}:s,d=e.resume,l=void 0===d?function(){}:d,u=e.pause,h=void 0===u?function(){}:u,p=e.refreshTime,m="#".concat(t);p=(0==p||null==p||p<0?0:1e3*(p<30?30:p))||0,bt.debug("InViewHandler ".concat(t," Ad Refresh In ").concat(p/1e3," Sec"));var f=(new Date).getTime(),g=document.querySelector(m).firstElementChild;if("#interstitalModalContId"==m&&(g=document.querySelector(m)),!g){var y=document.getElementById(t).getAttribute("data-container-id");y&&(g=document.getElementById(y)).setAttribute("data-placementId",t)}g.setAttribute("data-viewId",f);var v=g.tagName.toLowerCase(),b="".concat(v,'[data-viewId="').concat(f,'"]'),A=!1,k=0;new $t({enter:function(e){bt.log("enter Becaon Fire for preexisting element"),1==ot.enableAMP?1==ot.initialVisibilityAMP&&(c(),n()):void 0!==ot.AdManager[i||t]&&ot.AdManager[i||t].autoplay&&(c(),n()),p>0&&(bt.log("Ad: In View handler : ".concat(e.parentElement.id)),li.exists(b)?(li.resume(b),l()):li.set(b,(function(){li.clear(b);var e=null,a=document.querySelector(b),n=!1;a&&a.parentElement&&(e=a.parentElement.getAttribute("id")),!e&&a&&(e=a.getAttribute("data-placementId")),a&&Z.overlayInviewDetect(a)&&(void 0!==ot.AdManager[i||t]&&void 0!==(i||t)&&ot.adObject[i||t].hasOwnProperty("jioAdsMediaPlayer")?(n=ot.adObject[i||t].jioAdsMediaPlayer.player.paused,ot.adObject[i||t].jioAdsMediaPlayer.vastTracker.close(),ot.adObject[i||t].jioAdsMediaPlayer.destroy()):void 0!==ot.adObject[t]&&ot.adObject[t].hasOwnProperty("videoad")&&(ot.adObject[t].isShown=!1,n=ot.adObject[t].videoElement.paused,delete ot.adObject[t].videoElement,delete ot.adObject[t].videoad,ot.adObject[t].destroy()),void 0!==(e=i||e)&&(Ce.onAdRefresh({placementId:e}),En.renderAd(e,n)))}),p)),A||(k=setTimeout((function(){o(),bt.log("@@@@@ Timeout viewable is working @@@@@"),A=!0}),"1000"))},exit:function(e){bt.log("exit"),clearTimeout(k),null!=e.parentElement&&bt.log("Ad: Not In View handler : ".concat(e.parentElement.id)),1==ot.enableAMP?1==ot.initialVisibilityAMP&&h():h(),p>0&&(null!=e.parentElement&&bt.log("Ad: Not In View handler : ".concat(e.parentElement.id)),li.pause(b),h())},once:function(e){bt.log("once"),bt.log("Becaon Fire when element came to inview: ".concat(e.parentElement.id)),1==ot.enableAMP?1==ot.initialVisibilityAMP&&(c(),n(e.parentElement.id)):(i||t)&&void 0!==ot.AdManager[i||t]&&(ot.AdManager[i||t].autoplay||ot.adObject[i||t].hasOwnProperty("jioAdsMediaPlayer"))&&(c(),n(e.parentElement.id))},visibilityHandler:function(){(i||t)&&ot.adObject[i||t]&&(ot.adObject[i||t].hasOwnProperty("jioAdsMediaPlayer")&&!ot.adObject[i||t].jioAdsMediaPlayer.stopVisibilityCheck||ot.adObject[t]&&!ot.adObject[t].stopVisibilityCheck)&&(document.hidden?(bt.log("Ad: Not In View Handler : "+t),li.pause(b)):(bt.log("Ad: In View Handler : "+t),li.resume(b)))},selector:b})};function hi(e){return hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hi(e)}const pi=function(e){return e?"object"!=hi(e)?e:e.mainimage||e.mediumimage:null};function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function gi(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,yi(a.key),a)}}function yi(e){var t=function(e,t){if("object"!=mi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=mi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mi(t)?t:t+""}var vi=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.videoContainer,a=t.callback,n=t.skip,r=t.vce,o=t.isHorizontalMode,s=void 0!==o&&o,c=t.macros,d=void 0===c?{}:c,l=t.clickmacros,u=void 0===l?{}:l,h=t.isLinkFallback,p=void 0===h?"":h,m=t.clickTrackers,f=void 0===m?[]:m,g=t.impressionTracker,y=void 0===g?[]:g,v=t.isRewarded,b=void 0!==v&&v,A=t.rewardIn,k=t.ctatext,I=t.touchCreative,S=t.type,T=t.placementId,w=t.isCtaurl,C=void 0!==w&&w,E=t.oia,L=t.modalContainer,M=void 0===L?null:L,j=t.inst,P=void 0!==j&&j,O=t.compDivInfo,D=t.refreshRate,N=void 0===D?0:D,R=t.fbCallback,x=t.mAd;this.modalContainer=M,this.videoContainer=i,this.callback=a,this.playerContainerId="jads_player_cont_"+Kt.generateCacheBusting(12),this.rndPlayer="jads_player_"+Kt.generateCacheBusting(12),this.rndPlay="jads_play_qs",this.rndMute="jads_mute_qs",this.rndProgress="jads_progress_qs",this.rndFullCtaEvent="jads_full_cta_event_"+Kt.generateCacheBusting(12),this.rndCtaEvent="jads_cta_event_"+Kt.generateCacheBusting(12),this.rndSecCtaEvent="jads_sec_cta_event_"+Kt.generateCacheBusting(12),this.rndTime="jads_media_time",this.rndMediaCont="jads_media_cont",this.rndSkipClose="jads_close_qs"+Kt.generateCacheBusting(12),this.rndDispNone="jads-d-none",this.companionInfo=[],this.stopVisibilityCheck=!1,O&&this.companionInfo.push(JSON.parse(O)),this.skip=parseFloat(n),this.vce=r,this.oia=E,this.userSkipEnable=!1,this.start=!1,this.macros=d,this.clickmacros=u,this.maxBitrate=1080,this.isRewarded=b,this.videoDuration=0,this.rewardIn=A,this.rewardAchieved=!1,this.isHorizontalMode=s,this.isLinkFallback=p,this.isCtaurl=C,this.clickTrackers=f,this.impressionTracker=y,this.ctatext=k,this.endCard=null,this.isJSONResponseVideo=!1,this.closingTime=0,this.touchCreative=I,this.type=S,this.placementId=T,this.VASTClient=new Vt.VASTClient,this.secCtaUrl="",this.isShown=!1,this.secCtaTracker=[],this.clickEnabled=1,this.clickTimer=0,this.count=0,this.firstQuartile=0,this.firstToken=0,this.midQuartile=0,this.midToken=0,this.thirdQuartile=0,this.thirdToken=0,this.companionVariationsNode=[],this.inst=P,this.endCardEnabled=!1,this.placementNode=document.getElementById(this.placementId),this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):(2==this.vce.type||3==this.vce.type)&&(this.clickEnabled=0)),this.refreshRate=N,this.fbCallback=R,this.mAd=x},t=[{key:"setVideoEndcard",value:function(e){this.endCard=e,this.isJSONResponseVideo=!0}},{key:"initalizeCache",value:function(e){if(this.response=e,this.respDuration=Math.round(this.response.ads[0].creatives[0].duration),this.initalizeAdObject(),this.refreshRate>=30&&(this.respDuration>this.refreshRate?this.refreshRate=this.respDuration+1:this.respDuration<this.refreshRate?this.refreshRate=this.refreshRate:this.refreshRate=this.respDuration+1),this.isRewarded)this.rewardIn?this.skip=this.rewardIn?this.rewardIn:this.respDuration:this.skip=this.skip?this.skip:this.respDuration;else{var t=this.response.ads[0].creatives[0].skipDelay;isNaN(this.skip)&&null==t?this.skip=null:this.skip>0?this.skip=this.skip:this.skip=Math.round(t)}this.skip>this.respDuration&&(this.skip=this.respDuration),this.ctatext=this.response.ads[0].creatives[0].adParameters?this.response.ads[0].creatives[0].adParameters[2].jctatext:"Visit Advertiser",bt.log("xxx skip = ",this.skip),this.initalizeVastTracker()}},{key:"selectMediaFile",value:function(){try{var e=this,t=e.creative.linear.mediaFiles.filter((function(t){return(-1!=t.mimeType.indexOf("video")||-1!=t.mimeType.indexOf("audio"))&&t.bitrate<=e.maxBitrate}));return(t.length>0||(t=e.creative.linear.mediaFiles.filter((function(e){return-1!=(-1!=e.mimeType.indexOf("video")||-1!=e.mimeType.indexOf("audio"))}))).length>0)&&(t.sort((function(e,t){return t.bitrate-e.bitrate})),t[0])}catch(e){return!1}}},{key:"setCompanionObject",value:function(e,t,i){var a={},n={};"image"==t?(a=e.staticResources[0],n.companionUrl=a.url):"html"==t&&(a=e.htmlResources[0],n.companionUrl=a);try{n.creativeType=t,n.id=e.id,n.divID=i.companionDivId,n.adSlotID=e.adSlotID,n.height=e.height?e.height:100,n.width=e.width?e.width:200}catch(e){}n.companionVastTracker=new Vt.VASTTracker(this.VASTClient,null,this.creative.companion,e),this.companionVariationsNode.push(n)}},{key:"fetchCompanionAd",value:function(){var e=null;if(this.ad.creatives.length>1){for(var t=this.creative.companion.variations,i=t.length-1;i>=0;i--){if(t[i].staticResources.length>0){this.companionVariationsNode=t[i],e=t[i].staticResources[0].url,this.endCardType=!1;break}if(t[i].htmlResources.length>0){this.companionVariationsNode=t[i],e=t[i].htmlResources[0],this.endCardType=!0;break}}this.companionVastTracker=new Vt.VASTTracker(this.VASTClient,null,this.creative.companion,this.companionVariationsNode)}return e}},{key:"getCompanionVariation",value:function(){if(this.ad.creatives.length>1){var e=this.creative.companion?this.creative.companion.variations:"";if(e)for(var t=0;t<e.length;t++)if(void 0!==e[t].staticResources&&e[t].staticResources.length>0)for(var i=0;i<this.companionInfo.length;i++)(n=this.companionInfo[i])&&("adSlotID"in n&&null!==e[t].adSlotID&&n.adSlotID==e[t].adSlotID||"height"in n&&"width"in n&&n.height==e[t].height&&n.width==e[t].width)&&this.setCompanionObject(e[t],"image",n);else if(void 0!==e[t].htmlResources&&e[t].htmlResources.length>0)for(var a=0;a<e.length;a++){var n;("adSlotID"in(n=this.companionInfo[a])&&null!==e[t].adSlotID&&n.adSlotID==e[t].adSlotID||"height"in n&&"width"in n&&n.height==e[t].height&&n.width==e[t].width)&&this.setCompanionObject(e[t],"html",n)}}}},{key:"showCompanion",value:function(e){var t=this;if(e)for(var i=0;i<e.length;i++){var a=e[i],n=document.getElementById(a.divID).firstElementChild;"html"===a.creativeType?n.innerHTML+='<div><object type="text/html" data="'.concat(a.companionUrl,'" data-id="').concat(a.id,'"></object></div>'):n.innerHTML+='<div><img src="'.concat(a.companionUrl,'" width="').concat(a.width,'" height="').concat(a.height,'" data-id="').concat(a.id,'"></div>'),n.querySelectorAll("[data-id]").forEach((function(e){e.addEventListener("click",(function(e){try{var i=e.currentTarget.getAttribute("data-id")||null;t.adClick("companion",i)}catch(e){}}))}))}}},{key:"adClick",value:function(e,t){var i;if("companion"==e)for(var a=0;a<this.companionVariationsNode.length;a++)t&&this.companionVariationsNode[a].id==t&&(i=this.companionVariationsNode[a].companionVastTracker);else i=this.vastTracker;var n=null;null!=i.clickThroughURLTemplate?(i.click("",this.clickmacros),n=i.clickThroughURLTemplate||i.clickThroughURLTemplate.url):i.trackURLs(i.clickTrackingURLTemplates,this.clickmacros),null!==n&&(Kt.click("string"==typeof n?n:n.url,!1),this.callback.onAdClicked(!0,n))}},{key:"initCompanionTracker",value:function(){for(var e=0;e<this.companionVariationsNode.length;e++)this.companionVariationsNode[e].divID&&ui({placementId:this.companionVariationsNode[e].divID,callback:this.fireViewImpression.bind(this),refreshTime:0})}},{key:"fireImpression",value:function(e){for(var t=0;t<this.companionVariationsNode.length;t++)this.companionVariationsNode[t].divID==e&&this.companionVariationsNode[t].companionVastTracker.trackImpression(this.macros)}},{key:"fireViewImpression",value:function(e){this.isShown||this.fireImpression(e)}},{key:"hideCompanion",value:function(){if(this.companionInfo.length>0)for(var e=0;e<this.companionInfo.length;e++){var t=this.companionInfo[e];null!=(t=document.getElementById(t.companionDivId))&&(t.innerHTML="<div></div>")}}},{key:"initalizeVastTracker",value:function(){try{if(this.ad=this.response.ads[0],this.creative={linear:null,companion:null},this.creative[this.ad.creatives[0].type]=this.ad.creatives[0],this.ad.creatives.length>1)for(var e=0;e<this.ad.creatives.length;e++)this.creative[this.ad.creatives[e].type]=this.ad.creatives[e];var t=this.selectMediaFile();if(t){this.mediaFile=t.fileURL,this.mimetype=t.mimeType,this.vastTracker=new Vt.VASTTracker(this.VASTClient,this.ad,this.creative.linear);var i=!1;!this.companionInfo.length>0&&(i=this.fetchCompanionAd()),this.companionInfo.length>0&&(this.getCompanionVariation(),this.initCompanionTracker()),i?this.endCard=pi(i,this.ad.adType&&this.ad.adType):"undefined"!=this.ad.adType&&"audio"==this.ad.adType&&(this.isQwerty,this.endCard="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAAC4CAMAAACl+MVYAAAAflBMVEUAAADs7Pvs7Pvs7Pvs7Pvs7Pvs7Pvs7Pvl5fTa2unS0uHKytmyssCvr77j4/Kioq60tMPV1eTn5/bX1+bp6fitrbu4uMbe3u3c3OvIyNfNzdyqqrjg4O/GxtXExNPAwM+2tsW7u8mnp7TPz97Dw9G+vsykpLCfn6qXl6OamqaMWiE6AAAAB3RSTlMAjyjb2LiWDIxgQQAADE5JREFUeNrsmu12mkAQhtP0Q3YHWREEFgHlK5r7v8HOytqatCoyDKVpn+Zktaf985z3ndkQnwzPn76ECybWzh9lvWAi/PLp+cnyaXHBx/LHaBD51Pn7umAjdGZAuGDjK2v+ZhA/9hBiBp8XTMzGH6vB56dvCy6cGbHg4tvT5wUHMxl/Z/gG4eenBQez88dnkEXgjMbfGaZByCNwlv54DLIInKk/FoMcAmfrj8Mgg8B5XV/esxiZ8QXO2x+DwZEFzri/BoYWjylwZH/eBfM1OLLA9SjisjhJxDuSJM6ui8yEiKc2yCFwTXYXJ+ImSfw7izEYpIgnNMggkOjvQt5dic5barCkUmTTGOQQGBLkZbF4COzzxf8GQ3+J4YIMh8CQkD0xgJ85FACQL/NLib7wOA2yCBwcPjEYG0MJ0FZqm8Ml0rnBggiHQHr4BscwBXDV8hDBGxI+gxwC14P0JYJM4mUAUFQvhz28QbAtEg6BIUEfFR+QYntUGi6JuRYJi0BCecmkcOJwdEEXcCZ1EL4S0wUS/cViNKCjfX3dLzcr/XOJ8BjkELimtJfeYIs6HpfuYQUdguk+zSEwJLSXjoSOlXp9bSA6QIfnIAxjkEPgo/6EZdQRuHttV8eD1scWDLWDMJSYQ+CaMv3onAN4AK2OVeEeNjkA+DyPFTgEhoTpN+IIbA4uLI/HCqJKFfYSw1BiBoGk+tKpwdIe9u3r0QXQ28qOQIYSkwXSCpyJ0UnhzF5BW4LGL1VKlqerLAJp448O/KB8wW+RqjQcIuE4DBEkCxwaQIyJxE4lAmFMYAVQHdwGXJVnDkMEOQSGfXJXA1Lj+uAggDO7g4a2Adgcdqlj4N8jdIE91oaEDl8w4csuhbrC9uauqhp7iWEvMV1geFffOSA5gOAj8GuUmG9V9bItNYDvMUSQQ6Bzh8ROKN1sG5CClUDWetcWGhCReAwRpAgcFMCshhNFU56euAeCm0CmdlokE0SQLvB2e32wRArZ5JCKKfD9wBwJewTpAte39Ano0Pi1UZWru2RMR+wwX2XoAp3rxCl0FCs0l1c7MKRiSjLeCNIFhjfyl4Jlr5Y5wA4DaJBiSjzWKUgXeGv7gmX3otRWo8cVnAjElHiMEaQLDG81GBBdNPsXheRQlC/2OaeYkoQxgnSBzi1qI9BVJ1pzw1VV8fjPI8EJ8iKhR5BDIAbwTgR1WykUVwK0Clk+sEcC35dv8P2AUGJqBFkErp2b+IAUG+U2eDYKieCEvC9PXmGIRI/pJkMX6NzGA0O+2YCh3G4jsAywR3AY83SYLjB07hCAQS+72Vfgd0swQB9BoUfvMItAx3LvKqjdqoE3XNcne/KQwoQeQQ6BoXOXBDqiagcXyAH6SAozagRZBK6d+0gwtEtVtXAm9a8+FX0In1Ji+hqhC3R6kJ38mat0tbujz8aPJ4QxscMEgZQG24f5W2XY2PYS4kcIoUfqMEEgpcFILACgUoZKA9QBIX6kEMakDrMI7PkhBAngKoMLaUBYvlSDHqXDHALDvr9FTyFfmgZrXxD8kQ3GhA4TBNIa7NlP/uhyE0khKOOPPgg9Qoc5BPYMICLt7iD5oxuMGTrMLNA7N9THmlH7S2+xNyuBIeFzWAR/FIMZYQgSBBJGYCJ6IEdB9CAhDEGCQHqD+f0h/B2eXmAsLGwL5MFFEs9IYJ8RyD8AHx2Dw4Ygi8D1OA2WI0LoMGEIMgqMpypw/xLH8xE4zg6Wo0LYw4QhyCbQmzCAvSPozUVgOMotWo4M4S5N2CJcApPxA6i1vIl/v8NzEdhjh4wfwDyKypwYQcIWoQmkj0B6AHcRUgIhggxDkE1gNk4AoS3kmbSMDAUlgtlfIzAe5YcQjcLg4u1J4U5eJRB3iP8agQmxwdYfouUFhTU4tMPJPASGI+yQvv7OAlNdmwMipBneYYY1zCLQG6HBen8i7/xF+6joDOLf6cEd9mYhcE0X6PfzZwXad2VqDOKLqB7aYY/hHsMhMCMLzFcWe/UrV8hpozT4YjdUYPZRBPb1ZwUiOsI3+7Rzub8WwY8iMKYJtP6sQEtdmgyaEuPZDBQYz0Ig4Rp4e4fUu4529U5gWkukteZKI/L3BCwXwekFJsMEXoq7FLjrxNWmxXWXTxgmMPkgAq/sECPIfffHCFwhLZ4azwJFXu+w/0EEioEC3V85JdBFiu4flPYYuIb/TYFYWtddGZPd0bpu9F9gf4FIjq80dhiPVMoGj/8CHxIo8VUjJeABUhb/BX5v71y7E4WBMGy7l1AiN0GFoFIE/P8/cScQu1rdXSG87cD27TkQsJ+eMzO5kMwMBKi+AP4V4Kt3q4OrlVEr626KQqHnfQH8A8Dl9Z8BKEP6pXoj13he+AXwjsI/WGCtG0X3D5sO9Mx74XRcgEu6b4wjUySsNM55D6QHTuU29wHq9+UZMDnygW7ZvKdy22EAVblp9fq+E8mUvpb02JhQOenFBPxyVrF+EwE0KulJ9ySS7s2kl7M+YEG1uAGYhfTgSWrphpr5gqr9kn7xDuCmfdibX8q5L+mP8FGpuAK4182258h0Q037o9LHfNYsLgEqbXYVNaSn3038s+YHfVgvcq26e5C16qZ09Kqc+od18NaOa4L1tVXSm3DyWzs+bHNRTbgu3DULc1JY/Q+bi0ba3lZfzHlVmGuV/8f2NsAGy01OWh9mscHyU7b4ltr81Dy2+H7OJvOiUT03mcdcN5lP45hDpKRUbsTxmMM0DtpII4LI7aDNJI56Rdf1XmNWR72mcNiwku9URTs2hw2ncNxV3pHaMQE4gQPXsbynismB6wkc+XcNsuxQF01TbsLlRpJ8Hkf+J5B0Qr2VQTidAq1ToX2YSc6ECaQ9Mfz268Aoz+jR5ZL2hH3inbdifcfAaKkBvnBJvGPpw/jUT+cQWAbr5TJ8LctTKUk+l9RPwrHqRvDJx5QBuMzPJRFqulZscmeJlZUJ4tPfGX6HPOwa4bGtV8on/V1iY4L4BIxRVwfrUJzTB+dtCNzyScAoHAsTxKcArTS/MDgdczK8fbhsTAjkkwJUrCxMEJ+EVrWVdEhLArmm++lAb1xOSWgTCxOEp0GOJckzBSQaU1FMyhdOaZCFY2GC6ETc0XkIeDyYROCvOgTuOCXiFisLE0Sngo+kVrH2iq52fZBrA1S8UsEnjkU9ZnQxAiUvtQn3+hbxKkagfdhiRgwuh+EqeaOUVzkMMkEbJ8YXZIneQ/SZFWQRjm0/gi8JFFW/IbrcSgKJlZ0J4otSXbtzyq4oVeIACELKom1jN9ryK4smnKFO/FWYr48Jjlrbf16lIYXT14ntNavipCLhTpB7eVzhPKjdODxmV6BZrBybjiRyo148ZlgiXDiPKr2Bp5DVhqdSpF4kQwjGbiXPwtkg8QNEQAuAlibop3enqO4LSKkPMEAAwKQPwfgKHrTsf+oDDBABUDiPE6zkHcUvJAQ/gAHaArQ0wRd5IWwQJH4IA7QHaDWUieRZxTI/rl8PmKr/pv/ADGHsAVo4cXyxY+qkN/2E2VW5Zvz4z96B7QFamOBWtjocA6+WMmuOwRISBM38A2SA9gCHm6CSWvm52n+2DkrAQMaEP5QB2gMc3o+4ktSQ3Rntg5yuCtN94HoQe4DDnNh0w+vgII2ondEVEv6gDmwPcJgT7yTpeJSt6pNXei3MCOK+SAe2BzjQiZUB2Og9P4HWfswguL3kh3Vge4CDnDjqXLgMgkw3grz1ZoWIfnAHtgc4wInTthPJT0FQ6AMIQWlmc4joB3dge4D9CfrdMIYUSlkHG9kpQngvnp89wP5hsNKDF+3CubZFaeRivBcfAO0B9g2DkRlC1xt5IReFDx8A7QH2PEAn70jhnBfvwPYAexH05Y2q2N9ZzHsNvs/jZw+wVxh0r20vMu7nbwHGBw2AAIAPEYwv4F3NG/zdtic9Mj4O/MYB+HBH4qsWnnt3zcnfpg92Gz1sD9aBAAA+RDB24+1ffiaI/4RH9PjwGxkgEbSXT/6cpjfk0u2uY8eK39gAieBo8i9kXvHjNzpAIshao/KDABQOa4lRBQDInKAYWQiAjL14JcYWBCBbggB+GIBMCSL4gQCyJAjhBwMoEoeZEoHR4ptAiB1BFL9vi58CI17DGYHSz8WzAIlRIFwJmJ4XiycBEhuCQH5PC9IPARKTQJgImH5ofkgbZGCEQPMj+zN6fvqeCIg+nSCMX/L96Vmz+wXFZ6vnnnLycAAAAABJRU5ErkJggg=="),this.loadVideoElement(),bt.log("Video player initialized and VASTTracker created")}else bt.log("failed vast tracker"),this.onVideoError(error);bt.log("Video player initialized and VASTTracker created")}catch(e){bt.error("Video player Can't able to initalize vast tracker due to ",e),this.onVideoError(e)}}},{key:"vastAdParmsParsing",value:function(){var e={};e.creativeId=this.creative.linear.id;var t=this.creative.linear.adParameters.findIndex((function(e){return e.hasOwnProperty("jicon")}));return e.iconImage=t>=0?this.creative.linear.adParameters[t].jicon:null,t=this.creative.linear.adParameters.findIndex((function(e){return e.hasOwnProperty("jtitle")})),e.adTitle=t>=0?this.creative.linear.adParameters[t].jtitle:null,t=this.creative.linear.adParameters.findIndex((function(e){return e.hasOwnProperty("jdesc")})),e.desc=t>=0?this.creative.linear.adParameters[t].jdesc:null,t=this.creative.linear.adParameters.findIndex((function(e){return e.hasOwnProperty("jctatext")})),e.ctatext=t>=0?this.creative.linear.adParameters[t].jctatext:null,t=this.creative.linear.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctatext")})),e.secctatext=t>=0?this.creative.linear.adParameters[t].jsecctatext:null,e}},{key:"loadVideoElement",value:function(){try{var e=null,t=null,i=document.createElement("div");"audio/mpeg"==this.mimetype?(this.macros.bz="audio",e='<audio id="'.concat(this.rndPlayer,'" class="jads-media-player-audio" webkit-playsinline="true" disableremoteplayback="true" playsinline="true" ').concat(ot.initialUnMute?"":"muted",'  preload="auto">\n                   <source src="').concat(this.mediaFile,'" type="audio/mpeg">\n                   </audio>')):t='<video id="'.concat(this.rndPlayer,'" class="jads-media-player" webkit-playsinline="true" disableremoteplayback="true" playsinline="true" ').concat(ot.initialUnMute?"":"muted",' preload="auto">\n                   <source src="').concat(this.mediaFile,'" type="video/mp4">\n                   </video>');var a={rndMediaCont:this.rndMediaCont,videoTag:t,audioTag:e,endCard:this.endCard,endCardType:this.endCardType,isClickable:this.isAdClickable(),ctaText:this.ctatext,creative:this.creative,rndPlay:this.rndPlay,rndMute:this.rndMute,rndTime:this.rndTime,rndSkipClose:this.rndSkipClose,rndFullCtaEvent:this.rndFullCtaEvent,rndCtaEvent:this.rndCtaEvent,rndSecCtaEvent:this.rndSecCtaEvent,rndDispNone:this.rndDispNone,rndProgress:this.rndProgress},n=ot.adObject[this.placementId].getVideoWrapHTML(a);i.id=this.playerContainerId,i.className="jads-player-container",i.innerHTML=n,this.videoContainer.appendChild(i),this.playerContainer=document.getElementById(this.playerContainerId),this.player=document.getElementById(this.rndPlayer),this.player.muted=!ot.initialUnMute,this.btnSkip=this.playerContainer.querySelector("."+this.rndSkipClose),this.btnPlayPause=this.playerContainer.querySelector("."+this.rndPlay),this.btnMuteUnmute=this.playerContainer.querySelector("."+this.rndMute),this.videoTimeText=this.playerContainer.querySelector("."+this.rndTime),this.jadsMedia=this.playerContainer.querySelector("."+this.rndMediaCont),this.jadsProgress=this.playerContainer.querySelector("."+this.rndProgress),bt.log("Video player loading video element into container"),this.callback.onAdPrepared()}catch(e){bt.error("Video player Cant able cache ad ".concat(e)),this.onVideoError(e)}}},{key:"inView",value:function(){var e=this;void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),4===this.type||5==this.type?ui({placementId:this.modalContainer||this.placementId,pId:this.placementId,refreshTime:this.refreshRate,firstTimePlay:e.firstTimePlay.bind(this),pause:e.pause.bind(this),resume:e.resume.bind(this)}):ui({placementId:this.modalContainer||this.placementId,firstTimePlay:e.firstTimePlay.bind(this),pause:e.pause.bind(this),resume:e.resume.bind(this)}),document.addEventListener(this.visibilityChange,this.visibilityHandler.bind(this),!1)}},{key:"visibilityHandler",value:function(){this.player&&!this.stopVisibilityCheck&&(document[this.hidden]?(bt.log("visibilitychange pause"),this.pause()):(bt.log("visibilitychange resume"),this.resume()))}},{key:"pause",value:function(e){var t=this,i=this;if(0!=this.start&&this.player){e&&!i.player.paused&&i.vastTracker.setPaused(!0,i.macros);var a=this.player.pause();void 0!==a?a.then((function(){i.player.pause(),t.btnPlayPause.classList.add("jads-icon-pause")})).catch((function(e){bt.log("cant Pause "+e)})):this.btnPlayPause.classList.add("jads-icon-pause")}}},{key:"resume",value:function(e){var t=this,i=this;if(0!=this.start&&this.player){e&&i.player.paused&&i.vastTracker.setPaused(!1,i.macros);var a=this.player.play();void 0!==a&&a.then((function(){t.btnPlayPause.classList.add("jads-icon-pause"),i.player.play()})).catch((function(e){bt.log("cant Play "+e)}))}}},{key:"play",value:function(){this.playerContainer.style.display="block",this.player.addEventListener("play",this.onVideoPlay.bind(this),!0),this.player.addEventListener("pause",this.onVideoPause.bind(this),!1),this.player.addEventListener("ended",this.onVideoEnded.bind(this),!0),this.player.addEventListener("error",this.onVideoError.bind(this),!0),this.player.addEventListener("timeupdate",this.onTimeUpdate.bind(this),!0),ot.autoplay?this.inView():this.firstTimePlay()}},{key:"firstTimePlay",value:function(){var e=this;if(0==this.start)if(this.vastTracker.on("start",(function(){0==e.start&&(e.start=!0,e.onVideoLoadedMetaData.call(e))})),ot.autoplay&&ot.AdManager[this.placementId].autoplay){var t=this.player.play();t&&t.then((function(){bt.log("Autoplay started, don't need nothing!")})).catch((function(t){bt.log("Autoplay not allowed, lets play on mute and hopefully next time, we will have no issue"),e.player.muted=!0,e.player.play()}))}else this.btnPlayPause.classList.remove("jads-icon-pause"),this.initializeVideoControls();else this.resume()}},{key:"getFooter",value:function(){}},{key:"onVideoPlay",value:function(){}},{key:"onVideoPause",value:function(){}},{key:"onVideoEnded",value:function(){var e=this;bt.log("Video Player Ad playback end"),this.vastTracker.complete(this.macros),this.isRewarded&&(this.rewardAchieved=!0),(this.vce&&3==this.vce.type||null!=this.endCard&&null!=this.companionVastTracker.clickThroughURLTemplate)&&(this.clickEnabled=1,this.endCardEnabled=!0,ot.adObject[this.placementId].updateCtaHTML()),null==this.endCard||"audio/mpeg"==this.mimetype||this.inst||4===this.type?(this.callback.onAdMediaEnd(this.rewardAchieved),this.refreshRate>0&&(4===this.type||5===this.type)?(this.isShown=!0,this.firstTimePlay()):(this.stopVisibilityCheck=!0,this.close())):(this.userSkipEnable||this.updateSkipButton(),null!=this.endCard&&this.destroyVideoTag(),this.callback.onAdMediaEnd(this.rewardAchieved),this.closingTime&&setTimeout((function(){e.destroy(),e.callback.onAdClosed(e.rewardAchieved)}),1e3*this.closingTime))}},{key:"destroyVideoTag",value:function(){var e=document.getElementById(this.playerContainerId);e&&(this.player&&(this.player.remove(),this.player=null),this.endCard&&this.jadsMedia?this.jadsMedia.remove():(e.remove(),e=null,this.adClickListener.clickUnbind()))}},{key:"onVideoError",value:function(e){bt.log("failed video error"),ot.AdManager[this.placementId].rendError=!0,this.fbCallback&&ot.AdManager[this.placementId].fbCount<5?(this.destroy(),this.fbCallback()):this.callback.onAdFailedToLoad({placementId:this.placementId,errorCode:"m123",response:e,methodname:"player.onVideoError"})}},{key:"updateSkipButton",value:function(){this.btnSkip&&!ot.noSkipDisplay&&(this.btnSkip.style.display="block",this.userSkipEnable=!0)}},{key:"onTimeUpdate",value:function(e){if(this.player){if(this.count||(this.firstQuartile=.25*this.player.duration,this.midQuartile=.5*this.player.duration,this.thirdQuartile=.75*this.player.duration),this.player.currentTime>=this.firstQuartile&&!this.firstToken?(this.callback.onAdProgress("firstQuartile",this.player.currentTime),this.firstToken=1):this.player.currentTime>=this.midQuartile&&!this.midToken?(this.callback.onAdProgress("midQuartile",this.player.currentTime),this.midToken=1):this.player.currentTime>=this.thirdQuartile&&!this.thirdToken?(this.callback.onAdProgress("thirdQuartile",this.player.currentTime),this.thirdToken=1):this.callback.onAdProgress("",this.player.currentTime),parseInt(this.skip)>0&&Math.floor(this.player.currentTime)>=this.skip&&!this.userSkipEnable&&(this.updateSkipButton(),this.userSkipEnable=!0,bt.log("xxx onAdSkippable fired, skip =",this.skip),this.callback.onAdSkippable()),this.clickTimer&&Math.floor(this.player.currentTime)>=this.clickTimer&&!this.clickEnabled&&(this.clickEnabled=1,this.isAdClickable()&&ot.adObject[this.placementId].updateCtaHTML()),this.isRewarded){var t=this.rewardIn?this.rewardIn:this.player.duration;this.player.currentTime>=t&&(this.rewardAchieved=!0)}this.vastTracker.setProgress(e.target.currentTime,this.macros),this.videoTimeText&&(this.videoTimeText.innerText=new Date(1e3*(this.videoDuration-e.target.currentTime)).toISOString().substr(14,5));var i=e.target.currentTime/this.videoDuration*100;this.jadsProgress&&(this.jadsProgress.style.width="".concat(i,"%"))}}},{key:"onVideoLoadedMetaData",value:function(){var e=this.player.duration;this.videoDuration=e,e!=this.respDuration&&(this.vastTracker.setDuration(e),this.isRewarded?(this.rewardIn>e||this.rewardIn<=0)&&(this.rewardIn=this.skip):(this.skip&&(this.skip=Math.round(this.skip/this.respDuration*e)),0==this.skip&&(this.updateSkipButton(),this.callback.onAdSkippable())));var t=this.macros,i=At.getInsData(this.placementId),a=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:i.adspot,defaultValue:0});1===a&&ot.frEn&&this.mAd?t.frt="req=1&res=1&f=1&dl=0&cl=0&fre=1":this.mAd&&0===a&&ot.frEn&&(t.frt="[frt]&fre=0"),this.isJSONResponseVideo&&this.vastTracker.trackURLs(this.impressionTracker,t),this.isShown||this.vastTracker.trackImpression(t),"audio/mpeg"==this.mimetype&&this.companionVastTracker&&this.companionVastTracker.trackImpression(this.macros),this.callback.onAdDuration(this.videoDuration,this.skip),this.callback.onAdRender(this.fetchClickUrl(!1),this.response.ads[0].title,this.ctatext);var n={};this.creative.linear.adParameters?n=this.vastAdParmsParsing():n.creativeId=this.creative.linear.id,this.callback.onAdMediaStart(n),this.initializeClickListener(),ot.autoplay&&ot.AdManager[this.placementId].autoplay&&this.initializeVideoControls()}},{key:"initializeVideoControls",value:function(){var e=this;this.btnPlayPause&&this.btnPlayPause.addEventListener("click",(function(){e.player.paused?(e.player.play(),e.isShown||e.vastTracker.setPaused(!1,e.macros),this.classList.add("jads-icon-pause")):(e.player.pause(),e.isShown||e.vastTracker.setPaused(!0,e.macros),this.classList.remove("jads-icon-pause"))})),this.btnMuteUnmute&&this.btnMuteUnmute.addEventListener("click",(function(){e.player.muted?(e.isShown||e.vastTracker.setMuted(!1,e.player.muted,e.macros),e.player.muted=!1,this.classList.remove("jads-icon-unmute")):(e.isShown||e.vastTracker.setMuted(!0,e.player.muted,e.macros),e.player.muted=!0,this.classList.add("jads-icon-unmute"))}))}},{key:"setSecCta",value:function(e){var t=e.secCtaUrl,i=e.secCtaTracker;this.secCtaUrl=t,this.secCtaTracker=i}},{key:"isValidURL",value:function(e){var t=document.createElement("a");return t.href=e,t.host&&t.host!=window.location.host}},{key:"click",value:function(e){var t="",i="",a=this.oia;bt.log("Video Player Ad clicked"),this.isOMEnable&&this.adObject.jioAdsMediaPlayer.OmsdkManager.click(),this.isAdClickable()&&(t=this.fetchClickUrl(!0,e),i=this.isValidURL(t[1])?t[1]:t[0],Kt.click(i,a)),bt.log("Video Player closing Ad"),this.callback.onAdClicked(!0,t[0],t[1])}},{key:"close",value:function(){bt.log("Video Player Ad closed"),bt.log("Video Player Ad closed",this.endCard),null!=this.endCard&&"audio/mpeg"!=this.mimetype?(this.destroyVideoTag(),this.destroy(),this.callback.onAdClosed(this.rewardAchieved)):5==this.type?this.skip!=this.respDuration&&this.skip||this.updateSkipButton():(this.destroy(),this.callback.onAdClosed(this.rewardAchieved))}},{key:"initalizeAdObject",value:function(){this.adObject=ot.adObject[this.placementId],this.isOMEnable=this.adObject.isOMEnable}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.skip>=0?this.skipAd.bind(this):this.close.bind(this)},dom:this.playerContainer,id:this.playerContainerId,rowAdClick:4==this.type,rndSkipClose:this.rndSkipClose,rndFullCtaEvent:this.rndFullCtaEvent,rndCtaEvent:this.rndCtaEvent,rndSecCtaEvent:this.rndSecCtaEvent}),this.adClickListener.clickBind()}},{key:"closeAd",value:function(){bt.log("Video Player Ad closeAd"),this.vastTracker.close(),null!=this.endCard&&this.destroyVideoTag(),this.destroy(),this.callback.onAdClosed(this.rewardAchieved)}},{key:"closeAfter",value:function(e){this.closingTime=e,bt.log("Video Player Ad closeAfter: "+e)}},{key:"skipAd",value:function(){0!=this.userSkipEnable&&(bt.log("Video Player Ad skip"),this.vastTracker.skip(this.macros),this.destroy(),this.callback.onAdSkipped(this.rewardAchieved))}},{key:"destroy",value:function(){var e=document.getElementById(this.playerContainerId);this.companionInfo.length>0&&this.hideCompanion(),e&&(this.player&&(this.player.removeEventListener("timeupdate",this.onTimeUpdate),ot.adObject[this.placementId].isOMEnable&&ot.adObject[this.placementId].jioAdsMediaPlayer.OmsdkManager.destoryAdsession(),this.player.remove(),this.player=null),e.remove(),e=null),this.adClickListener&&(this.adClickListener.clickUnbind(),this.adClickListener=null)}},{key:"fetchClickUrl",value:function(e,t){var i,a="",n=[],r=[],o=!1;i=this.response.ads[0].extensions&&this.response.ads[0].extensions[0]&&this.response.ads[0].extensions[0].children&&this.response.ads[0].extensions[0].children[0]?this.response.ads[0].extensions[0].children[0].value:"";var s,c="";this.companionVastTracker&&null!=this.companionVastTracker.clickThroughURLTemplate&&this.vce&&3==this.vce.type||this.endCardEnabled?(e&&this.companionVastTracker.click("",this.clickmacros),a=this.companionVastTracker.clickThroughURLTemplate):this.vastTracker?t&&this.secCtaUrl?(e&&this.vastTracker.trackURLs(this.secCtaTracker,this.clickmacros),a=this.secCtaUrl):i||null!=this.vastTracker.clickThroughURLTemplate?(e&&(this.vastTracker.click("",this.clickmacros),this.clickTrackers&&this.vastTracker.trackURLs(this.clickTrackers,this.clickmacros)),c=i,n=this.vastTracker.clickTrackingURLTemplates,null!=this.vastTracker.clickThroughURLTemplate&&(a=this.vastTracker.clickThroughURLTemplate.url),o=!0):(e&&this.vastTracker.trackURLs(this.clickTrackers,this.clickmacros),a=this.isLinkFallback):(a=this.ad.result.ctaurl||this.ad.result.ctafb,n=this.ad.result.clktrackers,e&&a&&this.fireImpression(function(e){if(Array.isArray(e))return fi(e)}(s=this.ad.result.clktrackers)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return fi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?fi(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),!0));for(var d=0;d<n.length;d++)r.push(Z.replaceMacrosValues(o?n[d].url:n[d],this.clickmacros));return bt.log("macros",r),a&&(a=Z.replaceMacrosValues(a,this.macros)),[a,c,r]}},{key:"isAdClickable",value:function(){return!!this.clickEnabled&&(null!=this.vastTracker.clickThroughURLTemplate?""!=this.vastTracker.clickThroughURLTemplate.url:!!this.isLinkFallback&&""!=this.isLinkFallback)}},{key:"isAdSkippable",value:function(){return this.userSkipEnable}}],t&&gi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const bi=vi;function Ai(e){return Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ai(e)}function ki(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ii(a.key),a)}}function Ii(e){var t=function(e,t){if("object"!=Ai(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ai(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ai(t)?t:t+""}var Si=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.videoContainer,a=t.videoCompanionCont,n=t.callback,r=t.skip,o=t.vce,s=t.slotId,c=t.placementId,d=t.eventHandler,l=t.adObject,u=void 0===l?{}:l,h=t.response,p=void 0===h?{}:h,m=t.isHorizontalMode,f=void 0!==m&&m,g=t.macros,y=void 0===g?{}:g,v=t.clickmacros,b=void 0===v?{}:v,A=t.footerclass,k=t.slot,I=void 0===k?{}:k,S=t.oia,T=t.ac,w=t.dif,C=t.fbCallback,E=t.fetchNextAdcallback,L=void 0===E?function(){}:E,M=t.destroyOM,j=void 0===M?function(){}:M;this.videoContainer=i,this.callback=n,this.footerclass=A,this.skip=r,this.vce=o,this.userSkipEnable=!1,this.start=!1,this.isReady=!1,this.isOMEnable=!1,this.slotId=s,this.placementId=c,this.playerContainerId="slot_".concat(this.slotId),this.macros=y,this.clickmacros=b,this.adObject=u,this.response=p,this.eventHandler=d,this.maxBitrate=320,this.isQwerty=ot.qk,this.isHorizontalMode=f,this.fetchNextAdcallback=L,this.destroyOM=j,this.slot=I,this.oia=S,this.ac=T,this.dif=w,this.rndPlay="jads_play_qs",this.rndMute="jads_mute_qs",this.rndCtaEvent="jads_cta_event_"+Kt.generateCacheBusting(12),this.rndPlayerId="jads_media_player_video_"+Kt.generateCacheBusting(12),this.rndSkipClose="jads_close_qs"+Kt.generateCacheBusting(12),this.rndTime="jads_media_time",this.rndProgress="jads_progress_qs",this.clickEnabled=1,this.clickTimer=0,this.count=0,this.firstQuartile=0,this.firstToken=0,this.BreakToken=0,this.companionInfo=[],this.stopVisibilityCheck=!1,this.error=!1,this.pass=!1,a&&this.companionInfo.push(JSON.parse(a)),this.fbCallback=C,this.ctaText="",this.companionVariationsNode=[],this.midQuartile=0,this.midToken=0,this.thirdQuartile=0,this.thirdToken=0,this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):2==this.vce.type?this.clickEnabled=0:this.vce.type),Z.setOMSDKParamater(this.response,this)},(t=[{key:"initalizeCache",value:function(){this.skip=this.skip?this.skip:Math.round(this.adObject.creatives[0].skipDelay||0),this.initalizeVastTracker()}},{key:"setCompanionObject",value:function(e,t,i){var a={},n={};"image"==t?(a=e.staticResources[0],n.companionUrl=a.url):"html"==t&&(a=e.htmlResources[0],n.companionUrl=a);try{n.creativeType=t,n.id=e.id,n.divID=i.companionDivId,n.adSlotID=e.adSlotID,n.height=e.height?e.height:100,n.width=e.width?e.width:200}catch(e){}n.companionVastTracker=new Vt.VASTTracker(this.VASTClient,null,this.creative.companion,e),this.companionVariationsNode.push(n)}},{key:"getCompanionVariation",value:function(){if(this.ad.creatives.length>1){var e=this.creative.companion?this.creative.companion.variations:"";if(e)for(var t=0;t<e.length;t++)if(void 0!==e[t].staticResources&&e[t].staticResources.length>0)for(var i=0;i<this.companionInfo.length;i++)(n=this.companionInfo[i])&&("adSlotID"in n&&null!==e[t].adSlotID&&n.adSlotID==e[t].adSlotID||"height"in n&&"width"in n&&n.height==e[t].height&&n.width==e[t].width)&&this.setCompanionObject(e[t],"image",n);else if(void 0!==e[t].htmlResources&&e[t].htmlResources.length>0)for(var a=0;a<e.length;a++){var n;("adSlotID"in(n=this.companionInfo[a])&&null!==e[t].adSlotID&&n.adSlotID==e[t].adSlotID||"height"in n&&"width"in n&&n.height==e[t].height&&n.width==e[t].width)&&this.setCompanionObject(e[t],"html",n)}}}},{key:"showCompanion",value:function(e){var t=this;if(e)for(var i=0;i<e.length;i++){var a=e[i],n=document.getElementById(a.divID).firstElementChild;"html"===a.creativeType?n.innerHTML+='<div><object type="text/html" data="'.concat(a.companionUrl,'" data-id="').concat(a.id,'"></object></div>'):n.innerHTML+='<div><img src="'.concat(a.companionUrl,'" width="').concat(a.width,'" height="').concat(a.height,'" data-id="').concat(a.id,'"></div>'),n.querySelectorAll("[data-id]").forEach((function(e){e.addEventListener("click",(function(e){try{var i=e.currentTarget.getAttribute("data-id")||null;t.adClick("companion",i)}catch(e){}}))}))}}},{key:"adClick",value:function(e,t){var i;if("companion"==e)for(var a=0;a<this.companionVariationsNode.length;a++)t&&this.companionVariationsNode[a].id==t&&(i=this.companionVariationsNode[a].companionVastTracker);else i=this.vastTracker;var n=null;null!=i.clickThroughURLTemplate?(i.click("",this.clickmacros),n=i.clickThroughURLTemplate||i.clickThroughURLTemplate.url):i.trackURLs(i.clickTrackingURLTemplates,this.clickmacros),null!==n&&(Kt.click("string"==typeof n?n:n.url,!1),this.callback.onAdClicked(!0,n))}},{key:"initCompanionTracker",value:function(){for(var e=0;e<this.companionVariationsNode.length;e++)this.companionVariationsNode[e].divID&&InViewHandler({placementId:this.companionVariationsNode[e].divID,callback:this.fireViewImpression.bind(this),refreshTime:0})}},{key:"fireImpression",value:function(e){for(var t=0;t<this.companionVariationsNode.length;t++)this.companionVariationsNode[t].divID==e&&this.companionVariationsNode[t].companionVastTracker.trackImpression(this.macros)}},{key:"fireViewImpression",value:function(e){this.fireImpression(e)}},{key:"hideCompanion",value:function(){if(this.companionInfo.length>0)for(var e=0;e<this.companionInfo.length;e++){var t=this.companionInfo[e];null!=(t=document.getElementById(t.companionDivId))&&(t.innerHTML="<div></div>")}}},{key:"selectMediaFile",value:function(){try{var e=this,t=e.creative.mediaFiles.filter((function(t){return-1!=t.mimeType.indexOf("video")&&t.bitrate<=e.maxBitrate}));return(t.length>0||(t=e.creative.mediaFiles.filter((function(e){return-1!=e.mimeType.indexOf("video")}))).length>0)&&(t.sort((function(e,t){return t.bitrate-e.bitrate})),t[0])}catch(e){return!1}}},{key:"initalizeVastTracker",value:function(){try{this.ad=this.adObject;for(var e=0;e<this.adObject.creatives.length;e++)"linear"==this.adObject.creatives[e].type&&(this.creative=this.adObject.creatives[e]);var t=this.selectMediaFile();t?(this.mediaFile=t.fileURL,this.vastTracker=new Vt.VASTTracker(null,this.ad,this.creative),this.companionInfo.length>0&&(this.getCompanionVariation(),this.initCompanionTracker()),this.loadVideoElement(),bt.log("Video player initialized and VASTTracker created")):(this.pass=!0,this.onVideoError()),bt.log("Video player initialized and VASTTracker created")}catch(e){bt.error("Video player Can't able to initalize vast tracker due to ",e)}}},{key:"xml2string",value:function(e){return"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):e.xml?e.xml:void 0}},{key:"vastAdParmsParsing",value:function(){var e={};e.creativeId=this.creative.id;var t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jicon")}));return e.iconImage=t>=0?this.creative.adParameters[t].jicon:null,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jtitle")})),e.adTitle=t>=0?this.creative.adParameters[t].jtitle:null,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jdesc")})),e.desc=t>=0?this.creative.adParameters[t].jdesc:null,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jctatext")})),e.ctatext=t>=0?this.creative.adParameters[t].jctatext:null,this.ctaText=e.ctatext?e.ctatext:"Visit Advertiser",t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctatext")})),e.secctatext=t>=0?this.creative.adParameters[t].jsecctatext:null,e}},{key:"loadVideoElement",value:function(){try{var e=document.createElement("div");e.id=this.playerContainerId,e.style.display="none";var t='<div class="jads-instream jads-fluid-container jads-f-j-center jads-pos-r">\n        <div class="jads-d-flex-aj-center">\n          <video class="jads-media-player" id="'.concat(this.rndPlayerId,'" preload="metadata" webkit-playsinline="true" playsinline="true"  ').concat(ot.initialUnMute?"":"muted",'>\n                <source src="').concat(this.mediaFile,'" type="video/mp4" /></video>\n            <div class="jads-cta-box jads-cta-top jads-d-flex jads-f-j-right jads-p-10">\n              <a href="javascript:;" class="jads-btn jads-cta-event jads-pe-n jads-d-none ').concat(this.rndCtaEvent,'">\n                ').concat(this.ctaText||"Visit Advertiser",'\n              </a>\n            </div>\n            <div class="jads-cta-box jads-bot-60 jads-d-flex jads-f-j-right">\n                  <a href="javascript:;" class="jads-btn jads-skip-close-event jads-d-none skip-time ').concat(this.rndSkipClose,'">Skip</a>\n                </div>\n          </div>\n          <div class="jads-cta-box jads-cta-bottom jads-d-flex jads-bg-grey">\n              <div class="jads-d-flex jads-flex-fill jads-f-a-center jads-f-j-left jads-p-10">\n                <a class="jads-icon jads-icon-play jads-icon-pause ').concat(this.rndPlay,'"></a>\n                <span class="jads-plr-10 jads-color-white jads-ad">\n                  Ad\n                </span>\n                <span class="jads-plr-10 jads-color-white ').concat(this.rndTime,'">\n                  00:00\n                </span>\n              </div>\n              <div class="jads-d-flex jads-f-a-center jads-f-j-right jads-p-10">\n                <div class="jads-icon jads-icon-mute  ').concat(ot.initialUnMute?"":"jads-icon-unmute"," ").concat(this.rndMute,'"></div>\n          </div>\n          <div class="timeline_bar">\n              <div class="').concat(this.rndProgress,'"></div>\n          </div>\n        </div>\n      </div>');e.innerHTML=t,this.videoContainer.appendChild(e),this.updateCtaHTML(),this.player=document.getElementById(this.rndPlayerId),this.player.addEventListener("error",this.onVideoError.bind(this),!0),this.playerContainer=document.getElementById(this.playerContainerId),this.playerContainer&&(this.btnSkip=this.playerContainer.querySelector("."+this.rndSkipClose),this.btnPlayPause=this.playerContainer.querySelector("."+this.rndPlay),this.btnMuteUnmute=this.playerContainer.querySelector("."+this.rndMute),this.videoTimeText=this.playerContainer.querySelector("."+this.rndTime),this.jadsProgress=this.playerContainer.querySelector("."+this.rndProgress),this.player.muted=!ot.initialUnMute),this.getTimerStatus(),bt.log("Video player loading video element into container SLOT ID => "+this.playerContainerId),this.isReady=!0,this.eventHandler.onSlotReady(this.slotId)}catch(e){bt.error("AD break Video player Cant able cache ad ".concat(e))}}},{key:"play",value:function(){var e=this;this.playerContainer.style.display="block",this.player.addEventListener("play",this.onVideoPlay.bind(this),!0),this.player.addEventListener("pause",this.onVideoPause.bind(this),!1),this.player.addEventListener("ended",this.onVideoEnded.bind(this),!0),this.player.addEventListener("error",this.onVideoError.bind(this),!0),this.player.addEventListener("timeupdate",this.onTimeUpdate.bind(this),!0),this.vastTracker.on("start",(function(){0==e.start&&(e.start=!0,e.onVideoLoadedMetaData.call(e),e.inView())})),bt.log("Video Player Ad play"),this.player.play()}},{key:"getTimerStatus",value:function(){this.videoTimeText&&(this.videoTimeText.innerHTML="00:00 ".concat(this.dif?"(".concat(this.eventHandler.currentRunningAd||0==this.eventHandler.currentRunningAd?this.eventHandler.currentRunningAd+1:1,"/ ").concat(this.eventHandler.AdbreakSlotList.length,")"):""))}},{key:"updateCtaHTML",value:function(){var e=document.getElementsByClassName(this.rndCtaEvent);e&&this.clickEnabled&&this.isAdClickable()&&e[0].classList.remove("jads-pe-n","jads-d-none")}},{key:"pause",value:function(e){var t=this,i=this;if(0!=this.start&&this.player){e&&!i.player.paused&&i.vastTracker.setPaused(!0,i.macros);var a=this.player.pause();void 0!==a?a.then((function(){i.player.pause(),t.btnPlayPause.classList.add("jads-icon-pause")})).catch((function(e){bt.log("cant Pause "+e)})):this.btnPlayPause.classList.add("jads-icon-pause")}}},{key:"resume",value:function(e){var t=this,i=this;if(0!=this.start&&this.player){e&&i.player.paused&&i.vastTracker.setPaused(!1,i.macros);var a=this.player.play();void 0!==a&&a.then((function(){t.btnPlayPause.classList.add("jads-icon-pause"),i.player.play()})).catch((function(e){bt.log("cant Play "+e)}))}}},{key:"onVideoPlay",value:function(){}},{key:"onVideoPause",value:function(){}},{key:"onVideoEnded",value:function(){this.stopVisibilityCheck=!0,bt.log("Video Player Ad playback end"),this.vastTracker.complete(this.macros),this.eventHandler.onSlotComplete(this.slotId,!0),this.destroy()}},{key:"onVideoError",value:function(e){this.destroy(),this.dif?this.eventHandler.fError>0&&(this.fbCallback&&ot.AdManager[this.placementId].fbCount<5?this.fbCallback():this.callback.onAdFailedToLoad({placementId:this.placementId,errorCode:"m123",response:e,methodname:"adbreakPlayer.onVideoError"})):(this.eventHandler.fError>0&&(this.slotId>0||this.error)||this.pass)&&(this.eventHandler.slotId>-1&&(this.eventHandler.onSlotError(this.slotId),this.eventHandler.slotId-=1),ot.AdManager[this.placementId].rendErAdBreakList.push(this.slot["video-duration"]),this.fetchNextAdcallback()),this.eventHandler.fError++,this.error=!0,bt.log("error in adbreak")}},{key:"updateSkipButton",value:function(){this.btnSkip&&this.dif&&!ot.noSkipDisplay&&(this.btnSkip.style.display="block")}},{key:"onTimeUpdate",value:function(e){if(this.player){this.count||(this.firstQuartile=.25*this.player.duration,this.midQuartile=.5*this.player.duration,this.thirdQuartile=.75*this.player.duration),this.player.currentTime>=1&&!this.BreakToken&&(this.eventHandler.remainDur-=this.slot["video-duration"],this.BreakToken=1),this.player.currentTime>=this.firstQuartile&&!this.firstToken&&(this.callback.onAdProgress("firstQuartile"),this.firstToken=1),this.player.currentTime>=this.midQuartile&&!this.midToken&&(this.callback.onAdProgress("midQuartile"),this.midToken=1),this.player.currentTime>=this.thirdQuartile&&!this.thirdToken&&(this.callback.onAdProgress("thirdQuartile"),this.thirdToken=1),parseInt(this.skip)>0&&Math.floor(this.player.currentTime)>=this.skip&&!this.userSkipEnable&&(this.updateSkipButton(),this.userSkipEnable=!0),Math.floor(this.player.currentTime)>=this.clickTimer&&!this.clickEnabled&&1==this.vce.type&&(this.clickEnabled=!0,this.updateCtaHTML());var t=Math.floor(this.player.duration-this.player.currentTime);this.videoTimeText&&(this.videoTimeText.innerHTML="".concat(Math.floor(t/60),":").concat(Math.floor(t)%60," ").concat(this.dif?"(".concat(this.eventHandler.currentRunningAd||0==this.eventHandler.currentRunningAd?this.eventHandler.currentRunningAd+1:1,"/ ").concat(this.eventHandler.AdbreakSlotList.length,")"):"")),this.vastTracker.setProgress(e.target.currentTime,this.macros);var i=this.player.currentTime/this.player.duration*100;this.jadsProgress.style.width="".concat(i,"%")}}},{key:"onVideoLoadedMetaData",value:function(){var e=this,t=this.player.duration;t!=this.vastTracker.assetDuration&&this.vastTracker.setDuration(t),this.companionInfo.length>0&&this.showCompanion(this.companionVariationsNode);var i={};this.creative.adParameters?i=this.vastAdParmsParsing():i.creativeId=this.creative.id;var a={campId:this.slot.campaignId||"",adid:this.slot.adId||this.ad.id,campaignTitle:this.ad.title,cta:this.ctaText};bt.log("campaign details",a),this.callback.onAdDuration(t,this.skip),this.callback.onAdChange(i,a);var n=this.macros,r=At.getInsData(this.placementId),o=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:r.adspot,defaultValue:0});1===o&&ot.frEn&&!this.dif?n.frt="req=1&res=1&f=1&dl=0&cl=0&fre=1":!this.dif&&0===o&&ot.frEn&&(n.frt="[frt]&fre=0"),this.vastTracker.trackImpression(n),this.eventHandler.onSlotStart(this.slotId),this.eventHandler.onSlotImpression(this.slotId),this.initializeClickListener(),this.btnPlayPause&&this.btnPlayPause.addEventListener("click",(function(){e.player.paused?(e.player.play(),e.vastTracker.setPaused(!1,e.macros),this.classList.add("jads-icon-pause")):(e.player.pause(),e.vastTracker.setPaused(!0,e.macros),this.classList.remove("jads-icon-pause"))})),this.btnMuteUnmute&&this.btnMuteUnmute.addEventListener("click",(function(){e.player.muted||0==e.player.volume?(e.vastTracker.setMuted(!1,e.player.muted,e.macros),e.player.muted=!1,e.player.volume=1,e.player.removeAttribute("muted"),this.classList.remove("jads-icon-unmute")):(e.vastTracker.setMuted(!0,e.player.muted,e.macros),e.player.muted=!0,e.player.volume=0,e.player.setAttribute("muted",""),this.classList.add("jads-icon-unmute"))}))}},{key:"click",value:function(){bt.log("Video Player Ad clicked");var e="",t=this.oia;this.isAdClickable()&&(e=this.vastTracker.clickThroughURLTemplate.url,this.vastTracker.click("",this.clickmacros),Kt.click(e,t)),bt.log("Video Player closing Ad"),this.eventHandler.onSlotClick(this.slotId,e)}},{key:"close",value:function(){bt.log("Video Player Ad closed"),this.destroy(),this.callback.onAdClosed()}},{key:"closeAfter",value:function(e){}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.skip>0?this.skipAd.bind(this):this.close.bind(this)},dom:this.playerContainer,id:this.playerContainerId,rndSkipClose:this.rndSkipClose,rndCtaEvent:this.rndCtaEvent}),this.adClickListener.clickBind()}},{key:"closeAd",value:function(){bt.log("Video Player Ad closeAd"),this.vastTracker.close(),this.destroy(),this.callback.onAdClosed()}},{key:"skipAd",value:function(){0!=this.userSkipEnable&&(bt.log("Video Player Ad skip"),this.vastTracker.skip(this.macros),this.destroy(),this.callback.onAdSkipped())}},{key:"destroy",value:function(){var e=document.getElementById(this.playerContainerId);e&&(this.player.children[0].src="",this.player.remove(),this.player=null,e.remove(),e=null,this.companionInfo.length>0&&this.hideCompanion(),this.adClickListener&&this.adClickListener.clickUnbind(),this.isReady=!1)}},{key:"isAdClickable",value:function(){return this.clickEnabled&&null!=this.vastTracker.clickThroughURLTemplate?""!=this.vastTracker.clickThroughURLTemplate.url:""}},{key:"isAdSkippable",value:function(){return this.userSkipEnable}},{key:"inView",value:function(){void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),document.addEventListener(this.visibilityChange,this.visibilityHandler.bind(this),!1)}},{key:"visibilityHandler",value:function(){!this.stopVisibilityCheck&&this.playerContainer&&(document[this.hidden]?(bt.log("visibilitychange pause"),this.pause()):(bt.log("visibilitychange resume"),this.resume()))}},{key:"stayAlive",value:function(){}},{key:"onSlotImpression",value:function(){}},{key:"getSlotDuration",value:function(){}},{key:"getMediaURL",value:function(){}}])&&ki(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ti=Si;function wi(e){return wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(e)}function Ci(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ei(a.key),a)}}function Ei(e){var t=function(e,t){if("object"!=wi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=wi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wi(t)?t:t+""}var Li=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.placementId,a=t.videoContainer,n=t.callback,r=t.show,o=void 0!==r&&r,s=t.skip,c=t.isHorizontalMode,d=t.isTimerVisiable,l=t.footerclass,u=t.adbreakDuration,h=t.adbreakCount,p=t.adSpotKey,m=t.ac,f=t.videoCompanionCont,g=t.fbCallback;this.placementId=i,this.videoContainer=a,this.videoCompanionCont=f,this.callback=n,this.show=o,this.skip=s,this.slotId=-1,this.totalDuration=0,this.adbreakDuration=u,this.remaningDuration=u/1e3,this.remainDur=u/1e3,this.AdbreakSlotList=[],this.isTimerVisiable=d,this.isHorizontalMode=c,this.footerclass=l,this.isPodClose=!1,this.vastParser=new Vt.VASTParser,this.backUpAdPlayedList=[],this.adSpotKey=p,this.adbreakCount=h,this.ac=m||this.adbreakCount?1:0,this.dif=m,this.createMainContainer(),this.fError=0,this.fbCallback=g},t=[{key:"addSlot",value:function(e,t,i){var a=this;this.remaningDuration=i,this.adSize="video";var n=e.ccbString||Z.crc32((Date.now()||(new Date).getTime())+":"+ot.appName+":"+this.placementId+":"+100*Math.random(10)),r={bz:"video",ccb:n,seq:1};Z.generateMacrosList(r,a.placementId);var o={bz:"video",ccb:n,seq:1};Z.generateMacrosList(o,a.placementId,!0),this.parseAd({xml:e.ad,onSuccess:function(i){if(0==a.isVastFileValid(i))return ot.AdManager[a.placementId].rendErAdBreakList.push(e["video-duration"]),t(),!1;a.slotId+=1,a.AdbreakSlotList.push(new Ti({videoContainer:a.podMainContainer,videoCompanionCont:a.videoCompanionCont,adObject:i.ads[0],response:i,slotId:a.slotId,slot:e,placementId:a.placementId,eventHandler:a,callback:a.callback,fetchNextAdcallback:t,skip:a.skip,macros:r,clickmacros:o,footerclass:a.footerclass,ac:a.ac,dif:a.dif,fbCallback:a.fbCallback})),a.readySlot(a.slotId)},onError:function(){ot.AdManager[a.placementId].rendErAdBreakList.push(e["video-duration"]),t()}})}},{key:"parseXML",value:function(e){try{return(new DOMParser).parseFromString(e.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e))}}},{key:"isVastFileValid",value:function(e){return e.ads.length>0&&e.ads[0].hasOwnProperty("creatives")&&e.ads[0].creatives[0]&&e.ads[0].creatives[0].hasOwnProperty("mediaFiles")&&e.ads[0].creatives[0].mediaFiles.length>0&&!0}},{key:"parseAd",value:function(e){var t=e.xml,i=e.onSuccess,a=e.onError;this.vastParser.parseVAST(this.parseXML(t),{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0,multi:!0}).then((function(e){i(e)})).catch((function(e){a()}))}},{key:"initalizeAdbreak",value:function(e,t){if(e.length<1)return!1;this.adSize="video";for(var i=0;i<e.length;i++){var a=Z.crc32((Date.now()||(new Date).getTime())+":"+ot.appName+":"+this.placementId+":"+100*Math.random(10)),n={bz:"video",ccb:a,seq:i};Z.generateMacrosList(n,this.placementId);var r={bz:"video",ccb:a,seq:1};Z.generateMacrosList(r,this.placementId,!0),0!=this.isVastFileValid({ads:[e[i]]})&&(this.slotId+=1,this.totalDuration+=e[i].creatives[0].duration,this.AdbreakSlotList.push(new Ti({videoContainer:this.podMainContainer,videoCompanionCont:this.videoCompanionCont,adObject:e[i],response:{ads:[e[i]],version:t},slotId:this.slotId,placementId:this.placementId,eventHandler:this,callback:this.callback,skip:this.skip,macros:n,clickmacros:r,footerclass:this.footerclass,ac:this.ac,dif:this.dif,fbCallback:this.fbCallback})))}this.callback.onAdDuration(this.totalDuration),this.readySlot(0)}},{key:"readySlot",value:function(e){return!(this.AdbreakSlotList.length<=e||(this.AdbreakSlotList[e].initalizeCache(),0))}},{key:"onSlotReady",value:function(e){this.AdbreakSlotList[e].slot.hasOwnProperty("isTypeBackUp")&&this.AdbreakSlotList[e].slot.isTypeBackUp&&this.backUpAdPlayedList.push(this.AdbreakSlotList[e].slot.adId),"function"==typeof this.callback.onAdPrepared&&0==e&&(this.show?this.start():this.callback.onAdPrepared())}},{key:"onSlotError",value:function(e){this.AdbreakSlotList.pop()}},{key:"onSlotStart",value:function(e){bt.log("onSlotStart called"),"object"==wi(this.AdbreakSlotList[e+1])&&this.readySlot(e+1)}},{key:"pause",value:function(){this.AdbreakSlotList[this.currentRunningAd].pause(!0)}},{key:"resume",value:function(){this.AdbreakSlotList[this.currentRunningAd].resume(!0)}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"MULTI";this.PODType=e,this.AdbreakSlotList[0].isReady&&(this.podMainContainer.style.display="block","MULTI"==e&&(this.timeOut=setTimeout((function(e){e.podClose()}),this.adbreakDuration,this)),this.currentRunningAd=0,this.AdbreakSlotList[0].isOMEnable?this.OMSDKInit():this.AdbreakSlotList[0].play(this))}},{key:"OMSDKInit",value:function(){var e=this;if(Z.isOmSDKAvailable()){var t=new J(this.AdbreakSlotList[this.currentRunningAd].player,this.AdbreakSlotList[this.currentRunningAd].OMSDKParms,!0);this.AdbreakSlotList[this.currentRunningAd].OmsdkManager=t,this.AdbreakSlotList[this.currentRunningAd].play(this)}else this.script=Z.injectSessionClientScriptTag_(),this.script.addEventListener("load",(function(){var t=new J(e.AdbreakSlotList[e.currentRunningAd].player,e.AdbreakSlotList[e.currentRunningAd].OMSDKParms,!1);e.AdbreakSlotList[e.currentRunningAd].OmsdkManager=t,e.AdbreakSlotList[e.currentRunningAd].play(e)})),this.script.setAttribute("src",this.AdbreakSlotList[this.currentRunningAd].OMSDKParms.OMSDK_URL),document.body.appendChild(this.script)}},{key:"OMSDKFailure",value:function(){this.AdbreakSlotList[slotId].isOMEnable&&this.AdbreakSlotList[slotId].OmsdkManager.destoryAdsession()}},{key:"createMainContainer",value:function(){var e,t="pod_main_container_".concat(this.placementId);if(this.podMainContainer=document.getElementById(t),null==this.podMainContainer){(e=document.createElement("div")).id=t,e.className="pod_main_container",e.style.cssText="overflow:hidden;display:none;position:relative;width:inherit;max-height:inherit;";try{this.videoContainer.appendChild(e)}catch(e){bt.error("video container not passed "+e),this.callback.onAdFailedToLoad({placementId:this.placementId,errorCode:"m109",response:e,methodname:"createMainContainer"})}this.podMainContainer=document.getElementById(t)}}},{key:"onSlotImpression",value:function(e){0==e&&("function"==typeof this.callback.onAdRender&&this.callback.onAdRender(),"function"==typeof this.callback.onAdMediaStart&&this.callback.onAdMediaStart()),this.fError++,this.AdbreakSlotList[e].slot.mod&&ae.init({pId:this.placementId,type:"i",campaignId:this.AdbreakSlotList[e].slot.campaignId});var t=this.AdbreakSlotList[e].player.duration||0;this.AdbreakSlotList[e].fetchNextAdcallback(parseInt(t))}},{key:"onSlotComplete",value:function(e,t){t&&this.AdbreakSlotList[e].slot.mod&&ae.init({pId:this.placementId,type:"cv",campaignId:this.AdbreakSlotList[e].slot.campaignId});var i=ot.AdManager[this.placementId].masterConfigManager.get({type:"POD",value:this.adSpotKey,defaultValue:!1}),a=ot.AdManager[this.placementId].masterConfigManager.get({type:"PODC",value:this.adSpotKey,defaultValue:0});return this.ac&&"MULTI"==this.PODType&&"1"==i&&this.adbreakCount<=0&&(this.adbreakCount=a>1?a:this.adbreakCount),this.adbreakCount&&this.currentRunningAd+1>=this.adbreakCount?(this.podClose(),!0):"object"==wi(this.AdbreakSlotList[e+1])&&this.AdbreakSlotList[e+1].isReady?(this.currentRunningAd=e+1,void(this.AdbreakSlotList[e+1].isOMEnable?this.OMSDKInit():this.AdbreakSlotList[e+1].play(this))):(bt.log("POD Finish"),this.podClose(),!0)}},{key:"onSlotClick",value:function(e,t){this.AdbreakSlotList[e].isOMEnable&&this.AdbreakSlotList[e].OmsdkManager.click(),this.AdbreakSlotList[e].slot.mod&&ae.init({pId:this.placementId,type:"c",campaignId:this.AdbreakSlotList[e].slot.campaignId}),"function"==typeof this.callback.onAdClicked&&this.callback.onAdClicked(!1,t)}},{key:"forcefullyAllSlotClose",value:function(){var e=this;this.AdbreakSlotList.map((function(t,i){e.AdbreakSlotList[i].isOMEnable&&e.AdbreakSlotList[i].OmsdkManager.destoryAdsession(),e.AdbreakSlotList[i].destroy()})),null!==this.podMainContainer&&this.podMainContainer.remove(),this.isPodClose=!0,this.currentRunningAd=null}},{key:"destroyOM",value:function(e){this.AdbreakSlotList[e].isOMEnable&&this.AdbreakSlotList[e].OmsdkManager.destoryAdsession()}},{key:"podClose",value:function(){if(!this.isPodClose){var e=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adSpotKey,defaultValue:0}),t=parseInt(ot.AdManager[this.placementId].masterConfigManager.get({type:"MULTIADS",value:this.adSpotKey,defaultValue:0}));if(1===e&&ot.frEn&&t){var i=ot.AdManager[this.placementId].adbreakDuration||0,a=ot.AdManager[this.placementId].adbreakCount||0,n=0,r=0,o=0,s=this.slotId+1,c=this.remainDur;0==c?(s=0,c=0):(s=a-(this.slotId+1),c=this.remainDur);var d=ot.AdManager[this.placementId].rendErAdBreakList,l=d.length;if(l>0){if(c>0){var u=0;d.forEach((function(e){return u+=e})),console.log(u),c-=u}s>0&&(s-=l),n=l,r=l,o=l,0==c&&(s=0,c=0)}(c>0||s>0&&0==i||n>0)&&Se(this.placementId,this.adSpotKey,{req:n,res:r,f:o,dl:i>0&&c>0?c:0,cl:a>1&&0==i&&s>0?s:0})}this.forcefullyAllSlotClose(),this.adbreakDuration=null,clearTimeout(this.timeOut),"function"==typeof this.callback.onAdMediaEnd&&this.callback.onAdMediaEnd(),"function"==typeof this.callback.onAdClosed&&this.callback.onAdClosed(this.backUpAdPlayedList),this.timeOut=null}}},{key:"isAdSkippable",value:function(){return this.AdbreakSlotList[currentRunningAd].isAdSkippable()}}],t&&Ci(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Mi=Li,ji={STORAGE:new l,setConfig:function(e,t){var i,a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="adseq_".concat(e),s="".concat(o,"_").concat(t);n.hasOwnProperty("sh")&&0==n.sh&&(n={}),r.hasOwnProperty("sh")&&0==r.sh&&(r={}),0==Object.keys(n).length&&0==Object.keys(r).length||(i=JSON.parse(localStorage.getItem(o)),a=JSON.parse(localStorage.getItem(s)),null!==i&&0!==Object.keys(i).length||(null===i?null!==a&&0!==Object.keys(a).length||(null===a?0==Object.keys(n).length?this.STORAGE.setItem(s,r):this.STORAGE.setItem(o,n):0==Object.keys(n).length?(this.STORAGE.removeItem(o),this.STORAGE.setItem(s,r)):(this.STORAGE.removeItem(s),this.STORAGE.setItem(o,n))):0==Object.keys(n).length?(this.STORAGE.removeItem(o),this.STORAGE.setItem(s,r)):(this.STORAGE.removeItem(s),this.STORAGE.setItem(o,n))))},getConfig:function(e,t){var i="adseq_".concat(e),a="".concat(i,"_").concat(t),n=this.STORAGE.getItem(i)||{},r=this.STORAGE.getItem(a)||{},o=null===localStorage.getItem(i)&&null===localStorage.getItem(a),s=0==Object.keys(r).length&&0==Object.keys(n).length;return o||s?{isKeyNull:o,isConfigEmpty:s}:0==Object.keys(n).length?{key:a,config:r}:{key:i,config:n}},getPermissionForAdRequest:function(e,t){var i=this.getConfig(e,t),a=i.hasOwnProperty("isKeyNull")&&i.isKeyNull,n=i.hasOwnProperty("isConfigEmpty")&&i.isConfigEmpty,r=i.hasOwnProperty("config")&&i.config.hasOwnProperty("sh"),o=(new Date).getTime();return!!(a||n||r)||(i.config.sl>0&&i.config["sleep-time"]<o?(this.STORAGE.removeItem(i.key),!0):(i.config.hasOwnProperty("sk")&&(i.config.sk-=1,0===i.config.sk&&(i.config={}),this.STORAGE.setItem(i.key,i.config)),!1))},decrementShowAdCounter:function(e,t){var i=this.getConfig(e,t);if(i.hasOwnProperty("isKeyNull")&&i.isKeyNull)return!0;if(i.config.hasOwnProperty("sh")){if(i.config.sh-=1,i.config.sh<=0){delete i.config.sh;var a=new Date;i.config["sleep-time"]=a.setMinutes(a.getMinutes()+i.config.sl)}this.STORAGE.setItem(i.key,i.config)}}};function Pi(e){return Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pi(e)}function Oi(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Di(a.key),a)}}function Di(e){var t=function(e,t){if("object"!=Pi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Pi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pi(t)?t:t+""}var Ni=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.vastAd,a=t.loadAd,n=t.placementId,r=t.delay,o=t.containerId,s=t.ccbString,c=t.vce,d=t.oia,l=t.adspotKey,u=t.compDivInfo,h=t.campId,p=t.adid,m=t.fbCallback,f=t.mAd;this.vastAd=i,this.vastParser=new Vt.VASTParser,this.isAdReady=!1,this.isAdShown=!1,this.isOMEnable=!1,this.adType="SINGLE",this.adSize="video",this.type=5,this.oia=d,this.skip=r,this.vce=c,this.adSpotKey=l,this.campId=h,this.adid=p,this.ccbString=s||Z.generateCCB(n),this.placementId=n,this.adbreakCount=ot.AdManager[this.placementId].adbreakCount,this.containerId=o,this.compDivInfo=u,this.loadAd=a,this.fbCallback=m,this.mAd=f,bt.log("Video Ad creator"),this.initializePlayer()},t=[{key:"parseXML",value:function(){try{return(new DOMParser).parseFromString(this.vastAd.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e)),ot.AdManager[this.placementId].rendError=!0,this.fbCallback&&ot.AdManager[this.placementId].fbCount<5?this.fbCallback():Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m111",response:e,methodname:"video.parseXML"})}}},{key:"render",value:function(){var e=this,t=this;bt.log("Video Ad going to render"),this.vastParser.parseVAST(this.parseXML(),{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0,macros:this.macros,multi:!!this.mAd}).then((function(e){bt.log("Video Ad VAST parsed, going to initialize cache"),e.ads.length<=1?(Z.setOMSDKParamater(e,t),t.jioAdsMediaPlayer.initalizeCache(e)):(t.adType="POD",t.jioAdbreakManager.initalizeAdbreak(e.ads,e.version))})).catch((function(t){bt.error("Video Ad Unable to parse the VAST Something went wrong",t),ot.AdManager[e.placementId].rendError=!0,e.fbCallback&&ot.AdManager[e.placementId].fbCount<5?e.fbCallback():Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:"m111",response:t,methodname:"video.render"})}))}},{key:"getVideoContainer",value:function(){try{var e=this.containerId;return document.getElementById(e)}catch(e){return bt.error("Video Ad cant able to find video container for instream video"),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m109",response:e,methodname:"video.getVideoContainer"}),!1}}},{key:"updateCtaHTML",value:function(){var e=document.getElementsByClassName(this.ctaButton);e&&e[0].classList.remove("jads-pe-n","jads-d-none")}},{key:"getVideoWrapHTML",value:function(e){var t=e.videoTag,i=e.audioTag,a=e.isClickable,n=e.ctaText,r=e.rndTime,o=e.rndPlay,s=e.rndMute,c=e.rndSkipClose,d=e.rndCtaEvent,l=e.rndProgress,u=e.endCardType,h=e.endCard,p=u;return this.ctaButton="jads-btn jads-cta-event ".concat(d),'<div class="jads-instream jads-fluid-container jads-f-j-center jads-pos-r">\n                <div class="jads-d-flex-aj-center jads-max">\n                    <div class="jads-cta-box jads-cta-top jads-d-flex jads-f-j-right jads-p-10" style="opacity:0.8;border-radius:0.15rem">\n                          <a href="javascript:;" class="jads-btn jads-cta-event '.concat(d," ").concat(a?"":"jads-pe-n jads-d-none",'" >\n                            ').concat(n||"Visit Advertiser","\n                          </a>\n                    </div>\n                      ").concat(t||i,"\n                      ").concat(p?'<iframe class="jads-max jads-height-100" src = '.concat(h,"></iframe>"):h&&i?'<img src="'.concat(h,'" class="jads-img"/>'):"",'\n                <div class="jads-cta-box jads-bot-60 jads-d-flex jads-f-j-right">\n                  <a href="javascript:;" class="jads-btn jads-skip-close-event jads-d-none skip-time ').concat(c,'">Skip</a>\n                </div>\n                ').concat(Z.playerControls(o,r,s,i),'\n            </div>\n            <div class="timeline_bar">\n                <div class="').concat(l,'"></div>\n            </div>\n  </div>')}},{key:"initializePlayer",value:function(){var e=this;bt.log("Video Ad Player initializing");var t={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(t,e.placementId),this.macros=t;var i={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(i,e.placementId,!0);var a={videoContainer:e.getVideoContainer(),compDivInfo:e.compDivInfo,type:12,ac:1,skip:e.skip,vce:e.vce,oia:e.oia,inst:!0,campId:e.campId,adid:e.adid,placementId:e.placementId,adbreakCount:this.adbreakCount,adSpotKey:this.adSpotKey,fbCallback:this.fbCallback,mAd:this.mAd,isHorizontalMode:this.orientation?this.orientation:ot.instream.rotateInstreamVideo,isTimerVisiable:ot.instream.setTimerVisibility,macros:t,clickmacros:i,callback:{onAdClosed:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!0})},onAdPrepared:function(){e.isAdReady=!0,e.loadAd?e.start():Ce.onAdPrepared({placementId:e.placementId,adUxType:"instream"})},onAdRender:function(t,i,a){e.isAdShown=!0,Ce.onAdRender({placementId:e.placementId,url:t,adParams:{campaignTitle:i,cta:a,campId:e.campId,adid:e.adid}})},onAdDuration:function(t,i){Ce.onAdDuration({placementId:e.placementId,adTime:t,skip:i})},onAdProgress:function(t,i){Ce.onAdProgress({placementId:e.placementId,progress:t,currentTime:i})},onAdMediaStart:function(t){Ce.onAdMediaStart({placementId:e.placementId,adInfo:t})},onAdClicked:function(t,i){Ce.onAdClicked({placementId:e.placementId,url:i})},onAdFailedToLoad:function(t){t.placementId;var i=t.errorCode,a=t.response,n=t.methodname;Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:i,response:a,methodname:n})},onAdSkippable:function(){Ce.onAdSkippable({placementId:e.placementId})},onAdSkipped:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!1})},onAdMediaEnd:function(){Ce.onAdMediaEnd({placementId:e.placementId})},onAdChange:function(t,i){Ce.onAdChange({placementId:e.placementId,adInfo:t,adCpInfo:i})}}};this.jioAdsMediaPlayer=new bi(a),this.jioAdbreakManager=new Mi(a)}},{key:"start",value:function(){var e=At.getInsData(this.placementId);ji.decrementShowAdCounter(e.adspot),"POD"==this.adType?this.jioAdbreakManager.start("SINGLE"):this.isOMEnable?Z.OMSDKInit(this):this.jioAdsMediaPlayer.play()}},{key:"isAdSkippable",value:function(){return"POD"==this.adType?this.jioAdbreakManager.isAdSkippable():this.jioAdsMediaPlayer.isAdSkippable()}},{key:"close",value:function(){"POD"==this.adType?this.jioAdbreakManager.podClose():this.jioAdsMediaPlayer.closeAd()}},{key:"closeAfter",value:function(e){}},{key:"pause",value:function(){"POD"==this.adType?this.jioAdbreakManager.pause(!0):this.jioAdsMediaPlayer.pause(!0)}},{key:"resume",value:function(){"POD"==this.adType?this.jioAdbreakManager.resume(!0):this.jioAdsMediaPlayer.resume(!0)}},{key:"firstTimePlay",value:function(){"POD"!=this.adType&&this.jioAdsMediaPlayer.firstTimePlay()}}],t&&Oi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ri=Ni,xi=function(e){var t=e.ad;try{return t=Z.replaceMacros({str:t,search:"\\[dimension\\]",macros:"240x260"}),(t=JSON.parse(t)).hasOwnProperty("result")?t:{result:t}}catch(e){return{}}};function Ui(e){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(e)}function Vi(e){return function(e){if(Array.isArray(e))return Bi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Bi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Bi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _i(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Fi(a.key),a)}}function Fi(e){var t=function(e,t){if("object"!=Ui(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ui(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ui(t)?t:t+""}var Ki=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.ad,a=t.loadAd,n=t.placementId,r=t.refreshRate,o=void 0===r?0:r,s=t.ccbString,c=t.vce,d=t.oia,l=t.campId,u=t.adid,h=t.mAd;if(this.ad=xi({ad:i}),this.loadAd=a,this.placementId=n,this.isAdShown=!1,this.adSize="350x50",this.ampImp=!1,this.oia=d,this.refreshRate=o,this.vce=c,this.campId=l,this.adid=u,this.ccbString=s||Z.generateCCB(n),this.clickEnabled=1,this.clickTimer=0,this.mAd=h,this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):2==this.vce.type?this.clickEnabled=0:this.vce.type),bt.log("Banner Ad creator"),this.ad.errors&&this.ad.errors.length)return bt.log("Banner Ad failed to fetch valid Ad"),void Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m104",response:this.ad.errors,method:"banner"});this.macros={ccb:this.ccbString,bz:this.adSize},this.placementNode=document.getElementById(this.placementId)},(t=[{key:"render",value:function(){this.reset(),this.isAdReady=!0,this.loadAd?(bt.log("Banner Ad render Ad"),this.start()):Ce.onAdPrepared({placementId:this.placementId,adUxType:"n-banner"})}},{key:"reset",value:function(){this.placementNode.innerHTML=""}},{key:"start",value:function(){if(bt.log("Banner Ad show Ad"),this.placementNode){var e=At.getInsData(this.placementId);this.adspot=e.adspot,ji.decrementShowAdCounter(e.adspot),this.placementNode.appendChild(this.view()),this.container.style.display="block",this.isAdShown=!0,this.initializeClickListener(),this.initializeRefreshSerive(),Ce.onAdRender({placementId:this.placementId})}}},{key:"initializeRefreshSerive",value:function(){ui({placementId:this.placementId,callback:this.fireViewImpression.bind(this),refreshTime:this.refreshRate,viewableCB:this.fireViewFImpression.bind(this)})}},{key:"fireViewImpression",value:function(){if(!this.ampImp){this.ampImp=!0;var e=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adspot,defaultValue:0}),t=3;0===e&&ot.frEn&&this.mAd&&(t=2),this.fireImpression(Vi(this.ad.result.imptrackers),void 0,1===e&&ot.frEn&&this.mAd?1:t),Ce.onAdViewed({placementId:this.placementId})}}},{key:"fireViewFImpression",value:function(){var e=this.ad.result.viewableimptrackers;this.fireImpression(Vi(e))}},{key:"view",value:function(){this.container=document.createElement("a"),this.container.style.display="none";var e=this.ad.result.iconimage,t=this.ad.result.title,i=this.ad.result.ctatext||"Click";this.container.href="#".concat(this.ad.result.ctafb);var a=this.ad.result.desc||this.ad.result.desc2,n=a?"".concat(a):"";return this.container.innerHTML='<div class="jads-banner">\n                        <div class="jads-d-flex">\n                          '.concat(e?'\n                            <div class="jads-d-flex jads-f-a-center jads-p-5">\n                              <img src="'.concat(e,'" class="jads-img">\n                            </div>'):"",'\n                            <div class="jads-flex-fill jads-d-flex jads-f-a-center jads-f-j-left jads-flex-wrap jads-p-5" style="flex-direction:column;align-items:flex-start">\n                                  <b>').concat(t,"</b>\n                                  ").concat(n,'\n                            </div>\n                            <div class="jads-f-a-center jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">\n                                <a class="jads-btn jads-bg-color-dark">').concat(i,"</a>\n                            </div>\n                        </div>\n          </div>"),bt.log("Banner Ad container view created"),this.container}},{key:"fireImpression",value:function(e,t,i){var a="",n="[frt]";1==i?a="req=1&res=1&f=1&dl=0&cl=0&fre=1":2==i&&(n="[frt]&fre=0");try{$.impression({id:this.placementId,URL:e,domElement:t,ccb:this.ccbString,frt:1==i?a:n})}catch(e){bt.error("cant able to fire impression",e)}}},{key:"click",value:function(){bt.log("Banner Ad clicked");var e=this.oia,t=this.isAdClickable()&&(this.ad.result.ctaurl||this.ad.result.ctafb);""!=t&&(t=Z.replaceMacrosValues(t,this.macros),Kt.click(t,e),this.fireImpression(Vi(this.ad.result.clktrackers),!0),Ce.onAdClicked({placementId:this.placementId,url:t}))}},{key:"close",value:function(){bt.log("Banner Ad close"),Ce.onAdClosed({placementId:this.placementId})}},{key:"closeAfter",value:function(e){}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.close.bind(this)},dom:this.placementNode,fullAdClick:!0,id:this.placementId}),this.adClickListener.clickBind()}},{key:"destroy",value:function(){this.container&&(this.container.remove(),this.placementNode.innerHTML=""),this.adClickListener.clickUnbind()}},{key:"isAdClickable",value:function(){return this.clickEnabled&&this.ad.result.hasOwnProperty("ctaurl")&&this.ad.result.ctaurl.length||this.ad.result.hasOwnProperty("ctafb")&&this.ad.result.ctafb.length}}])&&_i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const zi=Ki;function Gi(e){return Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gi(e)}function Hi(e){return function(e){if(Array.isArray(e))return qi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qi(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ji(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Wi(a.key),a)}}function Wi(e){var t=function(e,t){if("object"!=Gi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Gi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Gi(t)?t:t+""}var Yi=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.ad,a=t.loadAd,n=t.placementId,r=t.refreshRate,o=void 0===r?0:r,s=t.ccbString,c=t.vce,d=t.oia,l=t.campId,u=t.adid,h=t.mAd;if(this.ad=xi({ad:i}),this.loadAd=a,this.placementId=n,this.isAdShown=!1,this.adSize="300x250",this.ampImp=!1,this.oia=d,this.refreshRate=o,this.vce=c,this.campId=l,this.adid=u,this.ccbString=s||Z.generateCCB(n),this.clickEnabled=1,this.clickTimer=0,this.mAd=h,this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):2==this.vce.type?this.clickEnabled=0:this.vce.type),bt.log("Billboard Ad creator"),this.ad.errors&&this.ad.errors.length)return bt.log("Billboard Ad failed to fetch valid Ad"),void Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m104",response:this.ad.errors,methodname:"Billboard"});this.macros={ccb:this.ccbString,bz:this.adSize},this.rndCtaEvent="jads_cta_event_"+Kt.generateCacheBusting(12),this.placementNode=document.getElementById(this.placementId)},(t=[{key:"render",value:function(){this.reset(),this.loadAd?(bt.log("Billboard Ad render Ad"),this.start()):Ce.onAdPrepared({placementId:this.placementId,adUxType:"n-billboard"})}},{key:"reset",value:function(){this.placementNode.innerHTML=""}},{key:"start",value:function(){if(bt.log("Billboard Ad show Ad"),this.placementNode){var e=At.getInsData(this.placementId);this.adspot=e.adspot,ji.decrementShowAdCounter(e.adspot),this.placementNode.appendChild(this.view()),this.container.style.display="block",this.isAdShown=!0,this.initializeClickListener(),this.initializeRefreshSerive(),Ce.onAdRender({placementId:this.placementId})}}},{key:"initializeRefreshSerive",value:function(){ui({placementId:this.placementId,callback:this.fireViewImpression.bind(this),refreshTime:this.refreshRate,viewableCB:this.fireViewFImpression.bind(this)})}},{key:"fireViewImpression",value:function(){if(!this.ampImp){this.ampImp=!0;var e=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adspot,defaultValue:0}),t=3;0===e&&ot.frEn&&this.mAd&&(t=2),this.fireImpression(Hi(this.ad.result.imptrackers),void 0,1===e&&ot.frEn&&this.mAd?1:t),Ce.onAdViewed({placementId:this.placementId})}}},{key:"fireViewFImpression",value:function(){var e=this.ad.result.viewableimptrackers;e&&this.fireImpression(Hi(e))}},{key:"view",value:function(){this.container=document.createElement("a"),this.container.style.display="none";var e=this.ad.result.mainimage,t=this.ad.result.iconimage,i=this.ad.result.title,a=this.ad.result.desc||this.ad.result.desc2,n=this.ad.result.ctatext,r=a?"".concat(a):"";this.container.href="#".concat(this.ad.result.ctafb);var o=void 0!==this.ad.result&&(this.ad.result.ctaurl||this.ad.result.ctafb)||!1;return this.container.innerHTML='\n    <div class="jads-billboard">\n          <div class="jads-d-flex">\n              <div class="jads-d-flex jads-f-a-center jads-h-200">\n                  <img src="'.concat(e,'" class="jads-img-res">\n              </div>\n          </div>\n          <div class="jads-d-flex jads-h-50 jads-bg-grey">\n          ').concat(t?'<div class="jads-d-flex jads-f-a-center jads-p-5">\n              <img src="'.concat(t,'" class="jads-img">\n            </div>'):"",'\n            <div class="jads-d-flex jads-flex-fill jads-f-a-center jads-f-j-left jads-flex-wrap jads-p-5">\n            <b>').concat(i,"</b>\n                    ").concat(r,' \n            </div>\n            <div class="jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">\n            ').concat(o?'<a class="jads-btn '.concat(this.rndCtaEvent,'" >').concat(n,"</a>"):"","\n            </div>\n          </div>\n    </div>"),bt.log("Billboard Ad container view created"),this.container}},{key:"fireImpression",value:function(e,t,i){var a="",n="[frt]";1==i?a="req=1&res=1&f=1&dl=0&cl=0&fre=1":2==i&&(n="[frt]&fre=0");try{$.impression({id:this.placementId,URL:e,domElement:t,ccb:this.ccbString,frt:1==i?a:n})}catch(e){bt.error("cant able to fire impression",e)}}},{key:"click",value:function(){bt.log("Billboard Ad clicked");var e=this.oia,t=this.isAdClickable()&&(this.ad.result.ctaurl||this.ad.result.ctafb);""!=t&&(t=Z.replaceMacrosValues(t,this.macros),Kt.click(t,e),this.fireImpression(Hi(this.ad.result.clktrackers),!0),Ce.onAdClicked({placementId:this.placementId,url:t}))}},{key:"close",value:function(){bt.log("Billboard Ad close"),Ce.onAdClosed({placementId:this.placementId})}},{key:"closeAfter",value:function(e){}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.close.bind(this)},dom:this.placementNode,fullAdClick:!0,id:this.placementId}),this.adClickListener.clickBind()}},{key:"destroy",value:function(){this.container&&(this.container.remove(),this.placementNode.innerHTML=""),this.adClickListener.clickUnbind()}},{key:"isAdClickable",value:function(){return this.clickEnabled&&this.ad.result.hasOwnProperty("ctaurl")&&this.ad.result.ctaurl.length||this.ad.result.hasOwnProperty("ctafb")&&this.ad.result.ctafb.length}}])&&Ji(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Qi=Yi;function Zi(e){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(e)}function Xi(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,$i(a.key),a)}}function $i(e){var t=function(e,t){if("object"!=Zi(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Zi(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zi(t)?t:t+""}var ea=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.ad,a=t.loadAd,n=t.placementId,r=(t.inl,t.refreshRate),o=void 0===r?0:r,s=t.ccbString,c=t.wh,d=t.vce,l=t.containerId,u=void 0===l?null:l,h=t.oia,p=t.vim,m=t.campId,f=t.adid,g=t.modalAd,y=void 0!==g&&g,v=t.mAd;this.ad=i,this.loadAd=a,this.placementId=n,this.isAdShown=!1,this.adSize=c||"240x320",this.ampImp=!1,this.refreshRate=o;var b=this.adSize.split("x");if(this.width=b[0],this.height=b[1],this.modalAd=y||!1,this.modalAd&&(this.refreshRate=0),this.rndIframeId="iframe_"+Kt.generateCacheBusting(12),this.inl=!0,this.vce=d,this.oia=h,this.vim=p,this.campId=m,this.adid=f,this.mAd=v,this.ccbString=s||Z.generateCCB(n),this.clickEnabled=1,this.clickTimer=0,this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):2==this.vce.type?this.clickEnabled=0:this.vce.type),bt.log("Billboard Ad creator"),this.ad.errors&&this.ad.errors.length)return bt.log("Billboard Ad failed to fetch valid Ad"),void Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m104",response:this.ad.errors,methodname:"BillboardDisplay"});this.containerId=u,this.containerId?this.placementNode=document.getElementById(this.containerId):this.placementNode=document.getElementById(this.placementId),this.placementNode.innerHTML=""},(t=[{key:"render",value:function(){this.reset(),this.isAdReady=!0,this.loadAd?(bt.log("Billboard Ad render Ad"),this.start()):Ce.onAdPrepared({placementId:this.placementId,adUxType:"n-interstitial-html"})}},{key:"reset",value:function(){this.placementNode.innerHTML=""}},{key:"start",value:function(){if(bt.log("Billboard Ad show Ad"),this.placementNode){var e=At.getInsData(this.placementId);ji.decrementShowAdCounter(e.adspot),this.adspot=e.adspot;var t,i=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adspot,defaultValue:0});t=0===i&&ot.frEn&&this.mAd?"[frt]&fre=0":"[frt]";var a={ccb:this.ccbString,bz:this.adSize,seq:1,frt:1===i&&ot.frEn&&this.mAd?"req=1&res=1&f=1&dl=0&cl=0&fre=1":t};Z.generateMacrosList(a,this.placementId),this.ad=Z.replaceMacrosValues(this.ad,a),this.placementNode.appendChild(this.view()),this.modalAd||(this.container.style.display="block"),bt.log("Billboard HTML Ad launched IFrame"),this.isAdShown=!0,this.initializeClickListener(),this.initializeRefreshSerive(),Ce.onAdRender({placementId:this.placementId})}}},{key:"renderDisplayAd",value:function(){this.htmlsdk.renderAd()}},{key:"exitDisplayAd",value:function(){this.htmlsdk.exitAd()}},{key:"inviewEnableDisplay",value:function(){var e=document.getElementById(this.rndIframeId).contentWindow.document;e.open(),ot.clkSelf&&this.inl&&(this.ad=this.ad.replace(/clik_tracker/g,"")),this.inl&&this.ad.search("jiopopup=1")>0&&(this.ad=this.ad.replace(/clik_tracker/g,"")),e.write('<body style="border: 0px; padding: 0px; margin: 0px; overflow: hidden;">'+this.ad+"</body>"),e.close();var t=this;e.addEventListener("click",(function(e){try{var i=e.srcElement||e.target,a=i.getAttribute("data-deeplink");if(a){if(ot.clkSelf&&""!=a){var n=JSON.parse(i.getAttribute("data-click"));for(var r in n)(new Image).src=n[r]}Z.isBrandPageURL(a)&&Z.renderBrandPage(a),Ce.onAdClicked({placementId:t.placementId,url:a})}}catch(e){}}));var i=document.getElementById(this.rndIframeId);i.style.display="block",this.content=i.contentWindow}},{key:"initializeRefreshSerive",value:function(){ui({placementId:this.placementId,callback:this.fireViewImpression.bind(this),refreshTime:this.refreshRate,viewableCB:this.fireViewFImpression.bind(this)})}},{key:"view",value:function(){if(bt.log("Billboard Ad container view created"),this.modalAd){var e='<div class="jads-modal jads-d-flex-aj-center">\n        <div class="jads-interstitial">\n                    <iframe id="'.concat(this.rndIframeId,'" style="display:none"></iframe>\n        </div>\n      </div>');return Z.stringToHTML(e)}return this.container=document.createElement("div"),this.container.innerHTML='<iframe id="'.concat(this.rndIframeId,'" class="jads-frame" frameBorder=0 style="margin: 0px; border:0px; padding: 0px; display: none;\n        width:').concat(this.containerId?"100%":this.width+"px",";\n        height:").concat(this.containerId?"100%":this.height+"px","; \n        ").concat(this.clickEnabled?"":"pointer-events:none",'"></iframe>'),this.container}},{key:"fireImpression",value:function(e,t){try{$.impression({id:this.placementId,URL:e,domElement:t,ccb:this.ccbString})}catch(e){bt.error("cant able to fire impression",e)}}},{key:"fireViewImpression",value:function(){this.ampImp||(this.ampImp=!0,this.inviewEnableDisplay(),Ce.onAdViewed({placementId:this.placementId}))}},{key:"fireViewFImpression",value:function(){if(this.vim)try{var e=this.vim.split(/[\)(]+/);null!=this.content.impression_fired&&(this.content.impression_fired=1),this.content[e[0]](this.content[e[1]])}catch(e){}}},{key:"click",value:function(){bt.log("Billboard Ad click"),this.destroy(),Ce.onAdClicked({placementId:this.placementId})}},{key:"close",value:function(){bt.log("Billboard Ad close"),this.destroy(),Ce.onAdClosed({placementId:this.placementId})}},{key:"closeAfter",value:function(e){}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.close.bind(this)},dom:this.placementNode,id:this.placementId}),this.adClickListener.clickBind()}},{key:"destroy",value:function(){if(this.rndIframeId){var e=document.getElementById(this.rndIframeId);e&&e.parentNode.removeChild(e)}this.container&&this.container.remove(),this.placementNode.innerHTML="",this.adClickListener.clickUnbind()}},{key:"isAdClickable",value:function(){return this.clickEnabled&&this.ad.result.hasOwnProperty("ctaurl")&&this.ad.result.ctaurl.length||this.ad.result.hasOwnProperty("ctafb")&&this.ad.result.ctafb.length}}])&&Xi(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const ta=ea;function ia(e){return ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia(e)}function aa(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,na(a.key),a)}}function na(e){var t=function(e,t){if("object"!=ia(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=ia(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ia(t)?t:t+""}var ra=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.vastAd,a=t.loadAd,n=t.placementId,r=(t.delay,t.refreshRate),o=void 0===r?0:r,s=t.ad,c=t.vce,d=t.oia,l=t.ccbString,u=t.campId,h=t.adid,p=t.mim,m=void 0===p?0:p,f=t.fbCallback,g=t.mAd;this.vastAd=i,this.vastParser=new Vt.VASTParser,this.ad=xi({ad:s}),this.isAdShown=!1,this.adSize="video",this.refreshRate=o,this.skip="0",this.placementId=n,this.loadAd=a,this.vce=c,this.oia=d,this.campId=u,this.adid=h,this.ccbString=l||Z.generateCCB(n),this.endCard=null,this.fbCallback=f,this.placementNode=document.getElementById(this.placementId),this.mim=m,this.isOMEnable=!1,this.mAd=g,bt.log("Video Ad creator"),this.initializePlayer()},t=[{key:"parseXML",value:function(){try{return(new DOMParser).parseFromString(this.vastAd.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e)),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m111",response:e,methodname:"billboardvideo.parseXML"})}}},{key:"ctaPresent",value:function(){return void 0!==this.ad.result&&(this.ad.result.ctaurl||this.ad.result.ctafb)||!1}},{key:"view",value:function(){this.container=document.createElement("a"),this.container.style.display="none";var e=void 0!==this.ad.result?this.ad.result.mainimage:"";if(""===e)return 0;var t=void 0!==this.ad.result?this.ad.result.iconimage:"",i=void 0!==this.ad.result?this.ad.result.title:"",a=void 0!==this.ad.result?this.ad.result.desc||this.ad.result.desc2:"",n="jads_full_cta_event_"+Kt.generateCacheBusting(12),r=("jads-full ".concat(n),this.ad.result.ctatext),o=this.ctaPresent();return this.container.innerHTML='\n    <div class="jads-billboard">\n          <div class="jads-d-flex">\n              <div class="jads-d-flex jads-f-a-center jads-h-200">\n                  <img src="'.concat(e,'" class="jads-img-res">\n              </div>\n          </div>\n          <div class="jads-d-flex jads-h-50 jads-bg-grey">\n          ').concat(t?'<div class="jads-d-flex jads-f-a-center jads-p-5">\n              <img src="'.concat(t,'" class="jads-img">\n            </div>'):"",'\n            <div class="jads-d-flex jads-flex-fill jads-f-a-center jads-f-j-left jads-flex-wrap jads-p-5">\n            <b>').concat(i,"</b>\n                    ").concat(a,' \n            </div>\n            <div class="jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">\n                ').concat(o?'<a class="jads-btn '.concat(n,'" >').concat(r,"</a>"):"","\n            </div>\n          </div>\n    </div>"),this.container}},{key:"render",value:function(){var e=this.view();0===e||void 0===this.mim||this.mim<=0?this.mim=0:(this.placementNode.appendChild(e),this.container.style.display="block");var t=this;setTimeout((function(){0!==e&&0!==t.mim&&t.placementNode.removeChild(e),t.reset(),bt.log("Video Ad going to render"),t.vastParser.parseVAST(t.parseXML(),{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0,macros:t.macros,multi:!!t.mAd}).then((function(e){Z.setOMSDKParamater(e,t),t.jioAdsMediaPlayer.setVideoEndcard(t.endCard),t.jioAdsMediaPlayer.initalizeCache(e)})).catch((function(e){bt.error("Video Ad Unable to parse the VAST Something went wrong",e),Ce.onAdFailedToLoad({placementId:t.placementId,errorCode:"m111",response:e,methodname:"billboardvideo.render"})}))}),1e3*this.mim)}},{key:"reset",value:function(){var e=document.getElementById(this.placementId);e&&(e.innerHTML="")}},{key:"getVideoContainer",value:function(){try{return document.getElementById(this.placementId)}catch(e){return bt.error("Video Ad cant able to find video container for instream video"),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m109",response:e,methodname:"billboardvideo.getVideoContainer"}),!1}}},{key:"updateCtaHTML",value:function(){document.querySelectorAll(".".concat(this.ctaButton)).forEach((function(e){e.classList.remove("jads-pe-n")}))}},{key:"getVideoWrapHTML",value:function(e){var t=e.videoTag,i=e.isClickable,a=e.ctaText,n=e.rndTime,r=e.rndPlay,o=e.rndMute,s=e.rndMediaCont,c=e.rndFullCtaEvent,d=void 0!==this.ad.result?this.ad.result.iconimage:"",l=void 0!==this.ad.result?this.ad.result.title:"",u=void 0!==this.ad.result?this.ad.result.desc||this.ad.result.desc2:"",h=this.ctaPresent();return this.ctaButton=c,'<div class="jads-billboard '.concat(s,'" style = "width:100%">\n              <div class="jads-pos-r jads-h-210">\n                     \n                          <a href="javascript:;" class="').concat(c," ").concat(i?"":"jads-pe-n",'">\n                              ').concat(t,"  \n                          </a>\n                   \n                  \n                  ").concat(Z.playerControls(r,n,o),'\n              </div> \n              \n              <a href="javascript:;" class="').concat(c," ").concat(i?"":"jads-pe-n",'">\n                              <div class="jads-d-flex jads-h-40">\n                                ').concat(d?'\n                                  <div class="jads-d-flex jads-f-a-center jads-p-5">\n                                    <img src="'.concat(d,'" class="jads-img">\n                                  </div>'):"",'              \n                                  <div class="jads-flex-fill jads-d-flex jads-f-a-center jads-f-j-left jads-p-5">\n                                    <div class="jads-text-elipse jads-d-flex jads-f-a-center">\n                                      <span>\n                                        <b>').concat(l,"</b><br>\n                                          ").concat(u,'\n                                      </span>\n                                    </div>\n                                  </div>                \n                                  <div class="jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">                       \n                                  ').concat(h?'<div\n                                        class="jads-icon jads-btn-right-arrow"\n                                        title="'.concat(a,'"\n                                      ></div>'):"","\n                                  </div>\n                            </div>\n                          </a>\n                \n                                                   \n    </div>")}},{key:"initializePlayer",value:function(){var e=this,t={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(t,e.placementId),this.macros=t;var i={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(i,e.placementId,!0),this.jioAdsMediaPlayer=new bi({videoContainer:e.getVideoContainer(),type:4,skip:"0",macros:t,oia:e.oia,placementId:e.placementId,vce:e.vce,refreshRate:e.refreshRate,campId:e.campId,adid:e.adid,mAd:e.mAd,isLinkFallback:e.ad.result?e.ad.result.ctafb:"",clickTrackers:e.ad.result?e.ad.result.clktrackers:[]||0,impressionTracker:e.ad.result?e.ad.result.imptrackers:[]||0,ctatext:e.ad.result?e.ad.result.ctatext:"",touchCreative:e.ad.result?e.ad.result:"",callback:{onAdClosed:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!0})},onAdPrepared:function(){e.isAdReady=!0,e.loadAd?e.start():Ce.onAdPrepared({placementId:e.placementId})},onAdRender:function(){e.isAdShown=!0,Ce.onAdRender({placementId:e.placementId})},onAdDuration:function(t,i){Ce.onAdDuration({placementId:e.placementId,adTime:t,skip:i})},onAdProgress:function(t,i){Ce.onAdProgress({placementId:e.placementId,progress:t,currentTime:i})},onAdMediaStart:function(){Ce.onAdMediaStart({placementId:e.placementId})},onAdClicked:function(t,i){Ce.onAdClicked({placementId:e.placementId,url:i})},onAdFailedToLoad:function(t){var i=t.error,a=t.errorCode,n=t.methodname;Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:a,response:i,methodname:n})},onAdSkippable:function(){Ce.onAdSkippable({placementId:e.placementId})},onAdSkipped:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!1})},onAdMediaEnd:function(){Ce.onAdMediaEnd({placementId:e.placementId})}}})}},{key:"start",value:function(){this.isOMEnable?Z.OMSDKInit(this):this.jioAdsMediaPlayer.play()}},{key:"isAdSkippable",value:function(){this.jioAdsMediaPlayer.isAdSkippable()}},{key:"close",value:function(){this.jioAdsMediaPlayer.closeAd()}},{key:"closeAfter",value:function(e){this.jioAdsMediaPlayer.closeAfter(e)}},{key:"pause",value:function(){this.jioAdsMediaPlayer.pause()}},{key:"resume",value:function(){this.jioAdsMediaPlayer.resume()}},{key:"firstTimePlay",value:function(){this.jioAdsMediaPlayer.firstTimePlay()}}],t&&aa(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const oa=ra;function sa(e){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(e)}function ca(e){return function(e){if(Array.isArray(e))return ua(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||la(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a,n,r,o,s=[],c=!0,d=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;c=!1}else for(;!(c=(a=r.call(i)).done)&&(s.push(a.value),s.length!==t);c=!0);}catch(e){d=!0,n=e}finally{try{if(!c&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(d)throw n}}return s}}(e,t)||la(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e,t){if(e){if("string"==typeof e)return ua(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ua(e,t):void 0}}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ha(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,pa(a.key),a)}}function pa(e){var t=function(e,t){if("object"!=sa(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=sa(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sa(t)?t:t+""}var ma=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.vastAd,a=t.ad,n=t.loadAd,r=t.placementId,o=t.delay,s=t.refreshRate,c=void 0===s?0:s,d=t.ccbString,l=t.vce,u=t.oia,h=t.campId,p=t.adid,m=t.mAd;if(this.ad=xi({ad:a}),this.vastAd=i,this.loadAd=n,this.skip=o,this.placementId=r,this.rndSkipClose="close_"+Math.floor(Date.now()/1e3).toString(),this.isAdShown=!1,this.adSize="240x320",this.refreshRate=c,this.isQwerty=ot.qk,this.vce=l,this.oia=u,this.campId=h,this.adid=p,this.ccbString=d||Z.generateCCB(r),this.clickEnabled=1,this.clickTimer=0,this.isShown=!1,this.mAd=m,this.playstarted=0,this.started=!1,this.viewed=!1,this.vidShow=!1,this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):2==this.vce.type?this.clickEnabled=0:this.vce.type),this.macros={ccb:this.ccbString,bz:this.adSize},this.firedImpression=!1,this.vastParser=new Vt.VASTParser,this.customKeyList=["address","ctatext","desc","desc2","downloads","iconimage","likes","mainimage","mediumimage","phone","price","rating","salePrice","sponsored","video","title","secctatext","customimage","displayUrl"],this.vAdparamIconImage=null,this.vAdparamTitle=null,this.vAdparamDesc=null,this.vAdparamCtatext=null,this.vAdparamSecCtatext=null,this.vAdparamSecCtaUrl=null,this.vAdparamsecCtaTracker=[],bt.log("Custom Ad creator"),this.ad.errors&&this.ad.errors.length)return bt.log("Custom Ad failed to fetch valid Ad"),void Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m104",response:this.ad.errors,methodname:"CustomAd"});this.placementNode=document.getElementById(this.placementId),this.dataCustomization=this.placementNode.getAttribute("data-customization")||0,this.setCustom=!1,this.customHTML=null,this.stopVisibilityCheck=!1,this.clickElement=this.placementNode.getAttribute("click-element")||null,this.secClickElement=this.placementNode.getAttribute("sec-click-element")||null,this.closeElement=this.placementNode.getAttribute("close-element")||null,this.mandElements=this.placementNode.getAttribute("data-mand-ele")||"",this.mandElePresent=this.placementNode.hasAttribute("data-mand-ele"),this.videoElement=document.getElementsByClassName(this.placementNode.getAttribute("video-element"))[0]||0,this.dataCustomization&&(this.setCustom="set-ad-data"==this.dataCustomization,this.setCustom&&(this.customHTML=this.placementNode.hasChildNodes?this.placementNode.children:null,this.customHTML.length?this.placementNode.setAttribute("data-element",this.placementNode.firstElementChild.outerHTML):(this.placementNode.innerHTML=this.placementNode.getAttribute("data-element"),this.customHTML=this.placementNode.children)))},(t=[{key:"parseXML",value:function(){try{return(new DOMParser).parseFromString(this.vastAd.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e)),this.fbCallback&&ot.AdManager[this.placementId].fbCount<5?this.fbCallback():Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m111",response:e,methodname:"custom.parseXML"})}}},{key:"render",value:function(){var e=this,t=this;this.vastAd?(bt.log("Video Ad going to render"),this.vastParser.parseVAST(this.parseXML(),{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0,multi:!!t.mAd}).then((function(e){t.response=e,t.skip=t.skip?t.skip:Math.round(t.response.ads[0].creatives[0].skipDelay||0),t.respDuration=Math.round(t.response.ads[0].creatives[0].duration),t.refreshRate>=30&&(t.respDuration>t.refreshRate?t.refreshRate=t.respDuration+1:t.respDuration<t.refreshRate?t.refreshRate=t.refreshRate:t.refreshRate=t.respDuration+1),(t.skip<0||t.skip>t.respDuration)&&(t.skip=0),t.initalizeVastTracker()})).catch((function(t){bt.error("Video Ad Unable to parse the VAST Something went wrong",t),e.fbCallback&&ot.AdManager[e.placementId].fbCount<5?e.fbCallback():Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:"m111",response:t,methodname:"custom.render"})}))):(this.isAdReady=!0,this.loadAd?(bt.log("Custom Ad render Ad"),this.appendCustomView()?this.start():Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m110",response:ne.m110,methodname:"custom.render"})):this.appendCustomView()||Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m110",response:ne.m110,methodname:"custom.render"}))}},{key:"appendCustomView",value:function(){if(this.setCustom&&this.customHTML.length){if(!this.setCustomElements())return!1}else this.setCustom?(this.placementNode.appendChild(this.view()),this.container.style.display="block"):this.appendCustomData();return Ce.onAdPrepared({placementId:this.placementId,adUxType:"n-custom"}),this.isAdClickable()&&Ce.isAdClick({placementId:this.placementId}),!0}},{key:"selectMediaFile",value:function(){try{var e=this,t=e.creative.mediaFiles.filter((function(t){return-1!=t.mimeType.indexOf("video")&&t.bitrate<=e.maxBitrate}));return(t.length>0||(t=e.creative.mediaFiles.filter((function(e){return-1!=e.mimeType.indexOf("video")}))).length>0)&&(t.sort((function(e,t){return t.bitrate-e.bitrate})),t[0])}catch(e){return!1}}},{key:"initalizeVastTracker",value:function(){try{this.videoad=this.response.ads[0],this.creative=this.videoad.creatives[0];var e=this.selectMediaFile();if(!e)throw this.callback.onAdFailedToLoad({placementId:this.placementId,errorCode:"m113",response:ne.m113,methodname:"custom.initalizeVastTracker"}),ne.m113;if(this.mediaFile=e.fileURL,this.creative.adParameters){var t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jicon")}));this.vAdparamIconImage=t>=0?this.creative.adParameters[t].jicon:null,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jtitle")})),this.vAdparamTitle=t>=0?this.creative.adParameters[t].jtitle:null,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jdesc")})),this.vAdparamDesc=t>=0?this.creative.adParameters[t].jdesc:null,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jctatext")})),this.vAdparamCtatext=t>=0?this.creative.adParameters[t].jctatext:null,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctatext")})),this.vAdparamSecCtatext=t>=0?this.creative.adParameters[t].jsecctatext:null,this.ctatext=this.vAdparamCtatext,t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctaurl")})),this.vAdparamSecCtaUrl=t>=0?this.creative.adParameters[t].jsecctaurl:null,(t=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctatracking")})))>=0&&this.vAdparamsecCtaTracker.push(this.creative.adParameters[t].jsecctatracking)}this.vastTracker=new Vt.VASTTracker(null,this.videoad,this.creative),bt.log("Video player initialized and VASTTracker created"),this.isAdReady=!0,this.loadAd?(bt.log("Custom Ad render Ad"),this.appendCustomView()?this.start():Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m110",response:ne.m110,methodname:"custom.initalizeVastTracker"})):this.appendCustomView()||Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m110",response:ne.m110,methodname:"custom.initalizeVastTracker"}),bt.log("Video player initialized and VASTTracker created")}catch(e){bt.error("Video player Can't able to initalize vast tracker due to ",e)}}},{key:"start",value:function(){if(bt.log("Custom Ad show Ad"),this.placementNode){var e=At.getInsData(this.placementId);ji.decrementShowAdCounter(e.adspot),this.adspot=e.adspot,Ce.onAdRender({placementId:this.placementId,url:this.fetchClickUrl(!1),adParams:{campaignTitle:this.ad.result.title,cta:this.ad.result.ctatext,campId:this.campId,adid:this.adid}}),this.isAdShown=!0,this.initializeClickListener(),this.initializeRefreshSerive(),Ce.onAdMediaStart({placementId:this.placementId})}}},{key:"appendCustomData",value:function(){for(var e={},t=0,i=Object.entries(this.customKeyList);t<i.length;t++){var a=da(i[t],2),n=(a[0],a[1]);this.ad.result&&this.ad.result.hasOwnProperty(n)?"video"==n&&this.videoElement?(e[n]=this.mediaFile,e["video-skip"]=this.skip,this.registerVideoProgress(this.videoElement)):e[n]=this.ad.result[n]:("iconimage"==n&&this.vAdparamIconImage&&(e[n]=this.vAdparamIconImage),"title"==n&&this.vAdparamTitle&&(e[n]=this.vAdparamTitle),"desc"==n&&this.vAdparamDesc&&(e[n]=this.vAdparamDesc),"ctatext"==n&&this.vAdparamCtatext&&(e[n]=this.vAdparamCtatext),"secctatext"==n&&this.vAdparamSecCtatext&&(e[n]=this.vAdparamSecCtatext),this.videoElement&&(e.video=this.mediaFile,e["video-skip"]=this.skip,this.registerVideoProgress(this.videoElement)))}this.placementNode.setAttribute("data-object",JSON.stringify(e))}},{key:"setCustomElements",value:function(){if(!this.customHTML.length)return!1;if(0==this.customHTML[0].querySelectorAll("[data-native-element").length)return!1;if(this.ad.result)for(var e=0,t=Object.entries(this.customKeyList);e<t.length;e++){var i=da(t[e],2),a=(i[0],i[1]);if(this.ad.result&&this.ad.result.hasOwnProperty(a)){var n=this.customHTML[0].querySelectorAll("[data-native-element=".concat(a,"]"));if(n.length){if(this.mandElePresent)var r=this.mandElements.split(",");for(var o=0;o<n.length;o++)if("IMG"==n[o].tagName){if("customimage"==a){if(""!=this.ad.result[a]){var s=null;n[o].hasAttribute("data-ad-sizes")&&(s=n[o].getAttribute("data-ad-sizes"));var c=Object.entries(this.ad.result[a][0]);if(s){var d=s.split(","),l=!1;if(d.forEach((function(e){for(var t=0;t<c.length;t++)c[t][0]==e&&(n[o].src=c[t][1],l=!0)})),!l&&this.mandElePresent&&r.includes(a))return!1}else if(""!=c[0][1])n[o].src=c[0][1];else if(this.mandElePresent&&r.includes(a))return!1}else if(this.mandElePresent&&r.includes(a))return!1}else if(""!=this.ad.result[a])n[o].src=this.ad.result[a];else if(this.mandElePresent&&r.includes(a))return!1}else if("VIDEO"==n[o].tagName){var u=this.videoElement?this.videoElement:n[o];u.src=this.mediaFile,u.setAttribute("video-skip",this.skip),u.src&&(this.vidShow=!0),this.registerVideoProgress(u)}else n[o].innerText=this.ad.result[a]}}}else{var h=this.videoElement?this.videoElement:this.customHTML[0].querySelectorAll("[data-native-element=video]")[0];h&&(h.src=this.mediaFile,h.setAttribute("video-skip",this.skip),h.src&&(this.vidShow=!0),this.registerVideoProgress(h));var p=this.customHTML[0].querySelectorAll("[data-native-element=iconimage]")[0];this.vAdparamIconImage&&p&&("IMG"==p.tagName?p.src=this.vAdparamIconImage:p.innerText=this.vAdparamIconImage);var m=this.customHTML[0].querySelectorAll("[data-native-element=title]")[0];m&&this.vAdparamTitle&&(m.innerText=this.vAdparamTitle);var f=this.customHTML[0].querySelectorAll("[data-native-element=desc]")[0];f&&this.vAdparamDesc&&(f.innerText=this.vAdparamDesc);var g=this.customHTML[0].querySelectorAll("[data-native-element=ctatext]")[0];g&&this.vAdparamCtatext&&(g.innerText=this.vAdparamCtatext);var y=this.customHTML[0].querySelectorAll("[data-native-element=secctatext]")[0];y&&this.vAdparamSecCtatext&&(y.innerText=this.vAdparamSecCtatext)}return!0}},{key:"registerVideoProgress",value:function(e){if(this.videoElement=e,this.videoElement&&this.vidShow){this.placementNode.getElementsByTagName("video");var t,i,a,n,r=this;ot.AdManager[r.placementId].autoplay?r.videoElement.play():r.videoElement.pause(),e.onplaying=function(){t?(bt.log("The video is now resume"),void 0!==r.vastTracker.trackingEvents.resume&&r.fireImpression(ca(r.vastTracker.trackingEvents.resume))):t=!0},e.onpause=function(){this.ended?(bt.log("The video is now complete"),void 0!==r.vastTracker.trackingEvents.complete&&r.fireImpression(ca(r.vastTracker.trackingEvents.complete)),r.stopVisibilityCheck=!0,r.refreshRate>0&&(r.isShown=!0,t=!1,i=!1,r.stopVisibilityCheck=!1,a=!1,n=!1,r.videoElement.play())):(bt.log("The video has been paused"),void 0!==r.vastTracker.trackingEvents.pause&&r.fireImpression(ca(r.vastTracker.trackingEvents.pause)))},e.ontimeupdate=function(){if(r.videoElement){var e=r.videoElement.duration,t=r.videoElement.currentTime,o=.25*e,s=.5*e,c=.75*e;r.started&&!i&&t>=o&&(i=!0,bt.log("The video is now first Q"),void 0!==r.vastTracker.trackingEvents.firstQuartile&&r.fireImpression(ca(r.vastTracker.trackingEvents.firstQuartile))),r.started&&!r.viewed&&t>=2&&(r.fireViewFImpression(),r.viewed=!0),i&&!a&&t>=s&&(a=!0,bt.log("The video is now mid Q"),void 0!==r.vastTracker.trackingEvents.midpoint&&r.fireImpression(ca(r.vastTracker.trackingEvents.midpoint))),i&&a&&!n&&t>=c&&(n=!0,bt.log("The video is now third Q"),void 0!==r.vastTracker.trackingEvents.thirdQuartile&&r.fireImpression(ca(r.vastTracker.trackingEvents.thirdQuartile)))}},e.onvolumechange=function(){this.muted?(bt.log("The video is now muted"),void 0!==r.vastTracker.trackingEvents.mute&&r.fireImpression(ca(r.vastTracker.trackingEvents.mute))):(bt.log("The video is now unmuted"),void 0!==r.vastTracker.trackingEvents.unmute&&r.fireImpression(ca(r.vastTracker.trackingEvents.unmute)))}}}},{key:"getFooter",value:function(e){var t,i="",a=document.createElement("div");return t=this.isAdClickable()?this.ad.result.ctatext||"Click":"",a.className=this.isQwerty?"footer qwerty":e?"footer":"footer nodesc noicon",i+='<div class="actions left-action">'.concat(t,'</div>\n    \t<div class="actions right-action" id="">Close</div>'),a.innerHTML=i,a}},{key:"initializeRefreshSerive",value:function(){if(0!==this.placementNode.getElementsByTagName("video").length&&this.vidShow){var e=this;void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),ui({placementId:this.placementId,callback:this.fireCustomViewImpression.bind(this),refreshTime:this.refreshRate,firstTimePlay:e.firstTimePlay.bind(this),pause:e.pause.bind(this),resume:e.resume.bind(this)}),document.addEventListener(this.visibilityChange,this.visibilityHandler.bind(this),!1)}else ui({placementId:this.placementId,callback:this.fireViewImpression.bind(this),refreshTime:this.refreshRate,viewableCB:this.fireViewFImpression.bind(this)})}},{key:"visibilityHandler",value:function(){var e=this.placementNode.getElementsByTagName("video");!this.stopVisibilityCheck&&this.videoElement&&this.vidShow&&0!==e.length&&(document[this.hidden]?(bt.log("visibilitychange pause"),this.pause()):(bt.log("visibilitychange resume"),this.resume()))}},{key:"view",value:function(){var e="";this.container=document.createElement("div");var t=this.isQwerty?"qwerty":"";this.container.className="native_interstitial_container ".concat(t),this.container.style.display="none";var i=this.ad.result.mainimage||this.ad.result.mediumimage,a=this.ad.result.iconimage,n=this.ad.result.title,r=this.ad.result.desc||this.ad.result.desc2,o=a?'<div class="native_interstitial_iconimage '.concat(t,'">\n          <img class="native_interstitial_iconimg ').concat(t,'" src="').concat(a,'"/>\n        </div>'):"",s=r?a?'<div class="native_interstitial_title '.concat(t,'">').concat(n,"</div>"):'<div class="native_interstitial_title noicon '.concat(t,'">').concat(n,"</div>"):a?'<div class="native_interstitial_title nodesc '.concat(t,'">').concat(n,"</div>"):'<div class="native_interstitial_title noicon nodesc '.concat(t,'">').concat(n,"</div>"),c=r?a?'<div class="native_interstitial_tagline '.concat(t,'">').concat(r,"</div>"):'<div class="native_interstitial_tagline noicon '.concat(t,'">').concat(r,"</div>"):"",d=r?'<img class="native_interstitial_img '.concat(t,'" src="').concat(i,'"/>'):'<img class="native_interstitial_img nodesc '.concat(t,'"src="').concat(i,'"/>'),l='<div class="native_interstitial_background '.concat(t,'">').concat(d,"</div>"),u=r?'<div class="native_interstitial_image '.concat(t,'">').concat(l,"</div>"):'<div class="native_interstitial_image nodesc '.concat(t,'">').concat(l,"</div>");return e+='<div class="native_interstitial_xbutton">'.concat(xbutton,'</div>\n            <div class="native_interstitial_main ').concat(t,'">\n              <div class="native_interstitial_header ').concat(t,'">\n                ').concat(o,"\n                ").concat(s,"\n              </div>\n              ").concat(u,"\n              ").concat(c,"\n            </div>"),this.container.innerHTML=e,this.container.appendChild(this.getFooter(a||r)),bt.log("Custom Ad container view created"),this.container}},{key:"fireImpression",value:function(e,t,i,a){if(!this.isShown){var n="",r="[frt]";1==a?n="req=1&res=1&f=1&dl=0&cl=0&fre=1":2==a&&(r="[frt]&fre=0");try{$.impression({id:this.placementId,URL:e,domElement:t,ccb:this.ccbString,isClick:!!i,frt:1==a?n:r})}catch(e){bt.error("cant able to fire impression",e)}}}},{key:"fireViewImpression",value:function(){if(!this.ampImp){this.ampImp=!0;var e=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adspot,defaultValue:0}),t=3;0===e&&ot.frEn&&this.mAd&&(t=2),this.ad.result&&(this.fireImpression(ca(this.ad.result.imptrackers),void 0,void 0,1===e&&ot.frEn&&this.mAd?1:t),Ce.onAdViewed({placementId:this.placementId}))}}},{key:"fireViewFImpression",value:function(){if(this.ad.result){var e=this.ad.result.viewableimptrackers;e&&this.fireImpression(ca(e))}}},{key:"fireCustomViewImpression",value:function(){if(!this.firedImpression&&!this.isShown&&!this.ampImp){var e=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adspot,defaultValue:0}),t=this.macros;if(1===e&&ot.frEn&&this.mAd?t.frt="req=1&res=1&f=1&dl=0&cl=0&fre=1":this.mAd&&0===e&&ot.frEn&&(t.frt="[frt]&fre=0"),this.vastTracker)this.ad.result&&this.vastTracker.trackURLs(this.ad.result.imptrackers,t),this.isShown||this.vastTracker.trackImpression(t);else if(this.ad.result){var i=3;0===e&&ot.frEn&&this.mAd&&(i=2),this.fireImpression(ca(this.ad.result.imptrackers),void 0,void 0,1===e&&ot.frEn&&this.mAd?1:i)}this.firedImpression=!0}}},{key:"click",value:function(e){var t="",i="";bt.log("Custom Ad click");var a="",n=this.oia;this.isAdClickable()&&(a=i=(t=this.fetchClickUrl(!0,e))[1]||t[0],Kt.click(i,n)),this.destroy(),Ce.onAdClicked({placementId:this.placementId,url:a})}},{key:"close",value:function(){bt.log("Custom Ad close"),this.destroy(),Ce.onAdClosed({placementId:this.placementId})}},{key:"closeAfter",value:function(e){}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.close.bind(this)},dom:this.placementNode,id:this.placementId,clickClass:this.clickElement,closeClass:this.closeElement,rndCtaEvent:this.rndCtaEvent,secClickClass:this.secClickElement,rndSkipClose:this.rndSkipClose}),this.adClickListener.clickBind()}},{key:"destroy",value:function(){this.adClickListener.clickUnbind()}},{key:"fetchClickUrl",value:function(e,t){var i,a="",n=[],r=[],o={bz:this.adSize,ccb:this.ccbString,seq:1};Z.generateMacrosList(o,this.placementId,!0),this.clickmacros=o;var s=!1;i=this.response&&this.response.ads[0].extensions&&this.response.ads[0].extensions[0]&&this.response.ads[0].extensions[0].children&&this.response.ads[0].extensions[0].children[0]?this.response.ads[0].extensions[0].children[0].value:"";var c="";this.companionVastTracker&&null!=this.companionVastTracker.clickThroughURLTemplate&&3==this.vce.type?(e&&this.companionVastTracker.click("",this.clickmacros),a=this.companionVastTracker.clickThroughURLTemplate):this.vastTracker?t&&this.secCtaUrl?(e&&this.vastTracker.trackURLs(this.secCtaTracker,this.clickmacros),a=this.secCtaUrl):(i||null!=this.vastTracker.clickThroughURLTemplate)&&(e&&this.vastTracker.click("",this.clickmacros),c=i,a=this.vastTracker.clickThroughURLTemplate.url,n=this.vastTracker.clickTrackingURLTemplates,s=!0):(a=this.ad.result.ctaurl||this.ad.result.ctafb,n=this.ad.result.clktrackers,e&&this.fireImpression(ca(this.ad.result.clktrackers),!0,!0)),a||(a=this.ad.result.ctaurl||this.ad.result.ctafb,n=this.ad.result.clktrackers,e&&this.fireImpression(ca(this.ad.result.clktrackers),!0,!0));for(var d=0;d<n.length;d++)r.push(Z.replaceMacrosValues(s?n[d].url:n[d],this.clickmacros));return a&&(a=Z.replaceMacrosValues(a,this.macros)),[a,c,r]}},{key:"isAdClickable",value:function(){return this.clickEnabled?this.vastTracker&&null!=this.vastTracker.clickThroughURLTemplate?""!=this.vastTracker.clickThroughURLTemplate.url:this.ad.result?this.ad.result.ctaurl||this.ad.result.ctafb:"":""}},{key:"firstTimePlay",value:function(){var e=this;if(this.videoElement&&this.vidShow){this.playPromise=this.videoElement.play();var t=this;void 0!==this.playPromise&&this.playPromise.then((function(i){e.playstarted=1,bt.log("The video is now start"),t.started||void 0!==t.vastTracker.trackingEvents.start&&(t.fireImpression(ca(t.vastTracker.trackingEvents.start)),t.started=!0)})).catch((function(e){}))}}},{key:"pause",value:function(){if(this.videoElement&&this.vidShow)if(this.playstarted)this.videoElement.pause();else{var e=this;this.videoElement.addEventListener("playing",(function(t){e.videoElement.pause()}),{once:!0})}}},{key:"resume",value:function(){this.videoElement&&this.vidShow&&this.videoElement.play()}}])&&ha(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const fa=ma;function ga(e){return ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(e)}function ya(e){return function(e){if(Array.isArray(e))return va(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return va(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?va(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ba(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Aa(a.key),a)}}function Aa(e){var t=function(e,t){if("object"!=ga(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=ga(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ga(t)?t:t+""}var ka=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.ad,a=t.loadAd,n=t.placementId,r=t.ccbString,o=t.refreshRate,s=void 0===o?0:o,c=t.modalAd,d=t.vce,l=t.oia,u=t.campId,h=t.adid,p=t.mAd;if(this.ad=xi({ad:i}),this.loadAd=a,this.placementId=n,this.modalAd=c||!1,this.modalContainer="interstitalModalContId",this.rndSkipClose="close_"+Kt.generateCacheBusting(12),this.rndCtaEvent="jads_cta_event_"+Kt.generateCacheBusting(12),this.isAdShown=!1,this.adSize="240x320",this.oia=l,this.ampImp=!1,this.refreshRate=s,this.modalAd&&(this.refreshRate=0),this.vce=d,this.campId=u,this.adid=h,this.ccbString=r||Z.generateCCB(n),this.clickEnabled=1,this.clickTimer=0,this.mAd=p,this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):2==this.vce.type?this.clickEnabled=0:this.vce.type),bt.log("Interstitial Ad creator"),this.ad.errors&&this.ad.errors.length)return bt.log("Interstitial Ad failed to fetch valid Ad"),void Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m104",response:this.ad.errors,methodname:"Interstitial"});this.macros={ccb:this.ccbString,bz:this.adSize},this.placementNode=document.getElementById(this.placementId),this.placementNode.innerHTML=""},(t=[{key:"render",value:function(){this.isAdReady=!0,this.loadAd?(bt.log("Interstitial Ad render Ad"),this.start()):Ce.onAdPrepared({placementId:this.placementId,adUxType:"n-interstitial"})}},{key:"start",value:function(){if(bt.log("Interstitial Ad show Ad"),this.placementNode){var e=At.getInsData(this.placementId);ji.decrementShowAdCounter(e.adspot),this.adspot=e.adspot,this.placementNode.appendChild(this.view()),this.container.style.display="block",this.isAdShown=!0,this.initializeClickListener(),this.initializeRefreshSerive(),Ce.onAdRender({placementId:this.placementId})}}},{key:"initializeRefreshSerive",value:function(){ui({pId:this.placementId,placementId:this.modalAd?this.modalContainer:this.placementId,callback:this.fireViewImpression.bind(this),refreshTime:this.refreshRate,viewableCB:this.fireViewFImpression.bind(this)})}},{key:"view",value:function(){var e="";this.container=document.createElement("div"),this.container.style.display="none";var t=this.ad.result.mainimage||this.ad.result.mediumimage,i=this.ad.result.iconimage,a=this.ad.result.title,n=this.ad.result.ctatext,r=this.ad.result.desc||this.ad.result.desc2;return e=this.modalAd?'<div class="jads-modal jads-d-flex-aj-center">\n      <div class="jads-interstitial">\n        <div class="jads-d-flex-aj-center jads-height-inher">\n            <div class="jads-d-flex jads-f-j-right jads-cta-box jads-cta-top jads-p-10">\n              <a class="jads-icon jads-skip-close-event jads-icon-close '.concat(this.rndSkipClose,'"></a>\n            </div>'):'<div class="jads-dynamic-display jads-fluid-container">\n      <div class="jads-d-flex-aj-center">',e+='<div class="jads-port-disp jads-max jads-row jads-cen-item">                   \n                '.concat(i?'<div class="jads-d-flex jads-p-10 jads-f-j-center">\n                    <img src="'.concat(i,'" class="jads-h-50">\n                  </div>'):"",'\n                <div class="jads-port-disp jads-col">\n                ').concat(a?'<div class="jads-d-flex jads-f-j-center jads-p-10 jads-text-elipse"><b>'.concat(a,"</b>\n                  </div>"):"","\n                ").concat(r?'<div class="jads-d-flex jads-f-j-center jads-p-10 jads-text-center">\n                    '.concat(r,"\n                    </div>"):"",'\n                </div>\n              </div>\n              <div class="jads-pos-r jads-d-flex-aj-center" id="').concat(this.modalContainer,'">\n                 <img src="').concat(t,'" class="jads-img-res">\n                  <div class="jads-land-disp jads-media-info-box">\n                      <div class="jads-d-flex">\n                      ').concat(i?'\n                        <div class="jads-d-flex jads-f-a-center jads-p-5">\n                          <img src="'.concat(i,'" class="jads-h-50">\n                        </div>'):"",'\n                        <div class="jads-flex-fill jads-d-flex jads-f-a-center jads-f-j-left jads-flex-wrap jads-p-5 jads-col">\n                          <div><b>').concat(a,"</b></div>\n                           <div>   ").concat(r,'</div>\n                        </div>\n                        <div class="jads-f-a-center jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">\n                        ').concat(n?'<a href="javascript:;" class="jads-btn jads-sec-cta-event jads-dynamic-display-cta-but '.concat(this.rndSecCtaEvent,'">').concat(n,"</a>"):'<a href="javascript:;" class="jads-btn jads-sec-cta-event '.concat(this.rndSecCtaEvent,'">Shop Now</a>'),'\n                            \n                        </div>\n                    </div>\n                  </div>\n                </div>\n              <div class="jads-port-disp jads-max">\n              ').concat(n?'<div class="jads-d-flex jads-f-j-center jads-max"><a href="javascript:;" target="_blank" class="jads-btn jads-sec-cta-event jads-dynamic-display-cta-but '.concat(this.rndSecCtaEvent,'">').concat(n,"</a></div>"):'<div class="jads-d-flex jads-f-j-center"><a href="javascript:;" target="_blank" class="jads-btn jads-sec-cta-event jads-btn-grey '.concat(this.rndSecCtaEvent,'">Shop Now</a></div>'),"\n                \n              </div>"),e+="</div></div>",this.modalAd&&(e+="</div>"),this.container.innerHTML=e,bt.log("Interstitial Ad container view created"),this.container}},{key:"fireImpression",value:function(e,t,i){var a="",n="[frt]";1==i?a="req=1&res=1&f=1&dl=0&cl=0&fre=1":2==i&&(n="[frt]&fre=0");try{$.impression({id:this.placementId,URL:e,domElement:t,ccb:this.ccbString,frt:1==i?a:n})}catch(e){bt.error("cant able to fire impression",e)}}},{key:"fireViewImpression",value:function(){if(!this.ampImp){this.ampImp=!0;var e=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adspot,defaultValue:0}),t=3;0===e&&ot.frEn&&this.mAd&&(t=2),this.fireImpression(ya(this.ad.result.imptrackers),void 0,1===e&&ot.frEn&&this.mAd?1:t),Ce.onAdViewed({placementId:this.placementId})}}},{key:"fireViewFImpression",value:function(){var e=this.ad.result.viewableimptrackers;e&&this.fireImpression(ya(e))}},{key:"click",value:function(){bt.log("Interstitial Ad click");var e=this.oia,t=this.isAdClickable()&&(this.ad.result.ctaurl||this.ad.result.ctafb);""!=t&&(t=Z.replaceMacrosValues(t,this.macros),Kt.click(t,e),this.fireImpression(ya(this.ad.result.clktrackers),!0),Ce.onAdClicked({placementId:this.placementId,url:t}))}},{key:"close",value:function(){bt.log("Interstitial Ad close"),this.destroy(),Ce.onAdClosed({placementId:this.placementId},!0)}},{key:"closeAfter",value:function(e){}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.close.bind(this)},dom:this.placementNode,id:this.placementId,rndSkipClose:this.rndSkipClose,rndCtaEvent:this.rndCtaEvent}),this.adClickListener.clickBind()}},{key:"destroy",value:function(){this.container&&(this.container.remove(),this.placementNode.innerHTML=""),this.adClickListener.clickUnbind()}},{key:"isAdClickable",value:function(){return this.clickEnabled&&this.ad.result.hasOwnProperty("ctaurl")&&this.ad.result.ctaurl.length||this.ad.result.hasOwnProperty("ctafb")&&this.ad.result.ctafb.length}}])&&ba(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ia=ka;function Sa(e){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sa(e)}function Ta(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,wa(a.key),a)}}function wa(e){var t=function(e,t){if("object"!=Sa(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Sa(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sa(t)?t:t+""}var Ca=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.ad,a=t.loadAd,n=t.placementId,r=t.inl,o=t.modalAd,s=t.refreshRate,c=void 0===s?0:s,d=t.ccbString,l=t.wh,u=t.vce,h=t.oia,p=t.vim,m=t.containerId,f=void 0===m?null:m,g=t.campId,y=t.delay,v=t.adid,b=t.mAd;this.ad=i,this.loadAd=a,this.placementId=n,this.isAdShown=!1,this.adSize=l||"240x320",this.ampImp=!1,this.refreshRate=c,this.rndSkipClose="close_"+Kt.generateCacheBusting(12);var A=this.adSize.split("x");if(this.width=A[0],this.skip=y,this.height=A[1],this.modalAd=o||!1,this.modalAd&&(this.refreshRate=0),this.rndIframeId="iframe_"+Kt.generateCacheBusting(12),this.inl=r,this.vce=u,this.oia=h,this.vim=p,this.campId=g,this.adid=v,this.ccbString=d||Z.generateCCB(n),this.clickEnabled=1,this.clickTimer=0,this.closeButtonTimeOut=null,this.mAd=b,this.vce&&(0==this.vce.type?this.clickEnabled=1:1==this.vce.type?(this.vce.time>0&&(this.clickEnabled=0),this.clickTimer=this.vce.time):2==this.vce.type?this.clickEnabled=0:this.vce.type),bt.log("Interstitial Ad creator"),this.ad.errors&&this.ad.errors.length)return bt.log("Interstitial Ad failed to fetch valid Ad"),void Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m104",response:this.ad.errors,methodname:"InterstitialDisplay"});this.modalAd||(this.containerId=f),this.containerId?this.placementNode=document.getElementById(this.containerId):this.placementNode=document.getElementById(this.placementId),this.placementNode.innerHTML=""},(t=[{key:"render",value:function(){this.isAdReady=!0,this.loadAd?(bt.log("Interstitial Ad render Ad"),this.start(),this.insertCloseButton()):Ce.onAdPrepared({placementId:this.placementId,adUxType:"n-interstitial-html"})}},{key:"insertCloseButton",value:function(){if(!(this.skip<0)){var e='<div class="jads-cta-box jads-cta-top jads-flex-right">\n    <a class="jads-icon jads-skip-close-event jads-icon-close '.concat(this.rndSkipClose,'"  style="position: absolute;right:0px"></a>\n  </div>'),t=this.stringToHTML(e),i=document.querySelector(".jads-interstitial");null!=i&&(this.closeButtonTimeOut=setTimeout((function(){i.insertBefore(t,i.firstChild)}),1e3*this.skip))}}},{key:"clearCloseButtonTimeOut",value:function(){clearTimeout(this.clearCloseButtonTimeOut),this.closeButtonTimeOut=null}},{key:"stringToHTML",value:function(e){return(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("DIV")[0]}},{key:"start",value:function(){if(bt.log("Interstitial Ad show Ad"),this.placementNode){var e=At.getInsData(this.placementId);ji.decrementShowAdCounter(e.adspot),this.adspot=e.adspot;var t,i=ot.AdManager[this.placementId].masterConfigManager.get({type:"FRE",value:this.adspot,defaultValue:0});t=0===i&&ot.frEn&&this.mAd?"[frt]&fre=0":"[frt]";var a={ccb:this.ccbString,bz:this.adSize,seq:1,frt:1===i&&ot.frEn&&this.mAd?"req=1&res=1&f=1&dl=0&cl=0&fre=1":t};Z.generateMacrosList(a,this.placementId),this.ad=Z.replaceMacrosValues(this.ad,a),this.placementNode.appendChild(this.view()),this.modalAd||(this.container.style.display="block"),bt.log("Interstitial HTML Ad launched IFrame"),this.isAdShown=!0;var n=(new DOMParser).parseFromString(this.ad,"text/html");this.initializeClickListener(),this.initializeRefreshSerive(),Ce.onAdRender({placementId:this.placementId,adParams:{campaignTitle:n?n.title:"",cta:"",campId:this.campId,adid:this.adid}})}}},{key:"renderDisplayAd",value:function(){this.htmlsdk.renderAd()}},{key:"exitDisplayAd",value:function(){this.htmlsdk.exitAd()}},{key:"inviewEnableDisplay",value:function(){var e=document.getElementById(this.rndIframeId).contentWindow.document;e.open(),ot.clkSelf&&this.inl&&(this.ad=this.ad.replace(/clik_tracker/g,"")),this.inl&&this.ad.search("jiopopup=1")>0&&(this.ad=this.ad.replace(/clik_tracker/g,"")),e.write('<body style="border: 0px; padding: 0px; margin: 0px; overflow: hidden;">'+this.ad+"</body>"),e.close();var t=this;e.addEventListener("click",(function(e){try{var i=e.srcElement||e.target,a=i.getAttribute("data-deeplink");if(a){if(ot.clkSelf&&""!=a){var n=JSON.parse(i.getAttribute("data-click"));for(var r in n)(new Image).src=n[r]}Z.isBrandPageURL(a)&&Z.renderBrandPage(a),Ce.onAdClicked({placementId:t.placementId,url:a})}}catch(e){}}));var i=document.getElementById(this.rndIframeId);i.style.display="block",this.content=i.contentWindow}},{key:"initializeRefreshSerive",value:function(){ui({placementId:this.placementId,callback:this.fireViewImpression.bind(this),refreshTime:this.refreshRate,viewableCB:this.fireViewFImpression.bind(this)})}},{key:"view",value:function(){if(bt.log("Interstitial Ad container view created"),this.modalAd){var e='<div class="jads-modal jads-d-flex-aj-center">\n        <div class="'.concat(this.modalAd?"jads-interstitial":"jads-dynamic-display",' jads-f-a-center">\n        <div class="jads-d-flex-aj-center jads-height-inher">\n          ').concat(this.skip<=0?'<div class="jads-d-flex jads-f-j-right jads-cta-box jads-cta-top jads-p-10 jads-cta-top" style="padding:0px">\n            <a class="jads-icon jads-skip-close-event jads-icon-close '.concat(this.rndSkipClose,'"  style="position: absolute;right:0px"></a>\n          </div>'):"",'\n                      \n\n\n              <iframe id="').concat(this.rndIframeId,'" style="display:none;width:100%;height:100%"></iframe>\n            </div>\n          </div>\n        </div>\n      </div>');return Z.stringToHTML(e)}this.container=document.createElement("div");var t="".concat(this.containerId?"100%":this.width+"px"),i="".concat(this.containerId?"100%":this.height+"px");return this.container=document.createElement("div"),this.container.style.width=t,this.container.style.height=i,this.container.innerHTML='<iframe id="'.concat(this.rndIframeId,'" class="jads-frame" frameBorder=0 style="margin: 0px; border:0px; padding: 0px; display: none;\n        width:').concat(t,";\n        height:").concat(i,";\n        ").concat(this.clickEnabled?"":"pointer-events:none",'"></iframe>'),this.container}},{key:"fireImpression",value:function(e,t){try{$.impression({id:this.placementId,URL:e,domElement:t,ccb:this.ccbString})}catch(e){bt.error("cant able to fire impression",e)}}},{key:"fireViewImpression",value:function(){this.ampImp||(this.ampImp=!0,this.inviewEnableDisplay(),Ce.onAdViewed({placementId:this.placementId}))}},{key:"fireViewFImpression",value:function(){if(this.vim)try{var e=this.vim.split(/[\)(]+/);null!=this.content.impression_fired&&(this.content.impression_fired=1),this.content[e[0]](this.content[e[1]])}catch(e){}}},{key:"click",value:function(){bt.log("Interstitial Ad click"),this.destroy(),Ce.onAdClicked({placementId:this.placementId})}},{key:"close",value:function(){bt.log("Interstitial Ad close"),this.destroy(),this.clearCloseButtonTimeOut(),Ce.onAdClosed({placementId:this.placementId})}},{key:"closeAfter",value:function(e){}},{key:"initializeClickListener",value:function(){this.adClickListener=new Wt({callback:{click:this.click.bind(this),close:this.close.bind(this)},dom:this.placementNode,id:this.placementId,rndSkipClose:this.rndSkipClose}),this.adClickListener.clickBind()}},{key:"destroy",value:function(){if(this.rndIframeId){var e=document.getElementById(this.rndIframeId);e&&e.parentNode.removeChild(e)}this.container&&this.container.remove(),this.placementNode.innerHTML="",this.adClickListener.clickUnbind()}},{key:"isAdClickable",value:function(){return this.clickEnabled&&this.ad.result.hasOwnProperty("ctaurl")&&this.ad.result.ctaurl.length||this.ad.result.hasOwnProperty("ctafb")&&this.ad.result.ctafb.length}}])&&Ta(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ea=Ca;function La(e){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},La(e)}function Ma(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ja(a.key),a)}}function ja(e){var t=function(e,t){if("object"!=La(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=La(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==La(t)?t:t+""}var Pa=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.vastAd,a=t.loadAd,n=t.placementId,r=t.ad,o=t.modalAd,s=t.ccbString,c=t.vce,d=t.delay,l=t.oia,u=t.campId,h=t.adid,p=t.refreshRate,m=void 0===p?0:p,f=t.fbCallback,g=t.mAd;this.vastAd=i,this.vastParser=new Vt.VASTParser,this.ad=xi({ad:r}),this.isAdShown=!1,this.adSize="video",this.skip=d,this.placementId=n,this.modalAd=o||!1,this.modalContainer="interstitalModalContId",this.placementNode=null,this.loadAd=a,this.creative={},this.vce=c,this.campId=u,this.adid=h,this.oia=l,this.ccbString=s||Z.generateCCB(n),this.iconImage=null,this.adTitle=null,this.desc=null,this.colorTitle=null,this.colorTitleStyle="",this.colorDesc=null,this.colorDescStyle="",this.ctatext=null,this.colorCtaText=null,this.colorCtaButton=null,this.colorCtaStyle="",this.colorSecCtaText=null,this.colorSecCtaButton=null,this.colorSecCtaStyle="",this.secctatext=null,this.secCtaUrl="",this.secCtaTracker=[],this.isOMEnable=!1,this.placementNode=document.getElementById(this.placementId),this.refreshRate=m,this.modalAd&&(this.refreshRate=0),this.fbCallback=f,this.mAd=g,this.endCard=this.ad.hasOwnProperty("result")?pi(this.ad.result):null,bt.log("Video Ad creator"),this.initializePlayer()},t=[{key:"parseXML",value:function(){try{return(new DOMParser).parseFromString(this.vastAd.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e)),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m111",response:e,methodname:"interstitialvideo.parseXML"})}}},{key:"render",value:function(){var e=this,t=this;bt.log("Video Ad going to render"),this.vastParser.parseVAST(this.parseXML(),{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0,macros:this.macros,multi:!!this.mAd}).then((function(e){Z.setOMSDKParamater(e,t),t.jioAdsMediaPlayer.setVideoEndcard(t.endCard),t.jioAdsMediaPlayer.initalizeCache(e)})).catch((function(t){bt.error("Video Ad Unable to parse the VAST Something went wrong",t),Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:"m111",response:t,methodname:"interstitialvideo.render"})}))}},{key:"getVideoContainer",value:function(){try{return document.getElementById(this.placementId)}catch(e){return bt.error("Video Ad cant able to find video container for instream video"),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m109",response:e,methodname:"interstitialvideo.getVideoContainer"}),!1}}},{key:"vastAdParmsParsing",value:function(){var e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jicon")}));this.iconImage=e>=0?this.creative.adParameters[e].jicon:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jtitle")})),this.adTitle=e>=0?this.creative.adParameters[e].jtitle:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jdesc")})),this.desc=e>=0?this.creative.adParameters[e].jdesc:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jctatext")})),this.ctatext=e>=0?this.creative.adParameters[e].jctatext:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctatext")})),this.secctatext=e>=0?this.creative.adParameters[e].jsecctatext:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jtitlecolor")})),this.colorTitle=e>=0?this.creative.adParameters[e].jtitlecolor:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jdesccolor")})),this.colorTitleStyle=this.colorTitle?'style="color:'.concat(this.colorTitle,';"'):"",this.colorDesc=e>=0?this.creative.adParameters[e].jdesccolor:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jctatextcolor")})),this.colorDescStyle=this.colorDesc?'style="color: '.concat(this.colorDesc,';"'):"",this.colorCtaText=e>=0?this.creative.adParameters[e].jctatextcolor:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jctabuttoncolor")})),this.colorCtaButton=e>=0?this.creative.adParameters[e].jctabuttoncolor:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctaurl")})),this.secCtaUrl=e>=0?this.creative.adParameters[e].jsecctaurl:null,(e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctatracking")})))>=0&&this.secCtaTracker.push(this.creative.adParameters[e].jsecctatracking),e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctatextcolor")})),this.colorSecCtaText=e>=0?this.creative.adParameters[e].jsecctatextcolor:null,e=this.creative.adParameters.findIndex((function(e){return e.hasOwnProperty("jsecctabuttoncolor")})),this.colorSecCtaButton=e>=0?this.creative.adParameters[e].jsecctabuttoncolor:null,this.colorCtaText&&this.colorCtaButton?this.colorCtaStyle='style="color: '.concat(this.colorCtaText,"; background: ").concat(this.colorCtaButton,'"'):this.colorCtaText?this.colorCtaStyle='style="color: '.concat(this.colorCtaText,';"'):this.colorCtaButton?this.colorCtaStyle='style="background: '.concat(this.colorCtaButton,';"'):this.colorCtaStyle="",this.colorSecCtaText&&this.colorSecCtaButton?this.colorSecCtaStyle='style="color: '.concat(this.colorSecCtaText,"; background: ").concat(this.colorSecCtaButton,'"'):this.colorSecCtaText?this.colorSecCtaStyle='style="color: '.concat(this.colorSecCtaText,';"'):this.colorSecCtaButton?this.colorSecCtaStyle='style="background: '.concat(this.colorSecCtaButton,';"'):this.colorSecCtaStyle=""}},{key:"updateCtaHTML",value:function(){var e=document.getElementsByClassName(this.ctaButton);e&&e[0].classList.remove("jads-pe-n","jads-d-none")}},{key:"getVideoWrapHTML",value:function(e){var t=e.videoTag,i=e.audioTag,a=e.isClickable,n=e.ctaText,r=e.creative,o=e.rndTime,s=e.rndPlay,c=e.rndMute,d=e.rndMediaCont,l=e.rndSkipClose,u=e.rndCtaEvent,h=e.rndSecCtaEvent;this.creative=r,this.endCard=e.endCard,this.ctaButton="jads-btn jads-cta-event ".concat(u);var p="";if(void 0!==this.ad.result)this.iconImage=this.ad.result.iconimage,this.adTitle=this.ad.result.title,this.desc=this.ad.result.desc||this.ad.result.desc2;else if(this.vastAd&&this.creative.adParameters){this.vastAdParmsParsing();var m={secCtaUrl:this.secCtaUrl,secCtaTracker:this.secCtaTracker};this.jioAdsMediaPlayer.setSecCta(m)}return void 0!==this.ad.result||this.creative.adParameters?(p=Z.modalHead(l),p+=Z.topIntersCTA(u,a,this.colorCtaStyle,n),p+="".concat(this.endCard||i?'<div class="jads-d-flex jads-end-card jads-d-none">\n                        <img src="'.concat(this.endCard,'" class="jads-img-res">\n                    </div>'):"",'\n                <div class="').concat(d,' jads-max" id="').concat(this.modalContainer,'" >\n                  <div class="jads-port-disp">                   \n                    ').concat(this.iconImage?'<div class="jads-d-flex jads-p-10 jads-f-j-center">\n                        <img src="'.concat(this.iconImage,'" class="jads-h-50">\n                      </div>'):"",'\n                    <div style = "display:flex;flex-direction:column;padding:5px">\n                    ').concat(this.adTitle?'<div class="jads-d-flex jads-f-j-center jads-p-10 jads-text-elipse" style="padding-bottom:3px" ><b '.concat(this.colorTitleStyle,">").concat(this.adTitle,"</b>\n                      </div>"):"","\n                    ").concat(this.desc?'<div class="jads-d-flex jads-f-j-center jads-text-center jads-cen-border" '.concat(this.colorDescStyle,">\n                        ").concat(this.desc,"\n                        </div>"):"","\n                    </div>\n                    ").concat(a?'<div class="jads-d-flex jads-f-j-center"><a href="javascript:;" target="_blank" class="jads-btn jads-sec-cta-event jads-btn-grey '.concat(h,'" ').concat(this.colorSecCtaStyle,">").concat(this.secctatext||"Shop Now","</a></div>"):"",'\n                  </div>\n                  <div class="jads-pos-r jads-d-flex-aj-center">\n                      ').concat(t||i,'\n                      <div class="jads-land-disp jads-media-info-box jads-interstitial-margin">\n                          <div class="jads-d-flex">\n                          ').concat(this.iconImage?'\n                            <div class="jads-d-flex jads-f-a-center jads-p-5">\n                              <img src="'.concat(this.iconImage,'" class="jads-h-50">\n                            </div>'):"",'\n                            <div class="jads-flex-fill jads-d-flex jads-f-a-center jads-f-j-left jads-flex-wrap jads-p-5">\n                              <b ').concat(this.colorTitleStyle,">").concat(this.adTitle,"</b>\n                                  ").concat(this.desc,'\n                            </div>\n                            <div class="jads-f-a-center jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">\n                            ').concat(a?'<a href="javascript:;" class="jads-btn jads-sec-cta-event '.concat(h,'" ').concat(this.colorSecCtaStyle,">").concat(this.secctatext||"Shop Now","\n                                </a>"):"","\n                            </div>\n                        </div>\n                      </div>\n                      ").concat(Z.playerControls(s,o,c,null,12),"\n                  </div>\n                    "),p+="</div></div>",this.modalAd&&(p+="</div>")):(p=Z.modalHead(l),p+=Z.topIntersCTA(u,a,this.colorCtaStyle,n),p+="".concat(this.endCard||i?'<div class="jads-d-flex jads-end-card jads-height-100 jads-d-none"><img src="'.concat(this.endCard,'" class="jads-img-res"></div>'):"",'\n              <div class="jads-pos-r ').concat(d,'" id="').concat(this.modalContainer,'">\n                  <div class="jads-d-flex-aj-center">\n                    ').concat(t||i,"\n                    ").concat(Z.playerControls(s,o,c),"\n                  </div>\n              </div>"),p+="</div></div>",this.modalAd&&(p+="</div>")),p}},{key:"initializePlayer",value:function(){var e=this,t={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(t,e.placementId),this.macros=t;var i={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(i,e.placementId,!0),this.jioAdsMediaPlayer=new bi({videoContainer:e.getVideoContainer(),modalContainer:e.modalAd?e.modalContainer:e.placementId,skip:e.skip,macros:t,type:5,vce:e.vce,oia:e.oia,campId:e.campId,adid:e.adid,clickmacros:i,placementId:e.placementId,refreshRate:e.refreshRate,mAd:e.mAd,isCtaurl:e.ad.result?e.ad.result.ctaurl:"",isLinkFallback:e.ad.result?e.ad.result.ctafb:"",clickTrackers:e.ad.result?e.ad.result.clktrackers:[]||0,impressionTracker:e.ad.result?e.ad.result.imptrackers:[]||0,ctatext:e.ad.result?e.ad.result.ctatext:null,touchCreative:e.ad.result?e.ad.result:null,callback:{onAdClosed:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!0})},onAdPrepared:function(){e.loadAd?e.start():Ce.onAdPrepared({placementId:e.placementId,adUxType:"n-interstitial-video"})},onAdRender:function(){e.isAdShown=!0,Ce.onAdRender({placementId:e.placementId})},onAdDuration:function(t,i){Ce.onAdDuration({placementId:e.placementId,adTime:t,skip:i})},onAdProgress:function(t,i){Ce.onAdProgress({placementId:e.placementId,progress:t,currentTime:i})},onAdMediaStart:function(){Ce.onAdMediaStart({placementId:e.placementId})},onAdClicked:function(t,i){Ce.onAdClicked({placementId:e.placementId,url:i})},onAdFailedToLoad:function(t){t.placementId;var i=t.errorCode,a=t.error,n=t.methodname;Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:i,response:a,methodname:n})},onAdSkippable:function(){Ce.onAdSkippable({placementId:e.placementId})},onAdSkipped:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!1})},onAdMediaEnd:function(){if(Ce.onAdMediaEnd({placementId:e.placementId}),null!=e.endCard){if(e.placementNode=document.getElementById(e.placementId),e.placementNode)var t=e.placementNode.querySelector(".jads-end-card");null!=t&&t.classList.remove("jads-d-none")}}}})}},{key:"start",value:function(){var e=At.getInsData(this.placementId);ji.decrementShowAdCounter(e.adspot),this.isOMEnable?Z.OMSDKInit(this):this.jioAdsMediaPlayer.play()}},{key:"isAdSkippable",value:function(){this.jioAdsMediaPlayer.isAdSkippable()}},{key:"close",value:function(){this.jioAdsMediaPlayer.closeAd()}},{key:"closeAfter",value:function(e){this.jioAdsMediaPlayer.closeAfter(e)}},{key:"pause",value:function(){this.jioAdsMediaPlayer.pause()}},{key:"resume",value:function(){this.jioAdsMediaPlayer.resume()}},{key:"firstTimePlay",value:function(){this.jioAdsMediaPlayer.firstTimePlay()}}],t&&Ma(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Oa=Pa;function Da(e){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(e)}function Na(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ra(a.key),a)}}function Ra(e){var t=function(e,t){if("object"!=Da(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Da(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Da(t)?t:t+""}var xa=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.vastAd,a=t.loadAd,n=t.placementId,r=t.delay,o=t.rewardIn,s=t.ad,c=t.ccbString,d=t.vce,l=(t.oia,t.campId),u=t.adid,h=t.fbCallback,p=t.mAd;this.vastAd=i,this.vastParser=new Vt.VASTParser,this.ad=xi({ad:s}),this.isAdShown=!1,this.adSize="video",this.type=5,this.vce=d,this.skip=r,this.rewardIn=parseInt(o),this.placementId=n,this.placementNode=null,this.loadAd=a,this.ccbString=c||Z.generateCCB(n),this.campId=l,this.adid=u,this.fbCallback=h,this.mAd=p,this.endCard=this.ad.hasOwnProperty("result")?pi(this.ad.result):null,bt.log("Video Ad creator"),this.initializePlayer()},t=[{key:"parseXML",value:function(){try{return(new DOMParser).parseFromString(this.vastAd.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e)),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m111",response:e,methodname:"rewardedvideo.parseXML"})}}},{key:"updateCtaHTML",value:function(){var e=document.getElementsByClassName(this.ctaButton);e&&e[0].classList.remove("jads-pe-n","jads-d-none")}},{key:"getVideoWrapHTML",value:function(e){var t=e.audioTag,i=e.videoTag,a=e.isClickable,n=e.ctaText,r=e.rndTime,o=e.rndPlay,s=e.rndMute,c=e.rndSkipClose,d=e.rndCtaEvent,l=e.rndMediaCont;return this.ctaButton=d,this.endCard=e.endCard,'<div class="jads-rewarded jads-fluid-container jads-d-flex jads-f-j-center jads-pos-r '.concat(l,'">\n              <div class="jads-d-flex-aj-center">\n                  <div class="jads-cta-box jads-d-flex jads-f-j-right jads-cta-top jads-p-10" style = "padding:2px">\n                      <a href="javascript:;" class="jads-btn jads-cta-event  ').concat(d," ").concat(a?"":"jads-pe-n jads-d-none",'" style = "padding:2px; font-size:12px">').concat(n||"Visit Advertiser",'\n                      </a>\n                      <a class="jads-icon jads-skip-close-event jads-d-none jads-icon-close jads-m-2 ').concat(c,'"></a>\n                  </div>\n                    \n                    ').concat(i||t,"\n                    \n                    ").concat(this.endCard||t?'<div class="jads-end-card jads-height-occup jads-d-none"><img src="'.concat(this.endCard,'" class="jads-img"/></div>'):"",'\n                  <div class="jads-cta-box jads-cta-bottom jads-d-flex jads-f-j-right">\n                    <a href="javascript:;" class="jads-btn jads-skip-close-event jads-d-none skip-time ').concat(c,'">Skip</a>\n                  </div>\n                  ').concat(Z.playerControls(o,r,s),"\n              </div>  \n        </div>")}},{key:"render",value:function(){var e=this,t=this;bt.log("Video Ad going to render"),this.vastParser.parseVAST(this.parseXML(),{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0,macros:this.macros,multi:!!this.mAd}).then((function(e){bt.log("Video Ad VAST parsed, going to initialize cache"),t.jioAdsMediaPlayer.setVideoEndcard(t.endCard),t.jioAdsMediaPlayer.initalizeCache(e)})).catch((function(t){bt.error("Video Ad Unable to parse the VAST Something went wrong",t),Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:"m111",response:t,methodname:"rewardedvideo.render"})}))}},{key:"getVideoContainer",value:function(){try{return document.getElementById(this.placementId)}catch(e){return bt.error("Video Ad cant able to find video container for instream video"),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m109",response:e,methodname:"rewardedvideo.getVideoContainer"}),!1}}},{key:"initializePlayer",value:function(){var e=this;bt.log("Video Ad Player initializing");var t={bz:"video",ccb:e.ccbString,seq:1};Z.generateMacrosList(t,e.placementId),this.macros=t;var i={bz:"video",ccb:e.ccbString,seq:1};Z.generateMacrosList(i,e.placementId),this.jioAdsMediaPlayer=new bi({videoContainer:e.getVideoContainer(),type:9,placementId:e.placementId,skip:e.skip,vce:e.vce,campId:e.campId,adid:e.adid,isRewarded:!0,rewardIn:e.rewardIn,macros:t,oia:e.oia,clickmacros:i,isLinkFallback:e.ad.result?e.ad.result.ctafb:"",clickTrackers:e.ad.result?e.ad.result.clktrackers:[]||0,impressionTracker:e.ad.result?e.ad.result.imptrackers:[]||0,callback:{onAdClosed:function(t){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!0,reward:t})},onAdPrepared:function(){e.isAdReady=!0,e.loadAd?e.start():Ce.onAdPrepared({placementId:e.placementId,adUxType:"rewarded-video"})},onAdRender:function(){e.isAdShown=!0,Ce.onAdRender({placementId:e.placementId})},onAdProgress:function(t,i){Ce.onAdProgress({placementId:e.placementId,progress:t,currentTime:i})},onAdMediaStart:function(){Ce.onAdMediaStart({placementId:e.placementId})},onAdClicked:function(t,i){Ce.onAdClicked({placementId:e.placementId,url:i})},onAdFailedToLoad:function(t){t.placementId;var i=t.errorCode,a=t.error,n=t.methodname;Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:i,response:a,methodname:n})},onAdSkippable:function(){Ce.onAdSkippable({placementId:e.placementId})},onAdDuration:function(t,i){Ce.onAdDuration({placementId:e.placementId,adTime:t,skip:i})},onAdSkipped:function(t){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!1,reward:t})},onAdMediaEnd:function(t){if(Ce.onAdMediaEnd({placementId:e.placementId,reward:t}),null!=e.endCard){if(e.placementNode=document.getElementById(e.placementId),e.placementNode)var i=e.placementNode.querySelector(".jads-icon-close"),a=e.placementNode.querySelector(".jads-end-card");null!=a&&null!=i&&(a.classList.remove("jads-d-none"),i.classList.remove("jads-d-none"))}}}})}},{key:"start",value:function(){var e=At.getInsData(this.placementId);ji.decrementShowAdCounter(e.adspot),this.jioAdsMediaPlayer.play()}},{key:"isAdSkippable",value:function(){this.jioAdsMediaPlayer.isAdSkippable()}},{key:"close",value:function(){this.jioAdsMediaPlayer.closeAd()}},{key:"closeAfter",value:function(e){this.jioAdsMediaPlayer.closeAfter(e)}},{key:"pause",value:function(){this.jioAdsMediaPlayer.pause()}},{key:"resume",value:function(){this.jioAdsMediaPlayer.resume()}},{key:"firstTimePlay",value:function(){this.jioAdsMediaPlayer.firstTimePlay()}}],t&&Na(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ua=xa;function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function Ba(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_a(a.key),a)}}function _a(e){var t=function(e,t){if("object"!=Va(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Va(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Va(t)?t:t+""}var Fa=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.vastAd,a=t.loadAd,n=t.placementId,r=t.delay,o=t.refreshRate,s=void 0===o?0:o,c=t.ad,d=t.vce,l=t.oia,u=t.ccbString,h=t.campId,p=t.adid,m=t.mim,f=void 0===m?0:m,g=t.mAd;this.vastAd=i,this.vastParser=new Vt.VASTParser,this.ad=xi({ad:c}),this.isAdShown=!1,this.adSize="video",this.refreshRate=s,this.skip=r,this.placementId=n,this.loadAd=a,this.vce=d,this.oia=l,this.campId=h,this.adid=p,this.ccbString=u||Z.generateCCB(n),this.endCard=null,this.placementNode=document.getElementById(this.placementId),this.mim=f,this.isOMEnable=!1,this.mAd=g,bt.log("Video Ad creator"),this.initializePlayer()},t=[{key:"parseXML",value:function(){try{return(new DOMParser).parseFromString(this.vastAd.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e)),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m111",response:e,methodname:"dynamicvideo.parseXML"})}}},{key:"view",value:function(){this.container=document.createElement("a"),this.container.style.display="none";var e=void 0!==this.ad.result?this.ad.result.mainimage:"";if(""===e)return 0;var t=void 0!==this.ad.result?this.ad.result.iconimage:"",i=void 0!==this.ad.result?this.ad.result.title:"",a=void 0!==this.ad.result?this.ad.result.desc||this.ad.result.desc2:"",n="jads_full_cta_event_"+Kt.generateCacheBusting(12),r=("jads-full ".concat(n),this.ad.result.ctatext);return this.container.innerHTML='\n    <div class="jads-billboard">\n          <div class="jads-d-flex">\n              <div class="jads-d-flex jads-f-a-center jads-h-200">\n                  <img src="'.concat(e,'" class="jads-img-res">\n              </div>\n          </div>\n          <div class="jads-d-flex jads-h-50 jads-bg-grey">\n          ').concat(t?'<div class="jads-d-flex jads-f-a-center jads-p-5">\n              <img src="'.concat(t,'" class="jads-img">\n            </div>'):"",'\n            <div class="jads-d-flex jads-flex-fill jads-f-a-center jads-f-j-left jads-flex-wrap jads-p-5">\n            <b>').concat(i,"</b>\n                    ").concat(a,' \n            </div>\n            <div class="jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">\n            <a class="jads-btn ').concat(n,'" >').concat(r,"</a>\n            </div>\n          </div>\n    </div>"),this.container}},{key:"render",value:function(){var e=this.view();0===e||void 0===this.mim||this.mim<=0?this.mim=0:(this.placementNode.appendChild(e),this.container.style.display="block");var t=this;setTimeout((function(){0!==e&&0!==t.mim&&t.placementNode.removeChild(e),t.reset(),bt.log("Video Ad going to render"),t.vastParser.parseVAST(t.parseXML(),{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0,macros:t.macros,multi:!!t.mAd}).then((function(e){Z.setOMSDKParamater(e,t),t.jioAdsMediaPlayer.setVideoEndcard(t.endCard),t.jioAdsMediaPlayer.initalizeCache(e)})).catch((function(e){bt.error("Video Ad Unable to parse the VAST Something went wrong",e),Ce.onAdFailedToLoad({placementId:t.placementId,errorCode:"m111",response:e,methodname:"dynamicvideo.render"})}))}),1e3*this.mim)}},{key:"reset",value:function(){var e=document.getElementById(this.placementId);e&&(e.innerHTML="")}},{key:"getVideoContainer",value:function(){try{return document.getElementById(this.placementId)}catch(e){return bt.error("Video Ad cant able to find video container for instream video"),Ce.onAdFailedToLoad({placementId:this.placementId,errorCode:"m109",response:e,methodname:"dynamicvideo.getVideoContainer"}),!1}}},{key:"updateCtaHTML",value:function(){document.querySelectorAll(".".concat(this.ctaButton)).forEach((function(e){e.classList.remove("jads-pe-n")}))}},{key:"getVideoWrapHTML",value:function(e){var t=e.videoTag,i=e.isClickable,a=e.ctaText,n=e.rndTime,r=e.rndPlay,o=e.rndMute,s=e.rndMediaCont,c=e.rndSkipClose,d=e.rndFullCtaEvent,l=void 0!==this.ad.result?this.ad.result.iconimage:"",u=void 0!==this.ad.result?this.ad.result.title:"",h=void 0!==this.ad.result?this.ad.result.desc||this.ad.result.desc2:"";a=void 0!==this.ad.result?this.ad.result.ctatext:a;var p=void 0!==this.ad.result?this.ad.result.ctabtncol:"grey",m=void 0!==this.ad.result?this.ad.result.ctatxtcol:"white";return this.ctaButton=d,'<div class="jads-billboard '.concat(s,'" style = "width:100%">\n              <div class="jads-pos-r jads-h-210">\n                     \n                          <a href="javascript:;" class="').concat(d," ").concat(i?"":"jads-pe-n",'">\n                              ').concat(t,'  \n                          </a>\n                   \n                          <div class="jads-cta-box jads-bot-60 jads-d-flex jads-f-j-right">\n                          <a href="javascript:;" class="jads-btn jads-skip-close-event jads-d-none skip-time ').concat(c,'">Skip</a>\n                        </div>\n                  ').concat(Z.playerControls(r,n,o),'\n              </div> \n              \n              <a href="javascript:;" class="').concat(d," ").concat(i?"":"jads-pe-n",'">\n                              <div class="jads-d-flex jads-h-40">\n                                ').concat(l?'\n                                  <div class="jads-d-flex jads-f-a-center jads-p-5">\n                                    <img src="'.concat(l,'" class="jads-img">\n                                  </div>'):"",'              \n                                  <div class="jads-flex-fill jads-d-flex jads-f-a-center jads-f-j-left jads-p-5">\n                                    <div class="jads-text-elipse jads-d-flex jads-f-a-center">\n                                      <span>\n                                        <b>').concat(u,"</b><br>\n                                          ").concat(h,'\n                                      </span>\n                                    </div>\n                                  </div>                \n                                  <div class="jads-d-flex jads-f-a-center jads-f-j-right jads-p-5">                       \n                                      <div class="jads-btn jads-sec-cta-event jads-btn-grey" style="background:').concat(p,";color:").concat(m,'">').concat(a,"</div>\n                                  </div>\n                            </div>\n                          </a>\n\n                          \n                \n                                                   \n    </div>")}},{key:"initializePlayer",value:function(){var e=this,t={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(t,e.placementId),this.macros=t;var i={bz:e.adSize,ccb:e.ccbString,seq:1};Z.generateMacrosList(i,e.placementId,!0),this.jioAdsMediaPlayer=new bi({videoContainer:e.getVideoContainer(),type:4,skip:"0",macros:t,oia:e.oia,placementId:e.placementId,vce:e.vce,refreshRate:e.refreshRate,campId:e.campId,adid:e.adid,mAd:e.mAd,isLinkFallback:e.ad.result?e.ad.result.ctafb:"",clickTrackers:e.ad.result?e.ad.result.clktrackers:[]||0,impressionTracker:e.ad.result?e.ad.result.imptrackers:[]||0,ctatext:e.ad.result?e.ad.result.ctatext:"",touchCreative:e.ad.result?e.ad.result:"",callback:{onAdClosed:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!0})},onAdPrepared:function(){e.isAdReady=!0,e.loadAd?e.start():Ce.onAdPrepared({placementId:e.placementId})},onAdRender:function(){e.isAdShown=!0,Ce.onAdRender({placementId:e.placementId})},onAdDuration:function(t,i){Ce.onAdDuration({placementId:e.placementId,adTime:t,skip:i})},onAdProgress:function(t,i){Ce.onAdProgress({placementId:e.placementId,progress:t,currentTime:i})},onAdMediaStart:function(){Ce.onAdMediaStart({placementId:e.placementId})},onAdClicked:function(t,i){Ce.onAdClicked({placementId:e.placementId,url:i})},onAdFailedToLoad:function(t){var i=t.error,a=t.errorCode,n=t.methodname;Ce.onAdFailedToLoad({placementId:e.placementId,errorCode:a,response:i,methodname:n})},onAdSkippable:function(){Ce.onAdSkippable({placementId:e.placementId})},onAdSkipped:function(){Ce.onAdClosed({placementId:e.placementId,isVideoCompleted:!1})},onAdMediaEnd:function(){Ce.onAdMediaEnd({placementId:e.placementId})}}})}},{key:"start",value:function(){this.isOMEnable?Z.OMSDKInit(this):this.jioAdsMediaPlayer.play()}},{key:"isAdSkippable",value:function(){this.jioAdsMediaPlayer.isAdSkippable()}},{key:"close",value:function(){this.jioAdsMediaPlayer.closeAd()}},{key:"closeAfter",value:function(e){this.jioAdsMediaPlayer.closeAfter(e)}},{key:"pause",value:function(){this.jioAdsMediaPlayer.pause()}},{key:"resume",value:function(){this.jioAdsMediaPlayer.resume()}},{key:"firstTimePlay",value:function(){this.jioAdsMediaPlayer.firstTimePlay()}}],t&&Ba(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Ka=Fa;function za(e){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},za(e)}function Ga(e,t,i){var a;return a=function(e,t){if("object"!=za(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=za(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==za(a)?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ha=function(e){var t=e.ad,i=e.xhr,a=e.data,n=e.fbCallback,r=new l,o=i.hasOwnProperty("adspotType")?i:lt({xhr:i}),s=o.delay,c=o.adspotType,d=o.block,u=void 0===d?0:d,h=(o.jioCSL,o.refreshTime),p=void 0===h?0:h,m=(o.orientation,o.rewardIn),f=void 0===m?0:m,g=o.mid,y=void 0===g?{}:g,v=o.adSeq,b=void 0===v?{}:v,A=o.fcap,k=void 0===A?"{}":A,I=o.contentType,S=void 0===I?null:I,T=o.fmt,w=void 0===T?null:T,C=o.inl,E=void 0===C?0:C,L=(o.te,o.oia),M=void 0===L?0:L,j=o.wh,P=void 0===j?"":j,O=o.loc,D=void 0===O?"":O,N=o.vim,R=void 0===N?"":N,x=o.vce,U=void 0===x?'{"type":"0","time":"0"}':x,V=o.mim,B=t.type,_=(t.mod,a.placementId),F=a.loadAd,K=a.adspotKey,z=a.ai,G=a.ccbString,H=void 0!==G&&G;s=parseInt(s),u=parseInt(u),y=Z.jsonParser(y),k=Z.jsonParser(k),E=parseInt(E),U=Z.jsonParser(U),M=parseInt(M),D=Z.jsonParser(D),b=Z.jsonParser(b);var q=parseInt(p),J=!1;if(y&&y.hasOwnProperty("id")){var W=r.getItem("maskingInfo")||{};y.hasOwnProperty("type")&&1==y.type?W.UUID=y:W[z]=y,r.setItem("maskingInfo",W,"local")}i.hasOwnProperty("adspotType")&&(J=!0),sessionStorage.setItem(K+"_fibonacciNumAd",0);var Y=i.adId?i.adId:"",Q=i.campaignId?i.campaignId:"",X=document.getElementById(_);if(X){var $,ee=X.getAttribute("data-customization")||0,te=X.getAttribute("data-container-id"),ie=X.getAttribute("companion-container");if($=At.getInsData(_).refreshTime,q=Z.getRefresh(q,$),0==ot.AdManager[_].isMultiAdEnable()&&X.hasAttribute("data-fcap")&&X.removeAttribute("data-fcap"),k&&k.hasOwnProperty("campaignid")&&k.hasOwnProperty("mod")&&k.mod.hasOwnProperty("fcr")){var ne=k.mod.fcr,re=k.campaignid;X.setAttribute("data-fcap",re),bt.log("Response FCAP : "+JSON.stringify(ne)),ae.addCampaign(re,ne)}D&&(r.setItem("x_jio_location_data",D),ot.loc=r.getItem("x_jio_location_data"),ot.md_cn=D.cn?D.cn:"",ot.md_st=D.st?D.st:"",ot.md_ct=D.ct?D.ct:"",ot.md_pn=D.pn?D.pn:""),"5"==c||"11"==c?B=ee?13:12:"6"==c||"1"==c?B=4:"8"==c?B=ee&&"1"==ot.AdManager[_].MasterConfig.get("config").ae?13:3:"7"==c?B=ee?13:2:"9"==c?B=9:"10"==c&&(B=10),bt.log("Ad format selection for Ad type: "+B),b&&ji.setConfig(K,c,b);var oe=null,se=null,ce=null;switch(B){case 2:bt.log("Ad format selected type: "+B+" banner / in-feed"),ot.adObject[_]=new zi({ad:t,loadAd:F,placementId:_,refreshRate:q,ccbString:H,vce:U,campId:Q,adid:Y,oia:M,mAd:J});break;case 3:if(bt.log("Ad format selected type: "+B+" billboard / content stream"),"text/html; charset=UTF-8"===S||"2"==w);else if("application/xml; charset=UTF-8"===S||"1"==w)se=t;else{try{oe=JSON.parse(t)}catch(e){se=t}null==se&&(se=(ce=oe.hasOwnProperty("result")?oe.result:oe).hasOwnProperty("video")?ce.video:null)}se?(bt.log("dynamic display video"),ot.adObject[_]=new oa({vastAd:se,loadAd:F,placementId:_,ad:t,delay:s,refreshRate:q,ccbString:H,vce:U,oia:M,campId:Q,adid:Y,mim:V,fbCallback:n,mAd:J})):"text/html; charset=UTF-8"===S||"2"==w?(bt.log("dynamic display html"),ot.adObject[_]=new ta({ad:t,loadAd:F,placementId:_,refreshRate:q,ccbString:H,wh:P,vce:U,containerId:te,oia:M,vim:R,campId:Q,adid:Y,mAd:J})):(bt.log("dynamic display image"),ot.adObject[_]=new Qi({ad:t,loadAd:F,placementId:_,refreshRate:q,ccbString:H,vce:U,campId:Q,adid:Y,oia:M,mAd:J}));break;case 4:if(bt.log("Ad format selected type: "+B+" native intertital"),"text/html; charset=UTF-8"===S||"2"==w);else if("application/xml; charset=UTF-8"===S||"1"==w)se=t;else{try{oe=JSON.parse(t)}catch(e){se=t}null==se&&(se=(ce=oe.hasOwnProperty("result")?oe.result:oe).hasOwnProperty("video")?ce.video:null)}se?(bt.log("native intertital video"),ot.adObject[_]=new Oa({vastAd:se,loadAd:F,placementId:_,modalAd:!0,ad:t,delay:s,ccbString:H,vce:U,campId:Q,adid:Y,oia:M,refreshRate:q,fbCallback:n,mAd:J})):"text/html; charset=UTF-8"===S||"2"==w?(bt.log("native intertital html"),ot.adObject[_]=new Ea({ad:t,loadAd:F,placementId:_,modalAd:!0,inl:E,ccbString:H,wh:P,vce:U,containerId:te,oia:M,vim:R,refreshRate:q,campId:Q,delay:s,adid:Y,mAd:J})):(bt.log("native intertital image"),ot.adObject[_]=new Ia({ad:t,loadAd:F,placementId:_,ccbString:H,modalAd:!0,vce:U,refreshRate:q,oia:M,campId:Q,adid:Y,mAd:J}));break;case 10:if(bt.log("Ad format selected type: "+B+" dynamic display"),"text/html; charset=UTF-8"===S||"2"==w);else if("application/xml; charset=UTF-8"===S||"1"==w)se=t;else{try{oe=JSON.parse(t)}catch(e){se=t}null==se&&(se=(ce=oe.hasOwnProperty("result")?oe.result:oe).hasOwnProperty("video")?ce.video:null)}se?(bt.log("dynamic display video"),ot.adObject[_]=new Ka(Ga(Ga(Ga(Ga(Ga(Ga({vastAd:se,loadAd:F,placementId:_,ad:t,refreshRate:q,delay:s,ccbString:H,vce:U},"refreshRate",q),"oia",M),"campId",Q),"adid",Y),"fbCallback",n),"mAd",J))):"text/html; charset=UTF-8"===S||"2"==w?(bt.log("dynamic display html"),ot.adObject[_]=new Ea({ad:t,loadAd:F,placementId:_,ccbString:H,refreshRate:q,wh:P,vce:U,containerId:te,inl:E,oia:M,vim:R,campId:Q,adid:Y,mAd:J})):(bt.log("dynamic display image"),ot.adObject[_]=new Ia({ad:t,loadAd:F,placementId:_,ccbString:H,refreshRate:q,vce:U,oia:M,campId:Q,adid:Y,mAd:J}));break;case 13:bt.log("Ad format selected type: "+B+" custom Ad");try{oe=JSON.parse(t)}catch(e){se=t}null==se&&(se=(ce=oe.hasOwnProperty("result")?oe.result:oe).hasOwnProperty("video")?ce.video:null),"function"==typeof JioAds.onAdsReceived?Ce.onAdsReceived({placementId:_,adResponse:oe,vastad:se}):ot.adObject[_]=new fa({vastAd:se,ad:t,loadAd:F,delay:s,placementId:_,refreshRate:q,ccbString:H,vce:U,campId:Q,adid:Y,oia:M,mAd:J});break;case 12:bt.log("Ad format selected type: "+B+" instream video"),ot.adObject[_]=new Ri({vastAd:t,loadAd:F,placementId:_,ad:t,delay:s,containerId:te,compDivInfo:ie,ccbString:H,vce:U,campId:Q,adid:Y,oia:M,adspotKey:K,fbCallback:n,mAd:J});break;case 9:bt.log("Ad format selected type: "+B+" rewarded video");try{oe=JSON.parse(t)}catch(e){se=t}null==se&&(se=(ce=oe.hasOwnProperty("result")?oe.result:oe).hasOwnProperty("video")?ce.video:null),ot.adObject[_]=new Ua({vastAd:se,loadAd:F,placementId:_,rewardIn:f,ad:t,ccbString:H,vce:U,refreshRate:q,campId:Q,adid:Y,delay:s,oia:M,fbCallback:n,mAd:J});break;default:var de=Z.jsonParser(t);"object"==za(de)&&Object.keys(de).length&&de.errors[0].errorMsg,Ce.onAdFailedToLoad({placementId:_,errorCode:"m107",response:"invalid ad format selection type",methodname:"adFormatSelection"})}ot.adObject[_]&&(bt.log("Ad format selected and going to render"),ot.adObject[_].render())}};function qa(e){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(e)}function Ja(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Wa(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(i),!0).forEach((function(t){var a,n,r,o;a=e,n=t,r=i[t],o=function(e,t){if("object"!=qa(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=qa(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==qa(o)?o:o+"")in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ja(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ya=new l;const Qa=function e(t){var i=t.isProductionData,a=void 0===i||i,n=t.hybridMultiAdsEnable,r=void 0!==n&&n,o=t.id,s=t.adSpotKey,c=t.channelName,d=t.campaignType,l=void 0===d?"cpd":d,u=t.data,h=ot.ProductionAd.get({type:"MULTI-ADSPOT-TYPE",value:s,defaultValue:!1})||ot.AdManager[o].masterConfigManager.get({type:"BACKUP-ADSPOT-TYPE",value:s,defaultValue:!1});sessionStorage.setItem(s+"_fibonacciNumAd",0);var p=function(){bt.log(" failure fallback callback "),ot.AdManager[o].fbCount++,e({isProductionData:!0,id:o,adSpotKey:s,channelName:s,data:{placementId:o,loadAd:!0,adspotKey:s,ai:ot.ai}})};if(ot.AdManager[o].hasOwnProperty("adbreakManager")){if(5==h){if(0!=ot.AdManager[o].isAdbreakDurationAvailable()||ot.AdManager[o].adBreakDuration)ot.AdManager[o].adBreakHandler();else{var m=18e5;ot.AdManager[o].adbreakManager.adbreakDuration=m,ot.AdManager[o].adBreakHandler(m)}return}delete ot.AdManager[o].adbreakManager}var f=a?ot.ProductionAd.getCampaigns(s,c):r?ot.PrefetchAd.getCampaigns(s):ot.AdManager[o].masterConfigManager.get({type:"BACKUP-ADS",value:s,defaultValue:{}});if("pgm"==l){var g={},y=f[l],v=y.ad_url,b=y.hasOwnProperty("ad_params")&&y.ad_params;b.query.split("&").map((function(e){var t=e.split("=");g[t[0]]=t[1]})),g.method=b.method;var A=Ya.getItem("".concat(s,"_Programmatic_Ad_expiry"))||null,k=new Date,I=1;A&&(I=new Date(A)>k?1:0);var S=y.mod.surl[0];!ot.AdManager[o].fbIgnorePgm&&I&&S.length>0?function(e,t,i){var a=Z.crc32((Date.now()||(new Date).getTime())+":"+ot.appName+":"+e+":"+100*Math.random(10));t=t.replace(/\[ccb\]|\{ccb\}/gi,a?encodeURIComponent(a):"");var n=new XMLHttpRequest;n.timeout=ot.adRequestTimeout,n.onreadystatechange=function(){4==this.readyState&&i(this)},n.ontimeout=function(){bt.debug("Campaign beacon timeout!"+t),bt.log("errno=6&errDesc=Campaign beacon timeout!"),i("timeout")},n.open("GET",t,!0),n.send()}(o,S,(function(t){304!==t.status&&200!==t.status||!function(e){var t=JSON.parse(e);return"noaction"==t.instructions[0].action||("DC"==t.instructions[0].action||"DA"==t.instructions[0].action?(delete f[l],ot.ProductionAd.setCampaigns(s,f[l],l,c),!1):"SC"!=t.instructions[0].action&&"SA"!=t.instructions[0].action&&void 0)}(t.response)?e({isProductionData:a,id:o,adSpotKey:s,channelName:c,campaignType:"prm",data:u}):ot.AdManager[o].sendXHRRequest({url:v,adParamsList:g,onSuccess:function(e){var t=e.ad,i=e.xhr,a=e.adSpotKey,n=e.data;n.loadAd&&(ot.AdManager[o].fbIgnorePgm=!0,Ha({ad:t,xhr:i,adSpotKey:a,data:n,fbCallback}))},onError:function(){e({isProductionData:a,id:o,adSpotKey:s,channelName:c,campaignType:"prm",data:u})}})})):e({isProductionData:a,id:o,adSpotKey:s,channelName:c,campaignType:"prm",data:u})}else{var T=ot.AdManager[o].isCustomTargetingEnabled(),w=ot.AdManager[o].customKeyValues;(T?new Ut("WEIGHT",T?"KV-PARITY":"",w):new Ut).getAd({isFcap:!0,spotId:o,hybridMultiAdsEnable:r,campaignsList:f[l]||{},callback:function(t){var i=t.ad,n=t.modifiedData;if(0!=Object.keys(i).length){if(a)ot.ProductionAd.setCampaigns(s,n,l,c);else{var d=null;r?(d=ot.PrefetchAd.getCampaigns(s),ot.PrefetchAd.setCampaigns(s,n,l)):(d=ot.AdManager[o].MasterConfig.getAllData()).asi[s].hasOwnProperty("bkp")&&(d.asi[s].bkp.cmps[l]=n,ot.AdManager[o].MasterConfig.set(d))}Ha(Wa(Wa({ad:i.ad,data:Wa(Wa({},u),{},{ccbString:i.ccbString})},function(e,t,i,a,n,r,o){var s={},c={},d=e?ot.ProductionAd.getAdspotData(t,i):ot.AdManager[n].MasterConfig.getAllData(),l=d.asi[t],u=e?l.cmps[a][r]:l.bkp.cmps[a][r],h=u.ads[o];c.campaignId=r,c.adId=o;var p=d.config.loc;return Ya.setItem("location_data",p),ot.locationData=Ya.getItem("location_data"),c.allowCache=h.config.mdc,c.refreshTime=h.config.adr,c.adspotType=l.config.at,c.delay=l.config.skd||h.config.skd,c.requestTimeout=l.config.adrt,c.mediaTimeout=l.config.mdt,c.jioCSL=d.config.csl,c.orientation=h.config.ao,c.rewardIn=l.config.rwin,c.mid=u.hasOwnProperty("config")&&u.config.mid,c.block=l.config.blk,c.adSeq=l.config.adseq,c.oia=h.config.oia,c.fmt=h.config.fmt,c.inl=h.config.inl,c.wh=h.config.wh,c.te=d.config.te||l.config.te,c.loc=l.config.loc,c.vce=h.config.vce,c.vim=h.config.vim,c.eac=d.config.eac,c.tms=l.config.tms,c.mim=h.config.mim,s.xhr=c,s}(a,s,c,l,o,i.campaignId,i.adId)),{},{fbCallback:p}))}else if(0==a){var h=null;if(r?(h=ot.PrefetchAd.getCampaigns(s),ot.PrefetchAd.setCampaigns(s,n,l)):(h=ot.AdManager[o].MasterConfig.getAllData()).asi[s].hasOwnProperty("bkp")&&(h.asi[s].bkp.cmps[l]=n,ot.AdManager[o].MasterConfig.set(h)),"cpd"==l)e({isProductionData:!1,id:o,adSpotKey:s,channelName:c,campaignType:"dd",data:u});else{if("dd"!=l)return bt.error("".concat(o,": No Fill")),void Za({status:"m104",errorCode:"m104",data:u});e({isProductionData:!1,id:o,adSpotKey:s,channelName:c,campaignType:f.hasOwnProperty("pgm")&&Object.keys(f.pgm).length?"pgm":"prm",data:u})}}else ot.ProductionAd.setCampaigns(s,n,l,c),e("cpd"==l?{isProductionData:!0,id:o,adSpotKey:s,channelName:c,campaignType:"dd",data:u,hybridMultiAdsEnable:r}:"dd"==l?{isProductionData:!0,id:o,adSpotKey:s,channelName:c,campaignType:f.hasOwnProperty("pgm")&&Object.keys(f.pgm).length?"pgm":"prm",data:u,hybridMultiAdsEnable:r}:{isProductionData:!1,id:o,adSpotKey:s,channelName:c,data:u,hybridMultiAdsEnable:r})}})}},Za=function(e){var t=e.status,i=e.errorCode,a=(e.errorDesc,e.data.placementId),n=ot.AdManager[a]?ot.AdManager[a].adSpotKey:"",r=ot.AdManager[a]?ot.AdManager[a].MasterConfig.getAllData():"";n&&r&&r.asi&&r.asi[n]&&r.asi[n].hasOwnProperty("bkp")&&r.asi[n].bkp.cmps&&(r.asi[n].bkp.cmps.cpd&&Object.keys(r.asi[n].bkp.cmps.cpd).length>0||r.asi[n].bkp.cmps.dd&&Object.keys(r.asi[n].bkp.cmps.dd).length>0||r.asi[n].bkp.cmps.prm&&Object.keys(r.asi[n].bkp.cmps.prm).length>0)&&"m104"==i&&!ot.AdManager[a].backUpTry?(ot.AdManager[a]&&(ot.AdManager[a].backUpTry=!0),Qa({isProductionData:!1,id:a,adSpotKey:n,channelName:n,data:{placementId:a,loadAd:!0,adspotKey:n,ai:ot.ai}})):(bt.log("failed to fetch Ad"),Ce.onAdFailedToLoad({placementId:a,errorCode:i,response:t,methodname:"noAdFound"}))};function Xa(e){return Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xa(e)}function $a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function en(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=an(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function tn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,an(a.key),a)}}function an(e){var t=function(e,t){if("object"!=Xa(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Xa(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xa(t)?t:t+""}const nn=function(){return e=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.masterConfigManager=new R({appName:i}),this.adspotKey=t,this.STORAGE=new l({type:"session"}),this.cfg=this.getConfig(),this.requestType=2,this.init(this.adspotKey)},t=[{key:"getConfig",value:function(){var e=this.masterConfigManager.get({type:"ADSPOT",value:this.adspotKey});return this.adspotKey,e}},{key:"getAllocation",value:function(e){var t=[];e||(e=this.getConfig(),bt.debug("adspotConfig",e));var i=this.getThrottleConfig(e);if(bt.log("getWLIndex : "+this.getWLIndex(this.adspotKey,i)),i&&i.hasOwnProperty("dom")&&i.dom.length&&i.hasOwnProperty("itr")&&i.itr.length){var a=this.getWLIndex(this.adspotKey,i)||0,n=f().get(i,"itr.".concat(a,".wt"),[]);return t=this.getWeightsAlgo(n),bt.log("THROTTLE >>>> weights Index: ".concat(n)),t}return"default"}},{key:"getWeightsAlgo",value:function(e){for(var t=e.length,i=0,a=0;a<t;a++)i+=e[a];if(!i)return null;var n=this.getRandomInt(1,i);bt.log("THROTTLE >> (Random value Generated: ".concat(n,")"));for(var r=0;r<t;r++){if(n<=e[r])return bt.log("THROTTLE >> (Weights array: ".concat(e,") (Length of array: ").concat(i,")")),r;n-=e[r]}return bt.log("THROTTLE >>> (Weights array: ".concat(e,") (Length of array: ").concat(i,")")),e.length>=2&&e[e.length-1]<=0?e.length-2:e.length-1}},{key:"getRandomInt",value:function(e,t){return Math.min(t,Math.floor(Math.random()*(t-e+1)+e))}},{key:"getDeliveryURI",value:function(){var e=this.getAllocation(this.cfg);return"default"==e?"default":(bt.debug("getAllocation: ",e),this.selectDelivery(e))}},{key:"selectDelivery",value:function(e){if(null==e)return"";var t=this.masterConfigManager.get({type:"THROTTLE",value:this.adspotKey}),i=t.dom||[],a=t.mth||[];return a.length&&(this.requestType=a[e]||2),e>=i.length?"":i[e]}},{key:"getThrottleConfig",value:function(e){return e?f().get(e,"pacing"):this.masterConfigManager.get({type:"THROTTLE",value:this.adspotKey})}},{key:"init",value:function(e){bt.debug("Invoking JioThrottleLevel - constructor"),this.configKey="throttle-level",this.weights=f().get(this.getThrottleConfig(),"itr",[])||[],this.adspotKey=e}},{key:"getWLIndex",value:function(e,t){var i=this.STORAGE.getItem(this.configKey);return f().get(i,this.adspotKey,0)}},{key:"setWLIndex",value:function(e){bt.debug(arguments);var t={};t[this.adspotKey]=e,this.STORAGE.setItem(this.configKey,en(en({},this.getWLIndex()),t))}},{key:"resetWLIndex",value:function(e){this.setWLIndex(0)}},{key:"nextWLIndex",value:function(){bt.debug("Throttle >>> Incrementing weight...");var e=f().get(this.getThrottleConfig(),"itr",[])||[],t=e.length-1<=0?0:e.length-1,i=this.getWLIndex();i=i>=t?t:i+1,bt.log("Sample weights",e,i),this.setWLIndex(i)}}],t&&tn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function rn(e){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(e)}function on(e){return function(e){if(Array.isArray(e))return cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){if(e){if("string"==typeof e)return cn(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?cn(e,t):void 0}}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function dn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ln(a.key),a)}}function ln(e){var t=function(e,t){if("object"!=rn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=rn(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rn(t)?t:t+""}var un=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adBreakDuration=t.duration,this.adBCount=t.adbc,this.productionAd=t.productionAd||{},this.backUpAd=t.backUpAd||{},this.adspotConfig=t.adspotConfig||{},this.callback=t.callback,this.adSpotKey=t.adSpotKey,this.channelName=t.channelName,this.hybridMultiAdsEnable=t.hybridMultiAdsEnable,this.finalPod=[],this.offsetLatency=t.offsetLatency,this.enabledCST=t.isCSTEnabled||!1,this.customKeyValues=t.customKeyValues,this.isAdLoop=JSON.parse(t.isAdLoop),this.adselector=new Ut("WEIGHT",this.enabledCST?"DURATION-KV-PARITY":"DURATION",this.customKeyValues,this.adBCount),this.spotId=t.spotId,this.adBreak=t.adBreak,this.nextAdSelectionAdIgnoreId=[],this.campaignType="cpd",this.nextAdSelectionCampaignIgnoreId=[],this.campCategoryIgnoreList=null,this.backupAdIgnoreList=on(this.getBackUpAdIgnoreList()),this.backUpAdIgnoreCampaignList=[],this.previousSlotLength=-1,this.STORAGE=new l},t=[{key:"formPOD",value:function(){window.PODLOG=[],this.getPod(this)}},{key:"getPod",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(bt.log("AdBreakDuration => ".concat(e.adBreakDuration)),!1===t&&(bt.log("POD Latency is => ".concat(e.offsetLatency)),e.adBreakDuration-=e.offsetLatency,bt.log("POD after offsetLatency applied adBreakDuration is => ".concat(e.adBreakDuration))),e.adBreakDuration<=2)e.endPod();else{e.isAdLoop&&e.resetAdbreakIgnoreList();var i=t?e.backUpAd[e.campaignType]||{}:e.productionAd[e.campaignType]||{};if("pgm"!=e.campaignType)e.adselector.getAd({isFcap:!0,macros:{},campaignsList:i,callback:t?function(t){bt.log("POD Enter onBackupAdCallback ");var i=t.ad,a=t.modifiedData,n=(t.selectedCampaign,{});if(e.hybridMultiAdsEnable?(n=ot.PrefetchAd.getCampaigns(e.adSpotKey),ot.PrefetchAd.setCampaigns(e.adSpotKey,a,e.campaignType)):(n=ot.AdManager[e.spotId].MasterConfig.getAllData()).asi[e.adSpotKey].hasOwnProperty("bkp")&&(n.asi[e.adSpotKey].bkp.cmps[e.campaignType]=a,ot.AdManager[e.spotId].MasterConfig.set(n)),0==Object.keys(i).length){if(e.removeBackUpAdIgnoreList(),e.adBreakDuration<=2||e.previousSlotLength==e.adBreak.AdbreakSlotList.length)return void e.endPod();if("cpd"==e.campaignType)e.campaignType="dd",e.getPod(e,!0);else if("dd"==e.campaignType)e.campaignType=e.backUpAd.hasOwnProperty("pgm")&&Object.keys(e.backUpAd.pgm).length?"pgm":"prm",e.getPod(e,!0);else{if(e.previousSlotLength=e.adBreak.AdbreakSlotList.length,e.adselector=new Ut("WEIGHT",e.enabledCST?"DURATION-KV-PARITY":"DURATION",e.customKeyValues,e.adBCount),!e.isAdLoop)return void e.endPod();e.repeatAdSelection(e)}}else{bt.log("POD ------Backup Ad -------"),bt.log(i),Object.keys(a).length>1&&(e.isAdLoop&&(e.nextAdSelectionCampaignIgnoreId=[]),e.nextAdSelectionCampaignIgnoreId.push(i.campaignId)),e.nextAdSelectionAdIgnoreId=[];var r=a[i.campaignId].ads;e.isAdLoop&&Object.keys(r).length,e.backupAdIgnoreList.push(i.adId),Object.keys(a).length>1&&Object.keys(r).length>1&&e.arrayContainsArray(e.backupAdIgnoreList,Object.keys(r))&&e.backUpAdIgnoreCampaignList.push(i.campaignId),bt.log("POD Selected Ad Duration => ".concat(i["video-duration"])),i.isTypeBackUp=!0,e.finalPod.push(i),e.adBreak.addSlot(i,(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];0==t?"1"===i.fbk&&(bt.log("Fallback ad"),e.backupAdIgnoreList.push(i.adId)):(e.adselector=new Ut("WEIGHT",e.enabledCST?"DURATION-KV-PARITY":"DURATION",e.customKeyValues,e.adBCount),e.adBreakDuration-=t||parseInt(i["video-duration"]),PODLOG.push({adID:i.adId,campaignId:i.campaignId,duration:i["video-duration"],type:"backup",actutal_Duration:t})),e.getPod(e,!e.isAdLoop)}),e.adBreakDuration)}}:function(t){bt.log("POD Enter onProdAdCallback ");var i=t.ad,a=t.modifiedData;t.selectedCampaign,ot.ProductionAd.setCampaigns(e.adSpotKey,a,e.campaignType,e.channelName);var n=ot.ProductionAd.getCampaignsConfig(e.adSpotKey,e.channelName).eac?ot.ProductionAd.getCampaignsConfig(e.adSpotKey,e.channelName).eac:"";if(0==Object.keys(i).length)if("cpd"==e.campaignType)e.campaignType="dd",e.getPod(e,!1);else{if("dd"!=e.campaignType)return e.adselector=new Ut("WEIGHT",e.enabledCST?"DURATION-CLOSEST-KV-PARITY":"DURATION-CLOSEST",e.customKeyValues,e.adBCount),e.adBreakDuration+=e.offsetLatency,e.campaignType="dd",void e.getPod(e,!0);e.campaignType=e.productionAd.hasOwnProperty("pgm")&&Object.keys(e.productionAd.pgm).length?"pgm":"prm",e.getPod(e,!1)}else{bt.log("POD ------Production Ad -------"),bt.log(i),Object.keys(a).length>1&&(e.isAdLoop&&(e.nextAdSelectionCampaignIgnoreId=[],e.campCategoryIgnoreList=null),e.nextAdSelectionCampaignIgnoreId.push(i.campaignId),n&&a[i.campaignId].config.aci?e.campCategoryIgnoreList=a[i.campaignId].config.aci:e.campCategoryIgnoreList=null);var r=a[i.campaignId].ads;e.isAdLoop&&Object.keys(r).length,e.nextAdSelectionAdIgnoreId.push(i.adId),e.isAdLoop||e.arrayContainsArray(e.nextAdSelectionAdIgnoreId,Object.keys(r))&&(e.nextAdSelectionCampaignIgnoreId.push(i.campaignId),n&&a[i.campaignId].config.aci?e.campCategoryIgnoreList=a[i.campaignId].config.aci:e.campCategoryIgnoreList=null),e.finalPod.push(i),bt.log("POD Selected Ad Duration => ".concat(i["video-duration"])),e.isAdLoop&&e.resetNextAdSelectionAdIgnoreList(a),e.adBreak.addSlot(i,(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];0==t?"1"===i.fbk&&e.nextAdSelectionAdIgnoreId.push(i.adId):(e.adBreakDuration-=t||parseInt(i["video-duration"]),PODLOG.push({adID:i.adId,campaignId:i.campaignId,duration:i["video-duration"],type:"multi",actutal_Duration:t})),e.getPod(e,!1)}),e.adBreakDuration)}},duration:e.adBreakDuration,spotId:e.spotId,hybridMultiAdsEnable:e.hybridMultiAdsEnable,nextAdSelectionAdIgnoreId:e.nextAdSelectionAdIgnoreId,nextAdSelectionCampaignIgnoreId:e.nextAdSelectionCampaignIgnoreId,campCategoryIgnoreList:e.campCategoryIgnoreList,backUpAdIgnoreCampaignList:e.backUpAdIgnoreCampaignList,backupAdIgnoreList:e.backupAdIgnoreList||[]});else{var a=i.ad_url,n=i.hasOwnProperty("ad_params")&&i.ad_params,r={};n.query.split("&").map((function(t){var i=t.split("=");r.lod=e.adBreakDuration,r[i[0]]=i[1]})),r.method=n.method;var o=e.STORAGE.getItem("".concat(e.adSpotKey,"_Programmatic_Ad_expiry"))||null,s=new Date,c=1;o&&(c=new Date(o)>s?1:0);var d=i.mod.surl[0]||"";c&&d.length>0?function(e,t,i){var a=Z.crc32((Date.now()||(new Date).getTime())+":"+ot.appName+":"+e+":"+100*Math.random(10));t=t.replace(/\[ccb\]|\{ccb\}/gi,a?encodeURIComponent(a):"");var n=new XMLHttpRequest;n.timeout=ot.adRequestTimeout,n.onreadystatechange=function(){4==this.readyState&&i(this)},n.ontimeout=function(){bt.debug("Campaign beacon timeout!"+t),bt.log("errno=6&errDesc=Campaign beacon timeout!"),i("timeout")},n.open("GET",t,!0),n.send()}(e.spotId,d,(function(n){304!==n.status&&200!==n.status||!function(e){var t=JSON.parse(e);return"noaction"==t.instructions[0].action||("DC"==t.instructions[0].action||"DA"==t.instructions[0].action?(i={},ot.ProductionAd.setCampaigns(adSpotKey,i,campaignType,channelName),!1):"SC"!=t.instructions[0].action&&"SA"!=t.instructions[0].action&&void 0)}(n.response)?(e.campaignType="prm",e.getPod(e,t)):ot.AdManager[e.spotId].sendXHRRequest({url:a,adParamsList:r,onSuccess:function(i){var a=i.ad,n=i.xhr,r=(i.adSpotKey,i.data,lt({xhr:n}).fcap),o=void 0===r?"{}":r,s=!1,c=!1;if((o=Z.jsonParser(o))&&o.hasOwnProperty("campaignid")&&o.hasOwnProperty("mod")&&o.mod.hasOwnProperty("fcr")){var d=o.mod.fcr;c=o.campaignid,ae.addCampaign(c,d),s=!0}e.adBreak.addSlot({ad:a,mod:s,campaignId:c},(function(i){e.adBreakDuration-=i||0,e.getPod(e,t)}),e.adBreakDuration)},onError:function(){e.campaignType="prm",e.getPod(e,t)}})})):(e.campaignType="prm",e.getPod(e,t))}}}},{key:"arrayContainsArray",value:function(e,t){return 0!==t.length&&0!==e.length&&t.every((function(t){return e.indexOf(t)>=0}))}},{key:"getUnique",value:function(e){var t,i=[],a=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=sn(e))){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;-1===i.indexOf(n)&&i.push(n)}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"endPod",value:function(){this.reset(),bt.log("When POD Ends AdBreakDuration Is => ".concat(this.adBreakDuration)),"function"==typeof this.callback&&this.callback({pod:this.finalPod,id:this.spotId})}},{key:"repeatAdSelection",value:function(e){this.reset(),this.getPod(e,!1)}},{key:"reset",value:function(){this.nextAdSelectionAdIgnoreId=[],this.backupAdIgnoreList=[],this.backUpAdIgnoreCampaignList=[],this.campaignType="dd"}},{key:"resetAdbreakIgnoreList",value:function(){this.adselector.adBreakIgnoreCampaignList=[],this.adselector.adBreakIgnoreAdList=[]}},{key:"addIntoBackUpAdIgnoreList",value:function(e){try{var t=JSON.parse(sessionStorage.getItem("backupAdIgnoreList"))||{};t.hasOwnProperty(this.adSpotKey)||(t[this.adSpotKey]=[]),t[this.adSpotKey]=this.getUnique([].concat(on(e),on(this.getBackUpAdIgnoreList()))),sessionStorage.setItem("backupAdIgnoreList",JSON.stringify(t))}catch(e){return bt.log("cant store in sessionStorage : ",e),!1}}},{key:"removeBackUpAdIgnoreList",value:function(){try{var e=JSON.parse(sessionStorage.getItem("backupAdIgnoreList"))||{};return e.hasOwnProperty(this.adSpotKey)&&delete e[this.adSpotKey],sessionStorage.setItem("backupAdIgnoreList",JSON.stringify(e)),!0}catch(e){return bt.log("can't remove from sessionStorage : ",e),!1}}},{key:"getBackUpAdIgnoreList",value:function(){try{var e=JSON.parse(sessionStorage.getItem("backupAdIgnoreList"))||{};return e.hasOwnProperty(this.adSpotKey)?e[this.adSpotKey]:[]}catch(e){return bt.log("Nothing in sessionStorage : ",e),[]}}},{key:"resetNextAdSelectionAdIgnoreList",value:function(e){var t=0;if(0!=this.nextAdSelectionAdIgnoreId.length){for(var i in e){var a=Object.keys(e[i].ads);this.arrayContainsArray(this.nextAdSelectionAdIgnoreId,a)&&t++}Object.keys(e).length==t&&(this.nextAdSelectionAdIgnoreId=[],this.nextAdSelectionCampaignIgnoreId="")}}},{key:"logger",value:function(e,t){if(void 0!==e&&""!=e){var i=getAdParams(document.getElementById(this.spotId),!0),a=getCustomKeyValueByPId(this.spotId)||{},n={"request-id":e};i.hasOwnProperty("advid")&&(n.idfa=i.advid),i.hasOwnProperty("uid")&&(n.uid=i.uid),n.data=JSON.stringify(a).replace(/ /g,""),kvLogger.setLogLength(VMAX.getChunkLength()),kvLogger.insertBeaconNode(n)}}}],t&&dn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const hn=un;function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function mn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function fn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(i),!0).forEach((function(t){gn(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function gn(e,t,i){return(t=vn(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vn(a.key),a)}}function vn(e){var t=function(e,t){if("object"!=pn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=pn(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pn(t)?t:t+""}var bn=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.id,a=t.loadAd,n=t.isPS,r=void 0!==n&&n,o=t.autoplay,s=void 0===o||o;if(this.id=i,this.autoplay=s,this.loadAd=a,this.isPS=r,this.STORAGE=new l,this.onSuccess=Ha,this.fbCount=1,this.blkCount=0,this.fbIgnoreList=[],this.fbIgnorePgm=!1,this.fbIgnoreCampaignList=[],this.rendError=!1,this.rendErAdBreakList=[],this.backUpTry=!1,this.adbreakCount=!1,this.isPS&&(this.JioCacheAdPSManager=new JioCacheAdPSManager({id:this.id}),this.onSuccess=this.loadAd?this.JioCacheAdPSManager.showAd.bind(this.JioCacheAdPSManager):this.JioCacheAdPSManager.cacheAd.bind(this.JioCacheAdPSManager)),bt.log("Ad Manager created for placement id: "+i),this.HTTPRequest=new yt,this.onError=Za,this.HTTPRequestParamaterHandler=new be({id:this.id}),this.url=this.HTTPRequestParamaterHandler.getURL(),this.adSpotKey=this.HTTPRequestParamaterHandler.getAdspotKey(),this.channelName=this.adSpotKey,this.hybridMultiAdsEnable=!1,this.appName=this.HTTPRequestParamaterHandler.getAppName(),this.masterConfigManager=new R({appName:this.appName}),this.adRequestStatusKey="adRequestStatusKey__".concat(this.adSpotKey),this.MasterConfig=new k("jio_master_config_".concat(this.appName)),this.customKeyValues=this.HTTPRequestParamaterHandler.getAllCustomMetaData()||{},bt.log("Ad Manager request URL generated"),this.setINSDetails(),this.isAdbreakDurationAvailable()||this.isAdbreakCountAvailable()){if(0==this.isVideoContainerVaild())return;if(!this.isAdbreakDurationValid()&&!this.isAdbreakCountValid())return!1;this.adbreakManager=this.createAdbreakObject({adBreakDuration:this.adbreakDuration,containerId:this.containerId,adBreakCount:this.adbreakCount,companionCont:this.companionCont})}},t=[{key:"setINSDetails",value:function(){try{this.placementNodeDataSet=At.getDOMDetails({id:this.id,dsKeys:["adspotKey","adBreakDuration","containerId","adBreakLoop","adBreakCount"]});var e=document.getElementById(this.id);return this.companionCont=e.getAttribute("companion-container"),this.placementNodeDataSet}catch(e){bt.log("Cant find ins details",e)}}},{key:"show",value:function(){if(this.isMultiAdEnable()&&this.hasOwnProperty("adbreakManager"))this.adbreakManager.start();else if(ot.adObject.hasOwnProperty(this.id)){var e=ot.adObject[this.id];bt.log("Ad Manager trying to show Ad"),e.isAdReady?e.start():bt.warn("Ad Manager Ad is still not ready to show Ad")}else bt.warn("Ad Manager Ad is still not ready to show Ad")}},{key:"isAdSkippable",value:function(){if(ot.adObject.hasOwnProperty(this.id)){var e=ot.adObject[this.id];return bt.log("Ad Manager checking is Ad skippable"),e.isAdSkippable()}return!1}},{key:"init",value:function(){this.requestThrottleManager=new nn(this.adSpotKey,this.appName),this.masterConfigManager.init(Z.getMasterConfigParameter(),this.onMasterConfigPresent.bind(this),this.onMasterConfigAbsent.bind(this))}},{key:"getMultiAdCallbackData",value:function(){return{placementId:this.id,loadAd:this.loadAd,adspotKey:this.adSpotKey,ai:ot.ai}}},{key:"onBlockAdRequest",value:function(){var e=this.STORAGE.getItem("blockAdRequest_"+this.adSpotKey)||null;if(e){var t=new Date;return new Date(e.blockUpto)>t?(bt.warn("Ad request blocked further for this Adspot: "+this.adSpotKey+" upto: "+new Date(e.blockUpto)),this.onError({status:"Ad request not allowed",errorCode:"m115",errorDesc:"Ad request not allowed",data:{placementId:this.id}}),1):(bt.log("Ad block request timer expired so removing entry and allowing Ad request"),this.STORAGE.removeItem("blockAdRequest_"+this.adSpotKey),0)}return 0}},{key:"onMasterConfigAbsent",value:function(){var e;if(!(e=this.onBlockAdRequest())||1!==e){bt.log("Ad Manager placing request for Ad url");var t=sessionStorage.getItem(this.adSpotKey+"_fibonacciNumAd")||0;E(t)?this.sendXHRRequest():this.onError({status:"Ad request is declined as per fibonacci",errorCode:"m104",errorDesc:"Ad request is declined as per fibonacci",data:{placementId:this.id}})}}},{key:"sendXHRRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,i=void 0===t?this.url:t,a=e.onSuccess,n=void 0===a?this.onSuccess:a,r=e.onError,o=void 0===r?this.onError:r,s=e.adParamsList,c=void 0===s?{method:"2"}:s;this.data=fn(fn({},this.HTTPRequestParamaterHandler.get(this.getMultiAdRequestParams())),{loadAd:this.loadAd,isPS:this.isPS}),c.hasOwnProperty("pgm_only")&&(this.data.pgm_only=c.pgm_only),c.hasOwnProperty("lod")&&(this.data.lod=c.lod),this.hybridMultiAdsEnable&&(this.data.mat=this.hybridMultiAdsEnable,this.data.channelName=this.channelName,this.data.apz=this.hybridMultiAdsCount,this.ignoredAdsH.length>0&&(this.data.eads=this.ignoredAdsH.join()));var d=1==this.requestThrottleManager.requestType?"GET":"POST",l=c.hasOwnProperty("method")&&"1"==c.method?"GET":d;1==(this.STORAGE.getItem(this.adRequestStatusKey)||!1)&&ot.PreFetchManger[this.appName].adspotManagerList.hasOwnProperty(this.adSpotKey)?ot.PreFetchManger[this.appName].adspotManagerList[this.adSpotKey].callbackChange=!0:this.HTTPRequest.ajax(i,{method:l,timeout:ot.adRequestTimeout,checkJSON:!0,data:this.data},n,o)}},{key:"onMasterConfigPresent",value:function(){var e;if((e=this.onBlockAdRequest())&&1===e)bt.log("blocked  request further");else{if(!this.adbreakManager&&this.isVideoContainerVaild()&&1==this.masterConfigManager.get({type:"POD",value:this.adSpotKey,defaultValue:0})){var t=this.masterConfigManager.get({type:"PMXD",value:this.adSpotKey,defaultValue:0}),i=this.masterConfigManager.get({type:"PODC",value:this.adSpotKey,defaultValue:0});t>2?(this.adbreakDuration=t,this.adbreakManager=this.createAdbreakObject({adBreakDuration:this.adbreakDuration,containerId:this.containerId,adBreakCount:this.adbreakCount,companionCont:this.companionCont})):i>1&&(this.adbreakCount=i,this.adbreakManager=this.createAdbreakObject({adBreakDuration:this.adbreakDuration,containerId:this.containerId,adBreakCount:this.adbreakCount,companionCont:this.companionCont}))}if(ot.enableLogging=this.masterConfigManager.getErrorLog(),this.masterConfigManager.get({type:"ADSPOT",value:this.adSpotKey})){var a=ot.ProductionAd.get({type:"VR",value:this.adSpotKey,defaultValue:!1}),n=this.masterConfigManager.get({type:"VR",value:this.adSpotKey,defaultValue:!1}),r=this.masterConfigManager.get({type:"SSAI_VR",value:this.adSpotKey,defaultValue:!1}),o=this.STORAGE.getItem("cgi_vr"),s=this.STORAGE.getItem("cgi_exp"),c=Date.now?Date.now():(new Date).getTime(),d=this.STORAGE.getItem("cgi");if(!d||o!=r||s<c){var l=this.masterConfigManager.get({type:"CGI_URL",value:this.adSpotKey,defaultValue:[]}),u=this.masterConfigManager.get({type:"CGI_UE",value:this.adSpotKey,defaultValue:[]});St.RequestForCohortID(l,u,r).then((function(){return bt.log("Fetching Cohort ID is completed")}))}else d&&(ot.cgi=d);this.hybridMultiAdsEnable=this.masterConfigManager.get({type:"MAT",value:this.adSpotKey,defaultValue:0}),Number.isInteger(this.hybridMultiAdsEnable)||(this.hybridMultiAdsEnable=0),this.hybridMultiAdsCount=this.masterConfigManager.get({type:"APZ",value:this.adSpotKey,defaultValue:0}),(this.hybridMultiAdsCount<=0||!Number.isInteger(this.hybridMultiAdsCount))&&(this.hybridMultiAdsEnable=0);var h=0,p=0,m=0;this.channelName=this.hybridMultiAdsEnable?Z.getChannelName(this.adSpotKey,this.id):this.adSpotKey;var f=null;this.hybridMultiAdsEnable&&(a=ot.ProductionAd.get({type:"VR",value:this.channelName,defaultValue:!1}),h=ot.ProductionAd.get({type:"TMS",value:this.channelName,defaultValue:0}),p=ot.ProductionAd.get({type:"TCOUNT",value:this.channelName,defaultValue:0}),m=ot.ProductionAd.get({type:"ECOUNT",value:this.channelName,defaultValue:0}),this.ignoredAdsH=ot.ProductionAd.get({type:"IGNOREDADSH",value:this.channelName,defaultValue:[]}),f=ot.ProductionAd.getCampaigns(this.adSpotKey,this.channelName));var g=Date.now?Date.now():(new Date).getTime();if({}[this.adSpotKey]=0,this.hybridMultiAdsEnable?a===n&&f&&100*m/p<80&&h>g:a===n)return void Qa({isProductionData:!0,hybridMultiAdsEnable:this.hybridMultiAdsEnable,id:this.id,adSpotKey:this.adSpotKey,channelName:this.channelName,data:this.getMultiAdCallbackData()});var y=this.requestThrottleManager.getDeliveryURI();if(""==y)this.requestThrottleManager.nextWLIndex(),Qa({isProductionData:!1,hybridMultiAdsEnable:this.hybridMultiAdsEnable,id:this.id,adSpotKey:this.adSpotKey,channelName:this.channelName,data:this.getMultiAdCallbackData()});else{if(this.isMultiAdEnable()&&(this.url=this.HTTPRequestParamaterHandler.getMultiAdURL(),this.onSuccess=Qa,a&&a!==n&&this.requestThrottleManager.setWLIndex(0)),"default"!==y){var v=new URL(this.url),b=null,A=v.protocol;try{var k=new URL(y);b=k.host,A=k.protocol}catch(e){b=y}this.url=v.href.replace(v.host,b).replace(v.protocol,A)}this.onMasterConfigAbsent()}}else this.onMasterConfigAbsent()}}},{key:"closeAd",value:function(){if(this.hasOwnProperty("adbreakManager"))this.adbreakManager.podClose();else if(ot.adObject.hasOwnProperty(this.id)){var e=ot.adObject[this.id];return bt.log("Ad Manager trying to close Ad"),e.close()}}},{key:"pause",value:function(){if(this.hasOwnProperty("adbreakManager")&&this.isMultiAdEnable())return this.adbreakManager.pause();if(ot.adObject.hasOwnProperty(this.id)){var e=ot.adObject[this.id];return"video"==e.adSize?e.pause():void 0}}},{key:"resume",value:function(){if(this.hasOwnProperty("adbreakManager")&&this.isMultiAdEnable())return this.adbreakManager.resume();if(ot.adObject.hasOwnProperty(this.id)){var e=ot.adObject[this.id];if("video"==e.adSize)return e.resume();ot.enableAMP&&e.fireViewImpression()}}},{key:"firstTimePlay",value:function(){if(ot.adObject.hasOwnProperty(this.id)){var e=ot.adObject[this.id];if("video"==e.adSize)return e.firstTimePlay()}}},{key:"closeAfter",value:function(e){if(ot.adObject.hasOwnProperty(this.id)){var t=ot.adObject[this.id];return bt.log("Ad Manager calling close Ad After"),t.closeAfter(e)}}},{key:"getMultiAdRequestParams",value:function(){var e={};return this.isCustomTargetingEnabled()?e.te="1":e.te="0",e}},{key:"isMultiAdEnable",value:function(){return parseInt(this.masterConfigManager.get({type:"MULTIADS",value:this.adSpotKey,defaultValue:0}))}},{key:"isCustomTargetingEnabled",value:function(){return parseInt(this.masterConfigManager.get({type:"APP_TARGETING",value:this.adSpotKey,defaultValue:0}))||parseInt(this.masterConfigManager.get({type:"TARGETING",value:this.adSpotKey,defaultValue:0}))}},{key:"getChunkLength",value:function(){return this.masterConfigManager.get({type:"CHUNK-LENGTH",value:this.adSpotKey,defaultValue:1536})}},{key:"isAdbreakDurationValid",value:function(){var e=parseInt(this.placementNodeDataSet.adBreakDuration);return"number"==typeof e&&!isNaN(e)&&(e<=2?(bt.error("Discarding ad for placementId: ".concat(this.id,", because ad break duration is set lesser than 2 seconds")),bt.error("".concat(this.id," : Invalid Ad request/Arguments")),!1):(this.adbreakDuration=e,!0))}},{key:"isAdbreakCountValid",value:function(){var e=parseInt(this.placementNodeDataSet.adBreakCount);return"number"==typeof e&&!isNaN(e)&&(e<=0?(bt.error("Discarding ad for placementId: ".concat(this.id,", because ad break count is set lesser than 1")),bt.error("".concat(this.id," : Invalid Ad request/Arguments")),!1):(this.adbreakCount=e,!0))}},{key:"isVideoContainerVaild",value:function(){var e=At.getElement(this.placementNodeDataSet.containerId);return null==e?(bt.log("ad for placementId: ".concat(this.id,", video Container is not found")),!1):(this.containerId=e,!0)}},{key:"isAdbreakDurationAvailable",value:function(){return this.placementNodeDataSet.hasOwnProperty("adBreakDuration")&&this.placementNodeDataSet.adBreakDuration&&this.placementNodeDataSet.hasOwnProperty("containerId")&&this.placementNodeDataSet.containerId&&!0}},{key:"isAdbreakCountAvailable",value:function(){return this.placementNodeDataSet.hasOwnProperty("adBreakCount")&&this.placementNodeDataSet.adBreakCount&&this.placementNodeDataSet.hasOwnProperty("containerId")&&this.placementNodeDataSet.containerId&&!0}},{key:"createAdbreakObject",value:function(e){var t=this,i=e.adBreakDuration,a=e.containerId,n=e.adBreakCount,r=e.companionCont,o={type:12,skip:t.skip,isHorizontalMode:this.orientation?this.orientation:ot.instream.rotateInstreamVideo,isTimerVisiable:ot.instream.setTimerVisibility,adbreakDuration:1e3*i,adbreakCount:n,adSpotKey:this.adSpotKey,channelName:this.channelName,placementId:this.id,show:this.loadAd||!1,videoContainer:a,videoCompanionCont:r,callback:gn(gn({onAdClosed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(t.orientation||ot.instream.rotateInstreamVideo)&&screen.orientation.lock("portrait"),Ce.onAdClosed({placementId:t.id,isVideoCompleted:!0}),t.AdBreakSelectionManager.hasOwnProperty("addIntoBackUpAdIgnoreList")&&t.AdBreakSelectionManager.addIntoBackUpAdIgnoreList(e)},onAdPrepared:function(){t.isAdReady=!0,t.loadAd?t.start():Ce.onAdPrepared({placementId:t.id})},onAdRender:function(){t.isAdShown=!0,Ce.onAdRender({placementId:t.id,isFcapDisable:!1})},onAdDuration:function(e){Ce.onAdDuration({placementId:t.id,adTime:e})},onAdProgress:function(e){Ce.onAdProgress({placementId:t.id,progress:e})},onAdMediaStart:function(){(t.orientation||ot.instream.rotateInstreamVideo)&&screen.orientation.lock("landscape"),Ce.onAdMediaStart({placementId:t.id})},onAdClicked:function(e,i){Ce.onAdClicked({placementId:t.id,isAdDestroy:e,isFcapDisable:!1,url:i})},onAdFailedToLoad:function(e){var i=e.error,a=e.errorCode,n=e.methodname;Ce.onAdFailedToLoad({placementId:t.placementId,errorCode:a,response:i,methodname:n})},onAdSkippable:function(){Ce.onAdSkippable({placementId:t.id})},onAdSkipped:function(){(t.orientation||ot.instream.rotateInstreamVideo)&&screen.orientation.lock("portrait"),Ce.onAdClosed({placementId:t.id,isVideoCompleted:!1})},onAdMediaEnd:function(){Ce.onAdMediaEnd({placementId:t.id,isFcapDisable:!1})}},"onAdDuration",(function(e,i){Ce.onAdDuration({placementId:t.id,adTime:e,skip:i})})),"onAdChange",(function(e,i){Ce.onAdChange({placementId:t.id,adInfo:e,adCpInfo:i})}))};return new Mi(o)}},{key:"adBreakHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t={productionAd:ot.ProductionAd.getCampaigns(this.adSpotKey,this.channelName)||{},adspotConfig:ot.ProductionAd.getCampaignsConfig(this.adSpotKey,this.channelName)||{},backUpAd:(this.hybridMultiAdsEnable?ot.PrefetchAd.getCampaigns(this.adSpotKey):this.MasterConfig.getBackupCampaigns(this.adSpotKey))||{},offsetLatency:this.MasterConfig.get('asi["'.concat(this.adSpotKey,'"]["config"]["latencyPerAd"]'))||0,duration:this.adbreakDuration||e,adbc:this.adbreakCount,adBreak:this.adbreakManager,isCSTEnabled:this.isCustomTargetingEnabled(),isAdLoop:this.placementNodeDataSet.adBreakLoop||!1,adSpotKey:this.adSpotKey,channelName:this.channelName,hybridMultiAdsEnable:this.hybridMultiAdsEnable,spotId:this.id,customKeyValues:this.customKeyValues,callback:function(e){if(bt.log("---------Final POD When MultiAd Called----------"),bt.log(e),0==e.pod.length){var t=e.id;return bt.error("".concat(t,": No Fill")),void Za({status:"m104",errorCode:"m104",errorDesc:ne.m104,data:{placementId:t}})}}};this.AdBreakSelectionManager=new hn(t),this.AdBreakSelectionManager.formPOD()}}],t&&yn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const An=bn;function kn(e){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(e)}function In(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Sn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?In(Object(i),!0).forEach((function(t){var a,n,r,o;a=e,n=t,r=i[t],o=function(e,t){if("object"!=kn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=kn(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==kn(o)?o:o+"")in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):In(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const Tn=function(e){var t=document.querySelector("ins#"+e);if("function"!=typeof JioAds.onVMAPReady||!t.hasAttribute("data-vmap-id"))return!1;var i="https://mercury.jio.com/delivery/vapi.php?",a=new be({id:e}),n={cvl:t.getAttribute("data-content-video-length"),vmi:t.getAttribute("data-vmap-id"),cue:t.getAttribute("data-queue-point")};for(var r in delete(n=Sn(Sn({},n),a.get())).asi,console.log("VMAP_Data => ",n),n)(n[r]||0==n[r])&&(i+="&"+r+"="+encodeURIComponent(n[r]));var o={url:i,getVMAPURL:function(){return this.url}};return"function"==typeof JioAds.onVMAPReady&&JioAds.onVMAPReady(e,o),!0};function wn(e){if("insInjected"==e.animationName){var t=e.target;if(!ot.ifa){var i=null;ot.identifiers&&(i=ot.identifiers),bt.log("ifa fetching"),new Pe({identifiers:i})}Cn(t.id),bt.log(t.id)}}function Cn(e,t){if(bt.log("SDK Render calling api"),e)if(At.getElement(e)){if(Tn(e))return!0;ot.AdManager.hasOwnProperty(e)&&ot.adObject.hasOwnProperty(e)&&ot.adObject[e].isAdShown&&ee(e);var i=At.getInsData(e);if(0!=ji.getPermissionForAdRequest(i.adspot))bt.log("JioManager load ads initiated"),ot.AdManager[e]=null,ot.AdManager[e]=new An(t?{id:e,loadAd:!0,autoplay:!1}:{id:e,loadAd:!0}),ot.AdManager[e].init();else{bt.info("".concat(e," : Ad Request Not Allowed"));var a={placementId:e,errorCode:"m115",response:"Ad request not allowed",methodname:"loadAd"};"function"==typeof JioAds.onAdFailedToLoad&&(bt.log("onAdFailedToLoadCalled "+e),JioAds.onAdFailedToLoad(e,a))}}else bt.log("INS tag doesn't exist");else bt.log("Placement Id and adspotKey required for rendering Ad")}document.addEventListener("animationstart",wn,!1),document.addEventListener("MSAnimationStart",wn,!1),document.addEventListener("webkitAnimationStart",wn,!1);const En={renderAd:Cn,onINSTagInsert:wn};function Ln(e){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(e)}function Mn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function jn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=On(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Mn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Pn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,On(a.key),a)}}function On(e){var t=function(e,t){if("object"!=Ln(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ln(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ln(t)?t:t+""}var Dn=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.streamURL;this.streamURL=i,this.deliveryParameter={},this.customMetadata={},this.getGlobalMetadata(this.customMetadata),this.set()},(t=[{key:"getGlobalMetadata",value:function(e){ot.hasOwnProperty("globalMetaData")&&Object.keys(ot.globalMetaData).forEach((function(t){e["md_".concat(t)]=ot.globalMetaData[t]}))}},{key:"get",value:function(e){return this.deliveryParameter?jn(jn({},e),this.deliveryParameter):{}}},{key:"getURL",value:function(e){var t=this.get(),i="";return Object.keys(t).forEach((function(a){e&&e.length&&e.includes(a)||(i+="&".concat(a,"=").concat(t[a]))})),this.streamURL+i}},{key:"set",value:function(){var e=new ue;ot.ao=e.isPortrait()?"p":"l";var t=new Date;ot.trq=t.getTime(),ot.md_hr=t.getHours(),ot.md_min=t.getMinutes(),ot.locationData&&(ot.md_cn=ot.locationData.cn?ot.locationData.cn:"",ot.md_ct=ot.locationData.ct?ot.locationData.ct:"",ot.md_pn=ot.locationData.pn?ot.locationData.pn:"",ot.md_st=ot.locationData.st?ot.locationData.st:""),bt.log("preparing the request params for Ad request");try{this.deliveryParameter=jn(jn({},jn({},this.customMetadata)),Z.filtered({raw:ot,keyList:["la","lo","cl","acc","gts","ap","av","ao","lc","se","qk","ifa","trq","ai","aic","vr","asi","cgi","ua","mn","br","os","osv","sh","sw","dt","tz","uid","so","cc","nc","md_language","md_dvb","md_dvm","md_srid","md_isq","md_hr","md_min","md_nt","md_osv","lt","fn","md_nt","sbz","md_cn","md_pn","md_ct","md_st"]}))}catch(e){bt.log("Cant able to set deliveryParameter",e)}}}])&&Pn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Nn=Dn;function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function xn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Un(a.key),a)}}function Un(e){var t=function(e,t){if("object"!=Rn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Rn(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rn(t)?t:t+""}const Vn=function(){return e=function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.data=i,this.companionInfo=a,this.companionVariationsNode=[],this.adid=0,this.adStartTime=0,this.isOMEnable=!1,this.videoObject=n,this.creative={linear:null,companion:null},this.allowTracking=r},(t=[{key:"init",value:function(e,t){var i=this;return new Promise((function(a,n){i.adStartTime=t,i.generateMacros();var r=i.data;i.vastParser=new Vt.VASTParser;var o=i;i.vastParser.parseVAST(r,{timeout:ot.adRenderingTimeout,withCredentials:!0,wrapperLimit:100,allowMultipleAds:!0,followAdditionalWrappers:!0}).then((function(t){if(Z.setOMSDKParamater(t,o),e.xAdId){for(var n=0;n<t.ads.length;n++)if(t.ads[n].id==e.xAdId){i.ad=t.ads[n];break}}else i.ad=t.ads[0];var r={};if(i.ad.creatives.length>0){for(n=0;n<i.ad.creatives.length;n++)i.creative[i.ad.creatives[n].type]=i.ad.creatives[n],r[i.ad.creatives[n].type]=i.ad.creatives[n].adParameters;i.ad.adParameters=r}if(null!==i.creative.companion&&i.companionInfo&&Object.keys(i.companionInfo).length>0){i.getCompanionVariation(),i.ad.companion=i.companionVariationsNode;try{i.initCompanionTracker()}catch(e){}}e.hasOwnProperty("plannedDuration")&&(i.respDuration=e.plannedDuration/1e3),i.isOMEnable&&i.OMSDKInit(),i.VASTClient=new Vt.VASTClient,i.vastTracker=new Vt.VASTTracker(i.VASTClient,i.ad,i.creative.linear),i.respDuration&&i.vastTracker.setDuration(i.respDuration);try{i.allowTracking&&i.vastTracker.trackImpression(i.macros)}catch(e){}if(i.ad.clickable=!!i.vastTracker.clickThroughURLTemplate,i.ad.clickUrl=i.vastTracker.clickThroughURLTemplate,i.vastTracker.clickTrackingURLTemplates){for(n=0;n<i.vastTracker.clickTrackingURLTemplates.length;n++)i.vastTracker.clickTrackingURLTemplates[n].url=Z.replaceMacrosValues(i.vastTracker.clickTrackingURLTemplates[n].url,i.macros);i.ad.clickTrackers=i.vastTracker.clickTrackingURLTemplates}i.ad.deepLinkUrl=i.vastTracker.ad.extensions&&i.vastTracker.ad.extensions[0]&&i.vastTracker.ad.extensions[0].children&&i.vastTracker.ad.extensions[0].children[0]?i.vastTracker.ad.extensions[0].children[0].value:"",a(i.ad)})).catch((function(e){bt.error("Video Ad Unable to parse the VAST Ad Something went wrong",e),Ce.onAdFailedToLoad({placementId:i.placementId,errorCode:"m111",response:e,methodname:"initvast"}),n({placementId:i.placementId,errorCode:ne[1011]})}))}))}},{key:"OMSDKInit",value:function(){var e=this;if(Z.isOmSDKAvailable()){var t=new J(this.videoObject,this.OMSDKParms,!0,this);this.OmsdkManager=t}else this.script=Z.injectSessionClientScriptTag_(),this.script.addEventListener("load",(function(){var t=new J(e.videoObject,e.OMSDKParms,!1,e);e.OmsdkManager=t})),this.script.setAttribute("src",this.OMSDKParms.OMSDK_URL),document.body.appendChild(this.script)}},{key:"getCompanionVariation",value:function(){for(var e=this.creative.companion.variations,t=0;t<e.length;t++)if(void 0!==e[t].staticResources&&e[t].staticResources.length>0)for(var i=0;i<this.companionInfo.length;i++)("adSlotID"in(n=this.companionInfo[i])&&null!==e[t].adSlotID&&n.adSlotID==e[t].adSlotID||"height"in n&&"width"in n&&n.height==e[t].height&&n.width==e[t].width)&&this.setCompanionObject(e[t],"image",n);else if(void 0!==e[t].htmlResources&&e[t].htmlResources.length>0)for(var a=0;a<e.length;a++){var n;("adSlotID"in(n=this.companionInfo[a])&&null!==e[t].adSlotID&&n.adSlotID==e[t].adSlotID||"height"in n&&"width"in n&&n.height==e[t].height&&n.width==e[t].width)&&this.setCompanionObject(e[t],"html",n)}}},{key:"setCompanionObject",value:function(e,t,i){var a={},n={};"image"==t?(a=e.staticResources[0],n.companionUrl=a.url):"html"==t&&(a=e.htmlResources[0],n.companionUrl=a);try{n.creativeType=t,n.id=e.id,n.divID=i.companionDivId,n.adSlotID=e.adSlotID,n.height=e.height?e.height:100,n.width=e.width?e.width:200}catch(e){}n.companionVastTracker=new Vt.VASTTracker(this.VASTClient,null,this.creative.companion,e),this.companionVariationsNode.push(n)}},{key:"changeAd",value:function(e){delete this.VASTClient,delete this.vastTracker,delete this.vastParser;for(var t=0;t<this.companionVariationsNode.length;t++)this.companionVariationsNode[t].companionVastTracker&&delete this.companionVariationsNode[t].companionVastTracker,delete this.companionVariationsNode[t];delete this.companionVariationsNode,init(e)}},{key:"complete",value:function(){this.vastTracker&&this.allowTracking&&this.vastTracker.complete(this.macros)}},{key:"setProgress",value:function(e){this.vastTracker&&this.allowTracking&&(this.curAdTime=e-this.adStartTime,this.vastTracker.setProgress(this.curAdTime,this.macros))}},{key:"initCompanionTracker",value:function(){for(var e=0;e<this.companionVariationsNode.length;e++)this.companionVariationsNode[e].divID&&ui({placementId:this.companionVariationsNode[e].divID,callback:this.fireViewImpression.bind(this),refreshTime:0})}},{key:"fireImpression",value:function(e){for(var t=0;t<this.companionVariationsNode.length;t++)this.companionVariationsNode[t].divID==e&&this.allowTracking&&this.companionVariationsNode[t].companionVastTracker.trackImpression(this.macros)}},{key:"fireViewImpression",value:function(e){this.allowTracking&&this.fireImpression(e)}},{key:"adClick",value:function(e,t){var i;if(this.isOMEnable&&this.OmsdkManager.click(),"companion"==e)for(var a=0;a<this.companionVariationsNode.length;a++)t&&this.companionVariationsNode[a].id==t&&(i=this.companionVariationsNode[a].companionVastTracker);else i=this.vastTracker;var n=null;null!=i.clickThroughURLTemplate?(i.click("",this.clickmacros),n=i.clickThroughURLTemplate||i.clickThroughURLTemplate.url):i.trackURLs(i.clickTrackingURLTemplates,this.clickmacros),null!==n&&(Kt.click("string"==typeof n?n:n.url,!1),Ce.onAdClicked({placementId:this.id,isAdDestroy:!0,isFcapDisable:!0,url:n}))}},{key:"close",value:function(){bt.log("vastAd destroy");try{this.isOMEnable&&this.OmsdkManager.destoryAdsession(),this.vastTracker&&(this.vastTracker.close(),delete this.vastTracker),this.VASTClient&&delete this.VASTClient,this.vastParser&&delete this.vastParser;for(var e=0;e<this.companionVariationsNode.length;e++)this.companionVariationsNode[e].companionVastTracker&&delete this.companionVariationsNode[e].companionVastTracker,delete this.companionVariationsNode[e];delete this.companionVariationsNode}catch(e){bt.error("Error While Destroying ".concat(e))}}},{key:"skip",value:function(){this.vastTracker&&this.allowTracking&&this.vastTracker.skip(this.macros)}},{key:"setMuted",value:function(e){this.vastTracker&&this.allowTracking&&this.vastTracker.setMuted(e)}},{key:"setPaused",value:function(e){this.vastTracker&&this.allowTracking&&this.vastTracker.setPaused(e)}},{key:"generateMacros",value:function(){this.ccbString=Z.crc32((Date.now()||(new Date).getTime())+":"+ot.appName+":"+this.id+":"+100*Math.random(10)),this.macros={bz:"video",ccb:this.ccbString,seq:1},Z.generateGlobalMacrosList(this.macros),this.clickmacros={bz:"video",ccb:this.ccbString,seq:1},Z.generateGlobalMacrosList(this.clickmacros,!0)}}])&&xn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function _n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Fn(a.key),a)}}function Fn(e){var t=function(e,t){if("object"!=Bn(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Bn(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bn(t)?t:t+""}var Kn=i(73),zn=function(){return e=function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.parsedContent=null,"hls"===t?(this.streamType="hls",bt.log(ot.spotadEndDelay||0),this.parser=new Kn(ot.spotadEndDelay||0)):this.parser=null},(t=[{key:"parse",value:function(e){return this.parser?(delete this.parsedContent,this.parser.read(e),this.parsedContent=this.parser.getResult(),this.parser.reset(),this.parsedContent):(bt.warn("Parser not found!"),null)}},{key:"destroy",value:function(){bt.log("manifestParser destroy");try{delete this.parser}catch(e){bt.error("Error While Destroying ".concat(e))}}}])&&_n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Gn=i(117);function Hn(e){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(e)}var qn=null,Jn=null,Wn=null;function Yn(e,t,i){var a=null;if(function(){if(Jn)return!0;var e=window.localStorage.getItem("jat_config");return!!e&&(Jn=e,!0)}()){var n=function(e){var t=null,i=qn.get("jat_config_"+e);if(i)t=i;else{var a=new XMLHttpRequest({mozSystem:!0}),n="https://mercury.akamaized.net/cfg/jioAdsTracker/".concat(e,".json?t=").concat(Date.now());a.onload=function(){if(200!=a.status)bt.error("Some Error Occured. status = "+a.status+"  statusText = "+a.statusText);else{try{t=(t=JSON.parse(a.responseText)).scteEvent[0]}catch(e){}t&&qn.set("jat_config_"+e,t)}},a.onerror=function(){},a.open("GET",n,!1),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send()}return t}(e);a=function(e,t,i,a){var n=null;if(e.VideoTrackerUrls.hasOwnProperty(t))for(var r=e.VideoTrackerUrls[t],o=0;o<r.length;o++)$n(tr(r[o],i,a));if(n=e.AdParameters){if(n=function(e){var t={};if(e.hasChildNodes())for(var i=e.childNodes.item(0),a=0;a<i.childNodes.length;a++)t[i.childNodes[a].nodeName]=i.childNodes[a].textContent;return t}((new DOMParser).parseFromString(n,"text/xml")),e.VideoTrackerUrls.clickThroughUrl&&(n.clickThroughUrl=e.VideoTrackerUrls.clickThroughUrl),e.VideoTrackerUrls.clickTrackingUrl){for(var s=0;s<e.VideoTrackerUrls.clickTrackingUrl.length;s++)e.VideoTrackerUrls.clickTrackingUrl[s]=tr(e.VideoTrackerUrls.clickTrackingUrl[s],i,a,!0);n.clickTrackingUrl=e.VideoTrackerUrls.clickTrackingUrl}e.VideoTrackerUrls.deeplinkUrl&&(n.deeplinkUrl=e.VideoTrackerUrls.deeplinkUrl)}return n}(n||{VideoTrackerUrls:Jn.defaultTrackerUrls,defaultTrackers:!0},t,e,i)}return a}function Qn(){return Yn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,"impressionUrl",arguments.length>1?arguments[1]:void 0)}function Zn(){return Yn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,"videoEndUrl")}function Xn(){var e=new XMLHttpRequest({mozSystem:!0}),t="https://mercury.akamaized.net/cfg/jioAdsTracker/trackerweb.json?t="+Date.now();e.onload=function(){if(200!=e.status)bt.error("Some Error Occured. status = "+e.status+"  statusText = "+e.statusText);else{var t=null;try{t=JSON.parse(e.responseText)}catch(e){throw new Error("Invalid JSON found in Config")}t&&(Wn=Date.now(),Jn=t,window.localStorage.setItem("jat_config",JSON.stringify(t)),window.localStorage.setItem("jat_config_update_time",Wn))}},e.onerror=function(){},e.open("GET",t),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send()}function $n(e){try{e=JSON.parse(e)}catch(e){}if("object"==Hn(e))for(var t=0;t<e.length;t++)er(e[t]);else er(e)}function er(e){var t=new XMLHttpRequest;t.open("GET",e),t.send(),t.onload=function(){200!=t.status&&bt.error("Some Error Occured. status = "+t.status+"  statusText = "+t.statusText)},t.onerror=function(){}}function tr(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)return null;"string"!=typeof e&&(e=JSON.stringify(e));var n="",r=e;ot.hasOwnProperty("globalMetaData")&&Object.keys(ot.globalMetaData).forEach((function(e){n+="md_".concat(e,"=").concat(ot.globalMetaData[e],"&")})),n=n.substring(0,n.length-1);var o="";new URLSearchParams(e).has("crr")&&(o=-1);var s,c=function(e){for(var t,i=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;i[a]=t}for(var r=-1,o=0;o<e.length;o++)r=r>>>8^i[255&(r^e.charCodeAt(o))];return(-1^r)>>>0}((Date.now()||(new Date).getTime())+":"+t+":"+100*Math.random(10)),d={uid:ot.uid,ifa:ot.ifa,channelID:ot.cid,ua:ot.ua,asi:ot.adSpotId,contentName:ot.contentName,contentId:ot.contentId,appid:ot.appid,creativeId:t,ccb:c,cb:(s=1e9,9999999999,Math.floor(9e9*Math.random()+s)),trq:(new Date).getTime(),osv:ot.osv,os:ot.os,dt:ot.dt,vr:ot.vr,crr:o,cmd:n,md_ctid:t,av:ot.av,mol_impression_id:i,icid:t};return Z.replaceMacrosValues(r,d,a)}function ir(e){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ir(e)}function ar(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nr(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?nr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function rr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function or(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=cr(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rr(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function sr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,cr(a.key),a)}}function cr(e){var t=function(e,t){if("object"!=ir(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=ir(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ir(t)?t:t+""}var dr=function(){return e=function e(t,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="HLSTimeLineProcessor",t.onSpotAdDetected&&(this.onSpotAdDetected=t.onSpotAdDetected.bind(this)),t.onSpotAdStart&&(this.onSpotAdStart=t.onSpotAdStart.bind(this)),t.onSpotAdEnd&&(this.onSpotAdEnd=t.onSpotAdEnd.bind(this)),t.cbAdBreaksDetected&&(this.onAdBreaksDetected=t.cbAdBreaksDetected.bind(this)),this.cbRegionAdded=t.cbRegionAdded,this.cbRegionEntered=t.cbRegionEntered,this.cbRegionExited=t.cbRegionExited,this.adTracker=function(){if(qn||(qn=new Gn(500)),Jn)Date.now()-Wn>3600*parseInt(Jn.configReadTime)*1e3?Xn():bt.log("Config will auto refresh in "+(Date.now()-Wn)+" miliseconds");else{var e=window.localStorage.getItem("jat_config");if(e){e=JSON.parse(e);var t=parseInt(window.localStorage.getItem("jat_config_update_time"));Date.now()-t>3600*parseInt(e.configReadTime)*1e3?Xn():Jn=e}else Xn()}}(),this.playPositionAtSyncMs=0,this.startCreativeID="",this.programDateTimeAtSyncMs=0,this.isLive=a,this.vodAdBreakList=[],this.adPod={active:[],done:[],schedule:[],activeAd:null,endTime:0,plannedAdDuration:0,actualAdDuration:0},this.blackoutPod={active:[],schedule:[]}},(t=[{key:"onPlaylistUpdate",value:function(e){var t=this,i=e.segments.filter((function(e){return!!e.dateRange&&!e.dateRange.caid})).map((function(e){return e.dateRange})),a=e.segments.filter((function(e){return!!e.dateRange&&!!e.dateRange.caid||!!e.blackout&&!!e.blackout.caid||!!e.oatcls&&!!e.oatcls.caid||!!e.discontinuity&&!!e.discontinuity.caid})).map((function(e){return e.dateRange?e.dateRange:e.blackout&&e.blackout.caid?or({},e.blackout):e.oatcls&&e.oatcls.caid?or({},e.oatcls):e.discontinuity&&e.discontinuity.caid?or({},e.discontinuity):void 0}));if(a.length&&a.length>0){if(this.blackoutPod.active.length>0){var n=this.blackoutPod.active[this.blackoutPod.active.length-1],r=a.findIndex((function(e){return e.id==n.id}));-1!=r&&a.splice(0,r)}for(var o,s=function(){var e=a.shift(),i={id:e.id,caid:e.caid,tag:e.tag,adSystem:"SPOT",impid:e.impid||null,startTime:e.at?e.at:e.startDate?e.startDate.getTime():e.endDate?e.endDate.getTime():null,plannedDuration:0,type:e.type,streamType:"hls"};i.caid&&(t.blackoutPod.active.find((function(e){return e.id==i.id&&e.type==i.type}))||(-1==(o=t.blackoutPod.schedule.findIndex((function(e){return e.caid==i.caid&&e.id==i.id})))?(t.blackoutPod.schedule.push(or({},i)),t.onSpotAdDetected(or({},i))):"Blackout"!=i.tag&&"DateRange"!=i.tag||"Blackout"==t.blackoutPod.schedule[o].tag&&"DateRange"==t.blackoutPod.schedule[o].tag||(t.blackoutPod.schedule.slice(o,1),t.blackoutPod.schedule.push(or({},i)),t.onSpotAdDetected(or({},i))),t.blackoutPod.active.push(or({},e))))};a.length;)s()}var c=[];if(i.length){if(this.isLive)do{c.unshift(i.pop())}while(!c[0].xAdVast);else c=ar(i);if(c.length>0&&c.length>this.adPod.active.length&&(!this.adPod.done.length||c[0].id!==this.adPod.done[0].id)){var d=null,l=null;for(this.isLive&&(d=c[0].xAdVast,l=c[0].id||null,this.plannedAdDuration=1e3*c[0].plannedDuration),c.splice(0,this.adPod.active.length);c.length;){var u=c.shift();!this.isLive&&u.xAdPodSize&&(d=u.xAdVast,l=u.id||null,this.plannedAdDuration=1e3*u.plannedDuration);var h={id:u.id,xAdId:u.xAdId,xAdVast:d,adSystem:"SSAI",startTime:u.startDate?u.startDate.getTime():null,plannedDuration:1e3*(u.plannedDuration?u.plannedDuration:u.duration),streamType:"hls",xAdPodId:l};h.xAdId&&(this.adPod.schedule.push(or({},h)),this.cbRegionAdded(or({},h)));var p=this.adPod.active.reduce((function(e,t,i){return i?e+1e3*t.plannedDuration:e}),0);this.actualAdDuration=p,h.xAdId||h.startTime||!h.plannedDuration||(this.plannedAdDuration=h.plannedDuration,this.adPod.endTime=this.adPod.active[0].startDate.getTime()+h.plannedDuration),this.adPod.active.push(or({},u))}}if(this.isLive||(this.vodAdBreakList=ar(this.adPod.schedule),this.onAdBreaksDetected(this.vodAdBreakList),this.vodAdBreakList=this.vodAdBreakList.forEach((function(e){return or(or({},e),{},{isTracked:!1})}))),this.adPod.active.length&&this.adPod.active[this.adPod.active.length-1].duration){for(;this.adPod.done.length;)this.adPod.done.pop();for(this.adPod.done=[];this.adPod.active.length;)this.adPod.done.push(this.adPod.active.shift());this.adPod.active=[]}}}},{key:"onTimeUpdate",value:function(e){var t=this.adPod.schedule;if(this.adPod.activeAd){if(e>=this.adPod.activeAd.startTime+this.adPod.activeAd.plannedDuration||this.adPod.endTime&&e>=this.adPod.endTime){if(!t.length&&"adSlate"!==this.adPod.activeAd.xAdId&&this.actualAdDuration<this.plannedAdDuration){var i=this.adPod.activeAd,a={id:"adSlate_"+i.startTime,xAdId:"adSlate",xAdVast:null,adSystem:"SSAI",startTime:i.startTime+i.plannedDuration,plannedDuration:this.plannedAdDuration-this.actualAdDuration,streamType:"hls",xAdPodId:i.adPodId};this.adPod.schedule.push(or({},a)),t.push(or({},a)),this.cbRegionAdded(or({},a))}var n=!(e>=this.adPod.activeAd.startTime+this.adPod.activeAd.plannedDuration)&&this.adPod.endTime&&e>=this.adPod.endTime;this.cbRegionExited(or({},this.adPod.activeAd),n),this.adPod.activeAd=null,this.adPod.endTime&&e>=this.adPod.endTime&&(this.adPod.endTime=0)}}else{for(var r=t.length-1;t.length&&r>=0;r--){var o=t[r];if(this.isLive?e>=o.startTime:e>=o.startTime&&e<=o.startTime+2e3){this.cbRegionEntered(or({},o)),this.adPod.activeAd=or({},o),this.isLive?this.adPod.schedule.splice(0,r+1):this.adPod.schedule.splice(r,1);break}}var s=this.blackoutPod.schedule;if(s&&s.length>0){for(r=0;s.length&&r<=s.length-1;r++){if(o=s[r],e>=o.startTime&&e<=o.startTime+2e3){if(this.blackoutPod.activeAd=or({},o),this.blackoutPod.schedule.splice(r,1),"CHAPTER_START"==o.type){this.startCreativeID=o.caid;var c=Qn(o.caid,o.impid);bt.log("Chapter Start fired",o),this.onSpotAdStart&&this.onSpotAdStart(or(or({},o),{},{companion:c}))}"CHAPTER_END"!=o.type&&"BLACKOUT_END"!=o.type||this.startCreativeID!=o.caid||(c=Zn(o.caid),bt.log("Chapter Stop fired",o),this.onSpotAdEnd&&this.onSpotAdEnd(or(or({},o),{},{companion:c})))}e>=o.startTime+2e3&&this.blackoutPod.schedule.splice(r,1)}this.blackoutPod.active=this.blackoutPod.active.filter((function(t){return parseInt(t.id)>e-12e5}))}}}}])&&sr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function ur(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,hr(a.key),a)}}function hr(e){var t=function(e,t){if("object"!=lr(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=lr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lr(t)?t:t+""}var pr=function(){return e=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hls",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>4?arguments[4]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="HlsSSAIClient",this.callback=t,this.parser=new zn(i),this.video=a,this.playPositionAtSyncMs=0,this.programDateTimeAtSyncMs=0,this.isLive=n;var r={onSpotAdDetected:this.onSpotAdRegionAdded.bind(this),onSpotAdStart:this.onSpotAdRegionEntered.bind(this),onSpotAdEnd:this.onSpotAdRegionExited.bind(this),cbRegionAdded:this.onTimeLineRegionAdded.bind(this),cbRegionEntered:this.onTimeLineRegionEntered.bind(this),cbRegionExited:this.onTimeLineRegionExited.bind(this),cbAdBreaksDetected:this.onAdBreaksDetected.bind(this)};this.hlsTimeLineProcessor=new dr(r,a,n)},t=[{key:"manifestUpdate",value:function(e){try{if(this.parser){var t=this.parser.parse(e);this.hlsTimeLineProcessor&&this.hlsTimeLineProcessor.onPlaylistUpdate(t)}}catch(e){ot.enableLogging&&oe(null,"s113","Manifest Parsing Error","onHLSPlaylistUpdate",this.streamURL)}}},{key:"syncTime",value:function(e){this.playPositionAtSyncMs=1e3*this.video.currentTime,this.programDateTimeAtSyncMs=e}},{key:"progressUpdate",value:function(e){this.hlsTimeLineProcessor&&this.hlsTimeLineProcessor.onTimeUpdate(e)}},{key:"onSpotAdRegionAdded",value:function(e){this.callback.onSpotAdDetected(e)}},{key:"onSpotAdRegionEntered",value:function(e){this.callback.onSpotAdStart(e)}},{key:"onSpotAdRegionExited",value:function(e){this.callback.onSpotAdEnd(e)}},{key:"onTimeLineRegionAdded",value:function(e){bt.info("".concat(this.TAG,": Ad Region Added: ").concat(e.id,":").concat(e.xAdId)),this.callback.onAdMarkerDetected(e)}},{key:"onTimeLineRegionEntered",value:function(e){bt.info("".concat(this.TAG,": Ad Started: ").concat(e.xAdId)),this.callback.onAdMediaStart(e)}},{key:"onTimeLineRegionExited",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];bt.info("".concat(this.TAG,": Ad Ended: ").concat(e.xAdId)),this.callback.onAdMediaEnd(e,t)}},{key:"onAdBreaksDetected",value:function(e){bt.info("Ad breaks Detected"),this.callback.onAdBreaksDetected(e)}},{key:"getCurrentTime",value:function(){return this.video.currentTime}},{key:"destroy",value:function(){bt.log("hlsjs destroy");try{this.parser.destroy(),delete this.parser,this.parser=null,delete this.hlsTimeLineProcessor,this.hlsTimeLineProcessor=null}catch(e){bt.error("Error While Destroying ".concat(e))}}}],t&&ur(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function fr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function gr(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=vr(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fr(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function yr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,vr(a.key),a)}}function vr(e){var t=function(e,t){if("object"!=mr(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=mr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mr(t)?t:t+""}var br=function(){return e=function e(t,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="DASHTimeLineProcessor",this.cbRegionAdded=t.cbRegionAdded,this.cbRegionEntered=t.cbRegionEntered,this.cbRegionExited=t.cbRegionExited,this.currentPeriodId="",this.vastUrl=a,this.adPod={active:[],done:[],schedule:[],activeAd:null}},(t=[{key:"onPeriodSwitch",value:function(e){this.currentPeriodId=e}},{key:"onEventUpdate",value:function(e,t){var i;if(i="adSlate"===e.id?{id:"adSlate_"+e.startTime,xAdId:"adSlate",xAdVast:null,startTime:e.startTime,plannedDuration:e.duration,streamType:"dash",periodId:t}:{id:e.id,xAdId:e.adid,xAdVast:this.getVASTURL(this.vastUrl,e.id,e.dashStreamType),startTime:e.startTime,plannedDuration:e.duration,streamType:"dash",periodId:t},!this.adPod.schedule.length||!this.adPod.schedule.some((function(e){return e.id===i.id}))){this.adPod.schedule.push(gr({},i));var a=gr({},i);delete a.periodId,this.cbRegionAdded(gr({},a))}}},{key:"onTimeUpdate",value:function(e){if(this.adPod.activeAd){if(1e3*e>=1e3*this.adPod.activeAd.startTime+this.adPod.activeAd.plannedDuration||this.adPod.activeAd.periodId!==this.currentPeriodId){var t=gr({},this.adPod.activeAd);delete t.periodId;var i=1e3*e<1e3*t.startTime+t.plannedDuration;this.cbRegionExited(gr({},t),i),this.adPod.activeAd=null}}else for(var a=this.adPod.schedule,n=a.length-1;a.length&&n>=0;n--){var r=a[n];if(1e3*e>=1e3*r.startTime&&1e3*e<1e3*r.startTime+r.plannedDuration){this.adPod.activeAd=gr({},r),delete r.periodId,this.cbRegionEntered(gr({},r)),this.adPod.schedule.splice(0,n+1);break}}}},{key:"getVASTURL",value:function(e,t,i){return"nowtilus"==i?"".concat(e,"/").concat(t,".xml"):e.replace("DATERANGEID",t)}}])&&yr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}function kr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ir(a.key),a)}}function Ir(e){var t=function(e,t){if("object"!=Ar(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Ar(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ar(t)?t:t+""}var Sr=function(){return e=function e(t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="DashSSAIClient",this.callback=t,this.video=i,this.playPositionAtSyncMs=0,this.programDateTimeAtSyncMs=0,this.curProgress=0;var n={cbRegionAdded:this.onTimeLineRegionAdded.bind(this),cbRegionEntered:this.onTimeLineRegionEntered.bind(this),cbRegionExited:this.onTimeLineRegionExited.bind(this)};this.dashTimeLineProcessor=new br(n,i,a)},t=[{key:"manifestUpdate",value:function(e){var t=e;if(t&&t.EventStream&&t.start+t.availabilityStartTime>this.curProgress)if(6===t.EventStream.Event.length){var i="vast"==t.EventStream.Event[0].__text.split(":")[0]?"nowtilus":"jioreel",a={id:"nowtilus"==i?t.EventStream.Event[0].__text.split(":")[1]:t.EventStream.Event[0].__text.split(":")[0],adid:"nowtilus"==i?0:t.EventStream.Event[0].__text.split(":")[1],startTime:t.start+t.availabilityStartTime,duration:t.EventStream.Event[0].duration,dashStreamType:i};this.dashTimeLineProcessor&&this.dashTimeLineProcessor.onEventUpdate(a,t.id)}else{var n={id:"adSlate",startTime:t.start+t.availabilityStartTime,duration:t.EventStream.Event[0].duration};this.dashTimeLineProcessor&&this.dashTimeLineProcessor.onEventUpdate(n,t.id)}}},{key:"progressUpdate",value:function(e){this.curProgress=e,this.dashTimeLineProcessor&&this.dashTimeLineProcessor.onTimeUpdate(e)}},{key:"periodSwitch",value:function(e){this.dashTimeLineProcessor&&this.dashTimeLineProcessor.onPeriodSwitch(e)}},{key:"onTimeLineRegionAdded",value:function(e){bt.info("".concat(this.TAG,": Ad Region Added: ").concat(e.id)),this.callback.onAdMarkerDetected(e)}},{key:"onTimeLineRegionEntered",value:function(e){bt.info("".concat(this.TAG,": Ad Started: ").concat(e.id)),this.callback.onAdMediaStart(e)}},{key:"onTimeLineRegionExited",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];bt.info("".concat(this.TAG,": Ad Ended: ").concat(e.id)),this.callback.onAdMediaEnd(e,t)}},{key:"getCurrentTime",value:function(){return this.video.currentTime}},{key:"destroy",value:function(){bt.log("dashjs destroy");try{delete this.dashTimeLineProcessor,this.dashTimeLineProcessor=null}catch(e){bt.error("Error While Destroying ".concat(e))}}}],t&&kr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function wr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function Cr(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=Lr(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wr(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Er(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Lr(a.key),a)}}function Lr(e){var t=function(e,t){if("object"!=Tr(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Tr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Tr(t)?t:t+""}var Mr="regionAdded",jr="regionStarted",Pr="regionEnded",Or=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=t.streamURL,a=t.streamType,n=t.isLive,r=t.videoInstance,o=t.vastURL,s=t.callback;this.TAG="SSAIMasterPlayer",this.streamURL=i,this.streamType=a.toLowerCase(),this.isLive=n,this.playerClient=null,this.videoInstance=r,this.callback=s,this.ads=[];var c=this;switch(this.activeAd=null,this.cbHandler={onSpotAdDetected:function(e){c.callback.onSpotAdDetection(e)},onSpotAdStart:function(e){c.callback.onSpotAdStart(e)},onSpotAdEnd:function(e){c.callback.onSpotAdEnd(e)},onAdMarkerDetected:function(e){c.cbProcessor(Mr,e)},onAdMediaStart:function(e){c.cbProcessor(jr,e)},onAdMediaEnd:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.cbProcessor(Pr,e,t)},onAdBreaksDetected:function(e){c.callback.onAdBreaksDetected(e)}},this.vastURL=o,bt.log("Master player created for stream: "+this.streamURL),this.streamType){case"hls":this.playerClient=new pr(this.cbHandler,this.streamType,this.videoInstance,this.vastURL,this.isLive);break;case"dash":this.playerClient=new Sr(this.cbHandler,this.streamType,this.videoInstance,this.vastURL,this.isLive)}},t=[{key:"cbProcessor",value:function(e,t){var i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case Mr:var n=!1;this.ads.length?(this.ads.map((function(e){t.startTime-e.endTime<500&&(e.onEnd=!1,i.ads.push({id:t.id,startTime:t.startTime,endTime:t.startTime+t.plannedDuration,onStart:!1,onEnd:!0}),n=!0)})),n||(this.ads.push({id:t.id,startTime:t.startTime,endTime:t.startTime+t.plannedDuration,onStart:!0,onEnd:!0}),n=!1)):this.ads.push({id:t.id,startTime:t.startTime,endTime:t.startTime+t.plannedDuration,onStart:!0,onEnd:!0}),"adSlate"!==t.xAdId&&this.callback.onAdMarkerDetected(t.xAdVast,t);break;case jr:this.ads.filter((function(e){return e.id===t.id}))[0].onStart?(this.callback.onAdMediaStart(Cr({},t)),bt.log("".concat(this.TAG,": Ad Started: ").concat(t.id))):(this.callback.onAdChange(Cr({},this.activeAd),Cr({},t)),bt.log("".concat(this.TAG,": Ad Changed: ").concat(t.id))),this.activeAd=Cr({},t);break;case Pr:this.ads.filter((function(e){return e.id===t.id}))[0].onEnd&&(bt.log("".concat(this.TAG,": Ad Ended: ").concat(t.id)),this.callback.onAdMediaEnd(Cr({},t),a),this.activeAd={}),this.ads.map((function(e,a){e.id===t.id&&i.ads.splice(a,1)}));break;default:bt.warn("".concat(this.TAG,": Unknown event"))}}},{key:"getCurrentTime",value:function(){return this.playerClient.getCurrentTime()}},{key:"destroy",value:function(){bt.log("ssaiMasterPlayer destroy");try{this.playerClient.destroy(),delete this.playerClient,this.playerClient=null}catch(e){bt.error("Error While Destroying ".concat(e))}}},{key:"progressUpdate",value:function(e){this.playerClient.progressUpdate(e)}},{key:"manifestUpdate",value:function(e){this.playerClient.manifestUpdate(e)}},{key:"periodSwitch",value:function(e){this.playerClient.periodSwitch(e)}}],t&&Er(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Dr=Or;function Nr(e){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(e)}function Rr(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function xr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Ur(a.key),a)}}function Ur(e){var t=function(e,t){if("object"!=Nr(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=Nr(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nr(t)?t:t+""}var Vr=function(){return e=function e(t,i,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamURL=t,this.urlType=i,this.isLive=n,this.currentAd="",this.adCounter=0,this.currentAdDetails={creativeId:"",adSystem:""},this.storage=new l,this.companionInfo={},this.metaInfo=a,this.vast={},this.activeVast=null,this.adSpotKey=ot.asi||null,this.HTTPRequest=new yt,this.mediaType=r,this.isDash="dash"==this.mediaType,bt.log("View Manager created for stream: "+t)},t=[{key:"parseXML",value:function(e){try{return(new DOMParser).parseFromString(e.trim(),"text/xml")}catch(e){bt.error("Video Ad cant able to parse XML ".concat(e))}}},{key:"showCompanion",value:function(e){var t=this;bt.log("companion Object: "),bt.log(e);for(var i=0;i<e.length;i++){var a=e[i],n=document.getElementById(a.divID).firstElementChild;"html"===a.creativeType?n.innerHTML+='<div><object type="text/html" data="'.concat(a.companionUrl,'" data-id="').concat(a.id,'"></object></div>'):n.innerHTML+='<div><img src="'.concat(a.companionUrl,'" width="').concat(a.width,'" height="').concat(a.height,'" data-id="').concat(a.id,'"></div>'),n.querySelectorAll("[data-id]").forEach((function(e){e.addEventListener("click",(function(e){try{if(t.activeVast){var i=e.currentTarget.getAttribute("data-id")||null;bt.log("Adid",i),t.activeVast.adClick("companion",i)}}catch(e){}}))}))}}},{key:"hideCompanion",value:function(){if(this.companionInfo)for(var e=0;e<this.companionInfo.length;e++){var t=this.companionInfo[e];null!=(t=document.getElementById(t.companionDivId))&&(t.innerHTML="<div></div>")}}},{key:"InitiateViewRequest",value:function(){var e=this;"StreamURL"==this.urlType?(this.ViewRequestParamaterHandler=new Nn({streamURL:this.streamURL}),this.url=this.ViewRequestParamaterHandler.getURL(["asi","aic"]),this.sendXHRRequest(this.url,(function(t){e.vastURL=t.vastURL,e.mediaURL=t.mediaURL,e.isDash=e.mediaURL.includes(".mpd"),e.clientSideTracking=!t.hasOwnProperty("clientSideTracking")||t.clientSideTracking,Ce.onMediaURLReady({streamURL:e.streamURL,mediaURL:e.mediaURL,clientSideTracking:e.clientSideTracking})}),(function(t){Ce.onMediaURLFailedToLoad({streamURL:e.streamURL,errorCode:"s109",response:t,methodname:"InitiateViewRequest"})}))):"ViewPlaylistURL"==this.urlType?(this.mediaURL=this.streamURL,this.isClientSideTracking=!0,this.isDash=!(!this.mediaURL.includes(".mpd")&&"dash"!=this.mediaType)):(this.vastURL=this.streamURL+"/vast.xml",this.mediaURL=this.streamURL,this.isDash=this.mediaURL.includes(".mpd"),this.clientSideTracking=!0,this.isDash&&(bt.error("Tracker for Direct media URL is not allowed for Dash streams, only allowed for HLS streams"),Ce.onMediaURLFailedToLoad({streamURL:this.streamURL,errorCode:"s105",response:"Tracker for Direct media URL is not allowed for Dash streams, only allowed for HLS streams",methodname:"InitiateViewRequest"})))}},{key:"onMasterConfigPresent",value:function(){var e=this,t=this.storage.getItem("cgi_vr"),i=this.storage.getItem("cgi_exp"),a=Date.now?Date.now():(new Date).getTime(),n=this.masterConfigManager.get({type:"SSAI_VR",value:this.adSpotKey,defaultValue:!1}),r=this.masterConfigManager.get({type:"CGI_URL",value:this.adSpotKey,defaultValue:[]}),o=this.masterConfigManager.get({type:"CGI_UE",value:this.adSpotKey,defaultValue:[]}),s=this.storage.getItem("cgi");!s||t!=n||i<a?St.RequestForCohortID(r,o,n).then((function(){return e.InitiateViewRequest()})):(ot.cgi=s,St.isDefaultCohortID(ot.cgi)?St.RequestForCohortID(r,o,n).then((function(){return e.InitiateViewRequest()})):this.InitiateViewRequest())}},{key:"onMasterConfigAbsent",value:function(){bt.log("Master Config Absent called.");var e=this.storage.getItem("cgi");ot.cgi=e||"defaultCGI",this.InitiateViewRequest()}},{key:"init",value:function(){ot.ai||ot.aic?(this.masterConfigManager=new R({appName:ot.aic||ot.ai}),this.masterConfigManager.init(Z.getMasterConfigParameter(),this.onMasterConfigPresent.bind(this),this.onMasterConfigAbsent.bind(this))):this.InitiateViewRequest()}},{key:"fetchCurrentAdDetails",value:function(){return this.currentAdDetails}},{key:"sendXHRRequest",value:function(e,t,i){this.HTTPRequest.ajax(e,{method:"GET",timeout:ot.adRequestTimeout,checkJSON:!0},t,i)}},{key:"sendVastRequest",value:function(e,t,i,a){this.HTTPRequest.ajax(e,{method:"GET",ssai:t,timeout:ot.adRequestTimeout,checkJSON:!1},i,a)}},{key:"startTracking",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this;i.videoObject=document.getElementById(e);try{"companionInfo"in t?i.companionInfo=t.companionInfo:bt.log("Companion Div isn't passed"),"clickButtonId"in t&&(i.buttonElement=document.getElementById(t.clickButtonId),i.buttonElement&&i.buttonElement.addEventListener("click",(function(e){try{i.activeVast&&i.activeVast.adClick("linear")}catch(e){}})))}catch(e){bt.error(e)}i.videoObject&&(i.videoObject.addEventListener("volumechange",(function(e){i.activeVast&&i.activeVast.setMuted(i.videoObject.muted)})),i.videoObject.addEventListener("pause",(function(e){i.activeVast&&i.activeVast.setPaused(!0)})),i.videoObject.addEventListener("play",(function(e){i.activeVast&&i.activeVast.setPaused(!1)})),i.videoObject.addEventListener("timeupdate",(function(e){i.activeVast&&i.activeVast.setProgress(e.target.currentTime,i.macros)})));var a={streamURL:this.streamURL,streamType:this.isDash?"DASH":"HLS",isLive:this.isLive,videoInstance:this.videoObject,options:t,vastURL:this.vastURL,callback:{onSpotAdDetection:function(e){bt.log("PARSER Update SpotAd Detected: "+e.caid+" Type: "+e.type)},onSpotAdStart:function(e){bt.log("PARSER Update Spot Ad Start: "+e.caid),i.currentAdDetails.creativeId=e.caid,i.currentAdDetails.adSystem=e.adSystem,Ce.onSpotAdStart(e.caid,e.companion)},onSpotAdEnd:function(e){bt.log("PARSER Update Spot Ad End: "+e.caid),i.currentAdDetails=new Object,Ce.onSpotAdEnd(e.caid)},onAdMarkerDetected:function(e,t){var a=t.id+"_"+t.xAdId;bt.log("PARSER Update AdMarker Detected: "+a+" URL: "+e),i.isLive&&i.getVastTrackers(e,a)},onAdMediaStart:function(e){var t=e.id+"_"+e.xAdId;if(i.currentAdDetails.creativeId=e.xAdId,i.currentAdDetails.adSystem=e.adSystem,i.isLive||(t=e.xAdPodId+"_"+e.xAdId,i.getVastListForVOD(i.vastURL,e.xAdPodId,t)),"adSlate"===e.xAdId){var a={id:e.id,title:e.xAdId,description:e.xAdId,sequence:null,index:0,duration:e.plannedDuration,vast:null,clickable:!1};Ce.onAdMediaStart({placementId:"",adInfo:a})}else if(i.vast[t]){i.activeVast=i.vast[t].vastAdObject;var n=++i.adCounter;i.activeVast.init(e,i.masterPlayer.getCurrentTime()).then((function(a){var r={id:a.id,title:a.title,description:a.description,sequence:a.sequence,index:n,duration:e.plannedDuration,vast:e.xAdVast,clickable:a.clickable,companion:a.companion,adParams:a.adParameters,clickThrough:a.clickUrl,deeplinkUrl:a.deepLinkUrl,clickTrackers:a.clickTrackers};"companion"in a&&i.showCompanion(a.companion),Ce.onAdMediaStart({placementId:"",adInfo:r}),bt.log("PARSER Update AdStart "+t)}))}else bt.log("VAST Not found for "+t+". Skipping onAdMediaStart")},onAdChange:function(e,t){if(e){var a=e.id+"_"+e.xAdId;i.isLive||(a=e.xAdPodId+"_"+e.xAdId),bt.log("PARSER Update changeAd AdEnded "+a),(!e.xAdId||e.xAdId&&"adSlate"!==e.xAdId)&&i.vast[a]&&(i.vast[a].vastAdObject.complete(),i.vast[a].vastAdObject.close(),delete i.vast[a].vastAdObject,delete i.vast[a]),i.activeVast=null}var n=t.id+"_"+t.xAdId;if(i.currentAdDetails.creativeId=t.xAdId,i.currentAdDetails.adSystem=t.adSystem,i.isLive||(n=t.xAdPodId+"_"+t.xAdId,i.getVastListForVOD(i.vastURL,t.xAdPodId,n)),"adSlate"===t.xAdId){var r={id:t.id,title:t.xAdId,description:t.xAdId,sequence:null,index:0,duration:t.plannedDuration,vast:null,clickable:!1};i.hideCompanion(),Ce.onAdChange({placementId:"",adInfo:r})}else if(i.vast[n]){i.activeVast=i.vast[n].vastAdObject;var o=++i.adCounter;i.activeVast.init(t,i.masterPlayer.getCurrentTime()).then((function(e){var a={id:e.id,title:e.title,description:e.description,sequence:e.sequence,index:o,duration:t.plannedDuration,vast:t.xAdVast,clickable:e.clickable,companion:e.companion,adParams:e.adParameters,clickThrough:e.clickUrl,deeplinkUrl:e.deepLinkUrl,clickTrackers:e.clickTrackers};i.hideCompanion(),"companion"in e&&i.showCompanion(e.companion),Ce.onAdChange({placementId:"",adInfo:a}),bt.log("PARSER Update AdChange "+n)}))}else bt.log("VAST Not found for "+n+". Skipping AdChange")},onAdMediaEnd:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=null,n=e.id+"_"+e.xAdId;if(i.isLive||(n=e.xAdPodId+"_"+e.xAdId),i.currentAdDetails=new Object,bt.log("PARSER Update AdEnd "+n),i.adCounter=0,"adSlate"===e.xAdId)a={id:e.id,title:e.xAdId,description:e.xAdId,sequence:null,index:0,duration:e.plannedDuration,vast:null,clickable:!1};else if(i.vast[n]){var r=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(i),!0).forEach((function(t){var a,n,r;a=e,n=t,r=i[t],(n=Ur(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Rr(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},i.vast[n].vastAdObject.ad);a={id:r.id,title:r.title,description:r.description,sequence:r.sequence,index:r.index,duration:e.plannedDuration,vast:e.xAdVast,clickable:r.clickable,clickThrough:r.clickUrl,deeplinkUrl:r.deepLinkUrl,clickTrackers:r.clickTrackers},t||i.vast[n].vastAdObject.complete(),i.vast[n].vastAdObject.close(),delete i.vast[n].vastAdObject,delete i.vast[n],i.activeVast=null}i.hideCompanion(),Ce.onAdMediaEnd({placementId:"",adInfo:a})},onAdBreaksDetected:function(e){i.isLive||i.getVastListForVOD(i.vastURL,null,null),Ce.adBreaksDetected({placementId:"",adBreakList:e})}}};this.masterPlayer=new Dr(a)}},{key:"getVastListForVOD",value:function(e,t,i){var a=this;if(a.vodVastList){if(a.vast[i])return!0;var n=null;a.vodVastList.some((function(e){if(e.daterangeId==t){n=a.parseXML(e.vast);var r=new Vn(i,n,a.companionInfo,a.videoObject);return bt.log(r),a.vast[i]&&bt.error("Duplicate entry detected "+i),a.vast[i]={id:i,adbreakData:e,vastAdObject:r},!0}}))}else this.sendVastRequest(e,i,(function(i,n){try{var r=null;return a.vodVastList=JSON.parse(i),void(t&&a.vodVastList.some((function(e){if(e.daterangeId==t){r=a.parseXML(e.vast);var i=new Vn(n,r,a.companionInfo,a.videoObject);return bt.log(i),a.vast[n]&&bt.error("Duplicate entry detected "+n),a.vast[n]={id:n,adbreakData:e,vastAdObject:i},!0}})))}catch(t){ot.enableLogging&&oe(null,"s112","Vast Parsing Error"+e,"getVastTrackers",a.streamURL)}}),(function(t){var i=t.data;ot.enableLogging&&oe(null,"s106",i+" "+e,"sendVastRequest",a.streamURL)}))}},{key:"progressUpdate",value:function(e){this.masterPlayer&&this.masterPlayer.progressUpdate(e)}},{key:"manifestUpdate",value:function(e){this.masterPlayer&&this.masterPlayer.manifestUpdate(e)}},{key:"periodSwitch",value:function(e){this.masterPlayer&&this.masterPlayer.periodSwitch(e)}},{key:"getVastTrackers",value:function(e,t){var i=this;this.sendVastRequest(e,t,(function(t,a){try{var n=null;if(t.constructor==Object){var r=JSON.parse(t);n=i.parseXML(r.vast)}else try{n=(r=JSON.parse(t))?i.parseXML(r.vast):i.parseXML(t)}catch(e){n=i.parseXML(t)}var o=!0;"ViewPlaylistURL"!=i.urlType&&i.clientSideTracking||(o=!1);var s=new Vn(a,n,i.companionInfo,i.videoObject,o);return bt.log(s),i.vast[a]&&bt.error("Duplicate entry detected "+a),void(i.vast[a]={id:a,data:t,vastAdObject:s})}catch(t){ot.enableLogging&&oe(null,"s112","Vast Parsing Error"+e,"getVastTrackers",i.streamURL)}}),(function(t){var a=t.data;ot.enableLogging&&oe(null,"s106",a+" "+e,"sendVastRequest",i.streamURL)}))}},{key:"destroy",value:function(){bt.log("jioviewmanager destroy");try{this.masterPlayer.destroy()}catch(e){}try{for(var e=Object.keys(this.vast),t=0,i=e;t<i.length;t++){var a=i[t];this.vast[a].vastAdObject.close(),delete this.vast[a].vastAdObject,delete this.vast[a]}}catch(e){bt.error("Error While Destroying ".concat(e))}}}],t&&xr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Br=Vr;function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Gr(a.key),a)}}function zr(e,t,i){return t&&Kr(e.prototype,t),i&&Kr(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gr(e){var t=function(e,t){if("object"!=_r(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,"string");if("object"!=_r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_r(t)?t:t+""}var Hr=function(){return zr((function e(t){Fr(this,e);var i=t.appName;this.appName=i,this.masterConfigManager=new R({appName:this.appName}),this.storage=new l,this.adspotManagerList={}}),[{key:"onBlockAdRequest",value:function(e){var t=this.storage.getItem("blockAdRequest_"+e)||null;if(t){var i=new Date;return new Date(t.blockUpto)>i?(bt.warn("Ad request blocked further for this Adspot: "+this.adSpotKey+" upto: "+new Date(t.blockUpto)),1):(bt.log("Ad block request timer expired so removing entry and allowing Ad request"),this.storage.removeItem("blockAdRequest_"+e),0)}return 0}},{key:"init",value:function(){this.masterConfigManager.init(Z.getMasterConfigParameter(),this.onMasterConfigPresent.bind(this),this.onMasterConfigAbsent.bind(this))}},{key:"onMasterConfigPresent",value:function(){var e=this;this.adspotList=this.masterConfigManager.get("config.epf")||[],this.adspotList.forEach((function(t){if(e.masterConfigManager.get({type:"ADSPOT",value:t})){var i=e.masterConfigManager.get({type:"VR",value:t,defaultValue:""});if(i===ot.PrefetchAd.get({type:"VR",value:t,defaultValue:!1}))return;e.adspotManagerList[t]=new qr({adspotKey:t,masterConfigVr:i,appName:e.appName,masterConfigManager:e.masterConfigManager,PreFetchManager:e}),e.onBlockAdRequest(t)||e.adspotManagerList[t].init()}}))}},{key:"onMasterConfigAbsent",value:function(){bt.info("Pre Fetch Master Config can't Download for this App : ".concat(this.appName))}},{key:"destroyAdspot",value:function(e){delete this.adspotManagerList[e]}}])}(),qr=function(){return zr((function e(t){Fr(this,e);var i=t.adspotKey,a=t.masterConfigVr,n=t.appName,r=t.masterConfigManager,o=t.PreFetchManager;this.adspotKey=i,this.appName=n,this.masterConfigVr=a,this.masterConfigManager=r,this.PreFetchManager=o,this.adRequestStatusKey="adRequestStatusKey__".concat(this.adspotKey),this.HTTPRequest=new yt,this.storage=new l,this.HTTPRequestParamaterHandler=new be,this.requestThrottleManager=new nn(this.adspotKey,this.appName),this.requestType=2,this.callbackChange=!1}),[{key:"getMultiAdURL",value:function(){return ot.url[1].replace("<zoneid>",this.adspotKey)}},{key:"onBlockAd",value:function(e){var t=this.masterConfigManager.get({type:"BLK",value:e,defaultValue:!1});if(t&&t>0){var i=new Date((new Date).getTime()+6e4*t);this.storage.setItem("blockAdRequest_"+e,{adspot:e,blockUpto:i},"local"),bt.warn("Ad request blocked further for this Adspot: "+e+" upto: "+i)}}},{key:"init",value:function(){({})[this.adspotKey]=0;var e=this.requestThrottleManager.getDeliveryURI();if(""!=e&&this.isMultiAdEnable()){if(this.url=this.getMultiAdURL(),"default"!==e){var t=new URL(this.url),i=null,a=t.protocol;try{var n=new URL(e);i=n.host,a=n.protocol}catch(t){i=e}this.url=t.href.replace(t.host,i).replace(t.protocol,a)}this.sendXHRRequest()}}},{key:"onSuccess",value:function(e){var t=e.data,i=e.adSpotKey;this.onBlockAd(i),this.storage.removeItem(this.adRequestStatusKey),t.config.vr=this.masterConfigManager.get({type:"VR",value:i,defaultValue:""}),ot.PrefetchAd.setData(i,t);var a=new Date;t.config.tms=a.setMinutes(a.getMinutes()+parseInt(t.asi[i].config.tms));var n=0;Object.keys(t.asi[i].cmps).forEach((function(e){Object.keys(t.asi[i].cmps[e]).forEach((function(a){n+=Object.keys(t.asi[i].cmps[e][a].ads).length}))})),t.config.tcount=n,t.config.ecount=0,ot.ProductionAd.setData(i,t)}},{key:"onError",value:function(){this.onBlockAd(this.adspotKey),this.storage.removeItem(this.adRequestStatusKey);var e=sessionStorage.getItem(this.adspotKey+"_fibonacciNumAd")||0;e=parseInt(e),sessionStorage.setItem(this.adspotKey+"_fibonacciNumAd",e+1),this.PreFetchManager.destroyAdspot(this.adspotKey)}},{key:"sendXHRRequest",value:function(){this.storage.setItem(this.adRequestStatusKey,"true"),this.data=this.HTTPRequestParamaterHandler.get(this.getMultiAdRequestParams()),this.data.adspotKey=this.adspotKey,this.data.asi=this.adspotKey,this.data.isMultiAdEnable=!0,this.data.masterConfigVr=this.masterConfigVr,this.HTTPRequest.ajax(this.url,{method:this.getRequestType(),timeout:ot.adRequestTimeout,checkJSON:!0,data:this.data},this.onSuccess.bind(this),this.onError.bind(this))}},{key:"getRequestType",value:function(){return this.requestType=1==this.requestThrottleManager.requestType?"GET":"POST",this.requestType}},{key:"getMultiAdRequestParams",value:function(){var e={};return this.isCustomTargetingEnabled()?e.te="1":e.te="0",e}},{key:"isMultiAdEnable",value:function(){return parseInt(this.masterConfigManager.get({type:"MULTIADS",value:this.adspotKey,defaultValue:0}))}},{key:"isCustomTargetingEnabled",value:function(){return parseInt(this.masterConfigManager.get({type:"APP_TARGETING",value:this.adspotKey,defaultValue:0}))||parseInt(this.masterConfigManager.get({type:"TARGETING",value:this.adspotKey,defaultValue:0}))}}])}();const Jr=Hr;var Wr="";function Yr(e){e?ot.AdManager.hasOwnProperty(e)?(bt.log("closeAd called for placement ID: "+e),ot.AdManager[e].closeAd()):bt.warn("closeAd called with unregistred placement ID: "+e):bt.error("placement Id required for Close ad")}function Qr(e,t){e?ot.AdManager.hasOwnProperty(e)?(bt.log("closeAfter called for placement ID: "+e),ot.AdManager[e].closeAfter(t)):bt.warn("closeAfter called with unregistred placement ID: "+e):bt.error("placement Id required for Close ad")}function Zr(e){return e?ot.AdManager.hasOwnProperty(e)?(bt.log("isAdSkippable called for placement ID: "+e),ot.AdManager[e].isAdSkippable()):(bt.warn("isAdSkippable called with unregistred placement ID: "+e),!1):(bt.error("placement Id required"),!1)}function Xr(){if(Wr){if(ot.ViewStreams[Wr])return ot.ViewStreams[Wr].fetchCurrentAdDetails()}else bt.log("Stream URL is not set.")}function $r(e){if(0!=Object.keys(e).length){bt.log("setConfiguration called with options: "+e),ot.setApplicationConfiguration(e);var t=e.ai||!1;t&&(ot.PreFetchManger[t]=new Jr({appName:e.ai}),ot.PreFetchManger[t].init())}}function eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||null==t)return bt.error("placement Id required or toggle state is required"),!1;ot.AdManager.hasOwnProperty(e)&&(t?(ot.AdManager[e].firstTimePlay(),ot.AdManager[e].resume()):ot.AdManager[e].pause())}function to(e){var t=new Nn({streamURL:e}).getURL(["asi","aic"]);Ce.onMediaURLReady({streamURL:e,mediaURL:t,clientSideTracking:!0,type:"viewPlaylist"})}function io(e,t,i){e?(Wr=e,bt.log("ssaiGetMediaURL called with stream URL: "+e),ot.ViewStreams.hasOwnProperty(e)&&(bt.log("ssaiGetMediaURL destroying stream object: "+e),ot.ViewStreams[e].destroy(),delete ot.ViewStreams[e]),ot.ViewStreams[e]=new Br(e,"StreamURL",t,i),ot.ViewStreams[e].init()):bt.error("streamURL is required for fetching mediaURL")}function ao(){bt.log("ssaiDestroy called");for(var e=0,t=Object.keys(ot.ViewStreams);e<t.length;e++){var i=t[e];ot.ViewStreams[i].destroy(),delete ot.ViewStreams[i]}}function no(e,t,i){bt.log("conversionRAte called with options: "+i),ot.setConversion(e,t,i)}function ro(e,t,i,a,n){if(e)if(Wr=e,bt.log("ssaiStartTracking called with streamURL: "+e+" with url type: "+t),ot.ViewStreams.hasOwnProperty(e))ot.ViewStreams[e].startTracking(i,a,n);else{if("DirectMediaURL"!=t&&"ViewPlaylistURL"!=t)return void bt.error("Need to call ssaiGetMediaURL API before calling this API for streamURL");ot.ViewStreams[e]=new Br(e,t,a,n),ot.ViewStreams[e].init(),ot.ViewStreams[e].startTracking(i,a,n)}else bt.error("streamURL is required for tracking ads")}function oo(e,t){e?ot.ViewStreams.hasOwnProperty(e)?ot.ViewStreams[e].progressUpdate(t):bt.error("Need to call ssaiGetMediaURL API before calling this API for streamURL"):bt.error("streamURL is required for tracking ads")}function so(e,t){e?ot.ViewStreams.hasOwnProperty(e)?ot.ViewStreams[e].manifestUpdate(t):bt.error("Need to call ssaiGetMediaURL API before calling this API for streamURL"):bt.error("streamURL is required for tracking ads")}function co(e,t){e?(bt.log("ssaiPeriodSwitch called with streamURL: "+e),ot.ViewStreams.hasOwnProperty(e)?ot.ViewStreams[e].periodSwitch(t):bt.error("Need to call ssaiGetMediaURL API before calling this API for streamURL")):bt.error("streamURL is required for tracking ads")}})(),JioAds=a})();