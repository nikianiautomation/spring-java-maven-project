(("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]=("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]||[]).push([[98],{"07fb":function(t,e,n){"use strict";n("42b9")},"42b9":function(t,e,n){},c93e:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{staticClass:"speech-to-text-modal",attrs:{isOpen:t.showPopup},on:{closedialog:t.onCloseModal}},[t.toastData.showToast?i("div",[i("Toast",{attrs:{toastData:t.toastData}})],1):t._e(),i("div",{staticClass:"center-container"},[t.componentState.listening?i("div",{staticClass:"center-container"},[i("div",{staticClass:"header"},[t._v(t._s(t.SPEECH_TO_TEXT_CONSTANTS.listening))]),i("div",{staticClass:"bars-container"},[i("div",{attrs:{id:"bars"}},t._l(t.SPEECH_TO_TEXT_CONSTANTS.numberOfBars,(function(t){return i("div",{staticClass:"bar"})})),0)]),i("div",{staticClass:"default-description-container"},[i("div",{staticClass:"content"},[t._v(t._s(t.SPEECH_TO_TEXT_CONSTANTS.try_saying))])])]):t.componentState.notListening?i("div",{staticClass:"center-container"},[i("div",{staticClass:"header"},[t._v(t._s(t.SPEECH_TO_TEXT_CONSTANTS.cant_hear))]),i("div",{staticClass:"tap-mic"},[t._v(t._s(t.SPEECH_TO_TEXT_CONSTANTS.tap_mic))]),i("div",{staticClass:"mic-icon-container",on:{click:t.resetState}},[i("img",{staticClass:"mic-icon",attrs:{src:n("595d"),alt:"mic-icon"}})]),i("div",{staticClass:"content"},[t._v(t._s(t.SPEECH_TO_TEXT_CONSTANTS.try_saying))])]):t.componentState.searching?i("div",{staticClass:"center-container"},[i("div",{staticClass:"header"},[t._v(t._s(t.SPEECH_TO_TEXT_CONSTANTS.listening))]),i("img",{staticClass:"input-taken",attrs:{src:n("1e18"),alt:"done"}}),i("div",{staticClass:"searching"},[t._v(t._s(t.SPEECH_TO_TEXT_CONSTANTS.searching))]),i("div",{staticClass:"content"},[t._v('"'+t._s(t.textInput)+'"')])]):t._e()])])},s=[],o=(n("4795"),n("a15b"),n("d81d"),n("a630"),n("3ca3"),n("498a"),n("d3b7"),n("e6cf"),n("a79d"),n("2463")),a=n("0014"),c=n("9a5d"),r=n("84e8"),l=n("ad561"),h=n("9bfa"),u=(n("2146"),n("1be1")),p={name:"speechToTextModal",data:function(){return{SPEECH_TO_TEXT_CONSTANTS:l["SPEECH_TO_TEXT_CONSTANTS"],numberOfSearchResult:0,recognition:null,textInput:"",transcript:"",componentState:{listening:!0,searching:!1,notListening:!1},timer:null,toastData:{showToast:!1,title:"",type:"",btnTitle:"",redirectUrl:"",isBtnDisable:!1,timeout:1e4,showOnTop:!0,prioratise:!1}}},components:{Modal:o["default"],Toast:h["default"]},watch:{showPopup:function(t){t?this.startRecording():this.stopRecording()}},props:{showPopup:{type:Boolean,default:!1}},destroyed:function(){this.timer&&clearTimeout(this.timer)},methods:{updateRecentSearchData:function(t,e){var n=this,i={search_term:t,url:e};this.$apiSDK.client.post("".concat(Object(l["RAVEN_PROXY_URL"])(),"/search/update/recent/history"),i).then((function(t){var e,i=t.data;(null===i||void 0===i||null===(e=i.recent_search_history)||void 0===e?void 0:e.length)>0&&n.$emit("setRecentSearchData",i.recent_search_history)}))["catch"]((function(){}))},onCloseModal:function(){this.$emit("closedialog")},startRecording:function(){var t=this;this.textInput="",this.transcript="",this.recognition=new webkitSpeechRecognition,this.recognition.continuous=!0,this.recognition.lang="en-US",this.recognition.onstart=function(){t.componentState.listening=!0,t.componentState.searching=!1,t.componentState.notListening=!1,t.startTimer()},this.recognition.onend=function(){clearTimeout(t.timer)},this.recognition.onerror=function(e){t.toastData={showToast:!0,title:"please provide microphone permission",type:"error_toast",showOnTop:!0,prioratise:!0},setTimeout((function(){t.onCloseModal()}),2e3)},this.recognition.onresult=function(e){var n=Array.from(null===e||void 0===e?void 0:e.results).map((function(t){var e;return null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.transcript})).join(" ");t.textInput=n,t.transcript=n,t.componentState.listening=!1,t.componentState.searching=!0,t.componentState.notListening=!1,t.resetTimer(),""!==t.textInput&&setTimeout((function(){t.searchQuery()}),2e3)},this.recognition.start()},stopRecording:function(){this.componentState.listening=!1,this.componentState.searching=!1,this.componentState.notListening=!1,this.resetTimer(),this.recognition&&(this.recognition.stop(),this.recognition=null)},startTimer:function(){var t=this;this.timer=setTimeout((function(){t.componentState.listening=!1,t.componentState.searching=!1,t.componentState.notListening=!0}),1e4)},resetTimer:function(){clearTimeout(this.timer),this.startTimer()},resetState:function(){this.textInput="",this.componentState.listening=!0,this.componentState.searching=!1,this.componentState.notListening=!1,this.startRecording()},getProducts:function(){var t=this,e=this.textInput.trim(),n=r["i"];this.$root.$apiSDK.catalog.getProducts({pageSize:n,filters:!1,q:e}).then((function(n){var i;e&&e.length>0&&n&&n.items&&n.items.length>0?(t.numberOfSearchResult=(null===n||void 0===n||null===(i=n.page)||void 0===i?void 0:i.item_total)||0,Object(u["d"])(null===n||void 0===n?void 0:n.meta)):t.numberOfSearchResult=0}))["catch"]((function(t){}))["finally"]((function(){clevertap.event.push("Searched",{Keyword:t.textInput,"Number of Search Results":t.numberOfSearchResult,searchpageURL:"/products?q="+t.textInput.trim()})}))},searchQuery:function(){this.componentState.listening=!1,this.componentState.searching=!0,this.componentState.notListening=!1,this.getProducts();var t={search_term:this.textInput,search_method:"voice"};Object(c["a"])(a["a"].SEARCH,t,{},"appendVertexData");var e=this.textInput.trim();if(e){var n="/products?q="+e;this.$router.push(n),this.updateRecentSearchData(e,n)}this.onCloseModal()}}},d=p,m=(n("07fb"),n("2877")),T=Object(m["a"])(d,i,s,!1,null,"c535272e",null);e["default"]=T.exports}}]);
//# sourceMappingURL=AwRHhQUBQ_themeBundle.umd.min.98.js.map