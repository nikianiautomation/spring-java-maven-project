(("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]=("undefined"!==typeof self?self:this)["webpackJsonpthemeBundle"]||[]).push([[59],{"0c17":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"resQ-details-wrapper"},[i("div",{class:["resQ-body",{paid:e.isPaid}]},[i("div",{staticClass:"resQ-details img"},[i("div",{staticClass:"resQ-icon"},[i("img",{attrs:{src:e.selectedResQ&&e.selectedResQ.product_details&&e.selectedResQ.product_details.images&&e.selectedResQ.product_details.images.length>0&&e.selectedResQ.product_details.images[0],alt:""}})])]),i("div",{staticClass:"resQ-details"},[i("h1",{staticClass:"resQ-name"},[e._v(" "+e._s(e.selectedResQ&&e.selectedResQ.product_details&&e.selectedResQ.product_details.name)+" ")]),e.selectedResQ&&e.selectedResQ.price&&e.selectedResQ.price.min_effective&&e.isPaid?i("p",{staticClass:"resQ-price"},[e._v(" "+e._s(e.priceFormatter(e.selectedResQ.price.min_effective))+" ")]):e.isPaid?e._e():i("p",{staticClass:"resQ-price free"},[e._v(" "+e._s(e.resQConst["free"])+" ")]),e.isPaid?i("div",{staticClass:"resQ-shipping-wrapper"},[i("span",{staticClass:"resQ-mrp"},[e._v(e._s(e.resQConst["mrp"]))]),e.selectedResQ&&e.selectedResQ.price&&e.selectedResQ.price.min_marked&&e.selectedResQ.price.min_effective&&e.selectedResQ.price.min_marked!=e.selectedResQ.price.min_effective?i("span",{staticClass:"resQ-offer-mrp-price"},[e._v(" "+e._s(e.priceFormatter(e.selectedResQ.price.min_marked))+" ")]):e._e(),i("span",{staticClass:"resQ-tax"},[e._v(e._s(e.resQConst["mrp_text"]))]),e.selectedResQ&&e.selectedResQ.price&&e.selectedResQ.price.min_marked&&e.selectedResQ.price.min_effective&&e.selectedResQ.price.min_marked!=e.selectedResQ.price.min_effective?i("span",{staticClass:"resQ-shipping-details"},[e._v(" "+e._s(e.calculateOff(e.selectedResQ.price.min_effective,e.selectedResQ.price.min_marked))+" ")]):e._e()]):e._e()]),e.selectedResQ&&e.selectedResQ.product_details&&e.selectedResQ.product_details.highlights?i("div",{staticClass:"resQ-details"},[i("h1",{staticClass:"resQ-header"},[e._v(e._s(e.resQConst["key_feature"]))]),i("ul",{staticClass:"resQ-list"},e._l(e.selectedResQ.product_details.highlights,(function(t,a){return i("li",{key:a},[i("p",{staticClass:"dots"}),i("p",[e._v(e._s(t))])])})),0)]):e._e(),e.selectedResQ&&e.selectedResQ.product_details&&e.selectedResQ.product_details.description?i("div",{staticClass:"resQ-details no-bottom-padding"},[i("Accordion",{attrs:{isOpen:!0},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",[e._v("Description")])]},proxy:!0},{key:"description",fn:function(){return[i("div",{staticClass:"resQ-description",domProps:{innerHTML:e._s(e.selectedResQ.product_details.description)}})]},proxy:!0}],null,!1,548472140)})],1):e._e()]),e.isPaid?i("div",{staticClass:"resQ-btn"},[i("fdk-cart",{scopedSlots:e._u([{key:"default",fn:function(t){return[e.selectedChargedResQ[e.selectedResQ&&e.selectedResQ.product_uid]?i("jmbtn",{staticClass:"btn",attrs:{type:"primary",size:"lg"},on:{click:function(i){return e.removeResQ(i,e.selectedResQ,t)}}},[e._v(" Remove Service ")]):i("jmbtn",{staticClass:"btn",attrs:{type:"primary",loading:e.isBtnLoading,size:"lg"},on:{click:function(i){return e.addResQ(i,e.selectedResQ,t)}}},[e._v(" Add Service ")])]}}],null,!1,883845921)})],1):e._e()])},s=[],r=i("ade3"),n=i("5530"),d=i("c7eb"),l=i("1da1"),o=i("2909"),c=(i("a9e3"),i("b0c0"),i("b64b"),i("d81d"),i("99af"),i("d3b7"),i("e6cf"),i("a79d"),i("5480")),u=i("e0ed"),v=i("6767"),p=i("ad561"),m=i("1be1"),_={name:"ResQDetails",props:{selectedResQ:{type:Object,default:{}},selectedChargedResQ:{type:Object,default:{}},isParentInBag:{type:Boolean,default:!1},productUid:{type:Number,default:0},cartItems:{type:Object,default:[]},warrantyResQ:{type:Object,default:{}},parentDetails:{type:Object,default:{}}},components:{Accordion:c["default"],jmbtn:u["default"]},data:function(){var e,t;return{resQConst:v["RESQ"],isPaid:(null===(e=this.selectedResQ)||void 0===e||null===(t=e.price)||void 0===t?void 0:t.min_marked)>.1,cartData:[]}},mounted:function(){this.cartData=Object(o["a"])(this.cartItems)},methods:{priceFormatter:m["fb"],calculateOff:function(e,t){try{var i=t-e,a=i/t,s=Math.floor(100*a);if(s>0)return s+"% OFF"}catch(r){}return""},getBundleForResQPayload:function(e){var t=this;return Object(l["a"])(Object(d["a"])().mark((function i(){var a,s,r,n,l,o,c,u,v;return Object(d["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return c={slug:null===e||void 0===e||null===(a=e.product_details)||void 0===a?void 0:a.slug,size:"OS",pincode:t.pincode},i.next=3,t.$apiSDK.catalog.getProductPriceBySlug(c);case 3:return u=i.sent,v={item_id:null===e||void 0===e?void 0:e.product_uid,item_size:"OS",quantity:1,article_assignment:null===u||void 0===u?void 0:u.article_assignment,seller_id:null===u||void 0===u||null===(s=u.seller)||void 0===s?void 0:s.uid,store_id:null===u||void 0===u||null===(r=u.store)||void 0===r?void 0:r.uid,item_code:null===e||void 0===e||null===(n=e.product_details)||void 0===n?void 0:n.item_code,extra_meta:{allow_remove:null===e||void 0===e?void 0:e.allow_remove,price:null===e||void 0===e?void 0:e.price,parent_item_id:t.productUid,choice:"installation"==(null===e||void 0===e?void 0:e.resQType)?"multi":"single",isFree:"false",name:null===e||void 0===e||null===(l=e.product_details)||void 0===l?void 0:l.name,slug:null===e||void 0===e||null===(o=e.product_details)||void 0===o?void 0:o.slug,article_assignment:null===u||void 0===u?void 0:u.article_assignment,parent_details:t.parentDetails}},i.abrupt("return",v);case 6:case"end":return i.stop()}}),i)})))()},addResQ:function(e,t,i){e.stopPropagation(),"warranty"==(null===t||void 0===t?void 0:t.resQType)?this.addWarrantyServices(t,i):"installation"==(null===t||void 0===t?void 0:t.resQType)&&this.addInstallationServices(t)},removeResQ:function(e,t,i){e.stopPropagation(),"warranty"==(null===t||void 0===t?void 0:t.resQType)?this.removeWarrantyServices(t,i):"installation"==(null===t||void 0===t?void 0:t.resQType)&&this.removeInstallationServices(t,i)},addWarrantyServices:function(e,t){var i=this;return Object(l["a"])(Object(d["a"])().mark((function a(){var s,r,n;return Object(d["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.getBundleForResQPayload(e);case 2:if(s=a.sent,!i.isParentInBag){a.next=17;break}if(!i.warrantyResQ||1!=Object.keys(i.warrantyResQ).length){a.next=13;break}return Object.keys(i.warrantyResQ).map(function(){var e=Object(l["a"])(Object(d["a"])().mark((function e(t){var a,s,n,l,o,c,u,v,p,m,_;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"single"==(null===(a=i.warrantyResQ[t])||void 0===a||null===(s=a.extra_meta)||void 0===s?void 0:s.choice)&&(r={product_details:{slug:null===(n=i.warrantyResQ[t])||void 0===n||null===(l=n.extra_meta)||void 0===l?void 0:l.slug,name:null===(o=i.warrantyResQ[t])||void 0===o||null===(c=o.extra_meta)||void 0===c?void 0:c.name},allow_remove:null===(u=i.warrantyResQ[t])||void 0===u||null===(v=u.extra_meta)||void 0===v?void 0:v.allow_remove,price:null===(p=i.warrantyResQ[t])||void 0===p||null===(m=p.extra_meta)||void 0===m?void 0:m.price,product_uid:null===(_=i.warrantyResQ[t])||void 0===_?void 0:_.item_id});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.next=8,i.getBundleForResQPayload(r);case 8:return n=a.sent,a.next=11,i.removeResQFromCart(n,t,"removeWarrantyResQ",!0,s);case 11:a.next=15;break;case 13:return a.next=15,i.modifyCartItems("addWarrantyResQ",s);case 15:a.next=18;break;case 17:i.$emit("addWarrantyResQ",s);case 18:case"end":return a.stop()}}),a)})))()},addInstallationServices:function(e){var t=this;return Object(l["a"])(Object(d["a"])().mark((function i(){var a;return Object(d["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.getBundleForResQPayload(e);case 2:a=i.sent,t.isParentInBag?t.modifyCartItems("addInstallationResQ",a):t.$emit("addInstallationResQ",a);case 4:case"end":return i.stop()}}),i)})))()},modifyCartItems:function(e,t){var i=this;if(this.cartData&&this.cartData.length>0){this.$emit("resQLoader",!0);var a=[],s="",r="";this.cartData.map((function(e,t){var d,l,o,c,u,v,p,m,_,f,Q,h,R,y,b,g,O,w;(null===e||void 0===e||null===(d=e.product)||void 0===d?void 0:d.uid)==i.productUid&&(s=null===e||void 0===e||null===(O=e.identifiers)||void 0===O?void 0:O.identifier,r=null===e||void 0===e||null===(w=e.article)||void 0===w?void 0:w.size);var x={item_detail:{item_id:null===e||void 0===e||null===(l=e.product)||void 0===l?void 0:l.uid,item_size:null===e||void 0===e||null===(o=e.article)||void 0===o?void 0:o.size,quantity:null===e||void 0===e?void 0:e.quantity,seller_id:null===e||void 0===e||null===(c=e.article)||void 0===c||null===(u=c.seller)||void 0===u?void 0:u.uid,store_id:null===e||void 0===e||null===(v=e.article)||void 0===v||null===(p=v.store)||void 0===p?void 0:p.uid,extra_meta:null===e||void 0===e||null===(m=e.article)||void 0===m?void 0:m.extra_meta,article_assignment:null===e||void 0===e||null===(_=e.article)||void 0===_||null===(f=_.extra_meta)||void 0===f?void 0:f.article_assignment},item_id:null===e||void 0===e||null===(Q=e.product)||void 0===Q?void 0:Q.uid,quantity:null===e||void 0===e?void 0:e.quantity,article_id:null===e||void 0===e?void 0:e.key,item_size:null===e||void 0===e||null===(h=e.article)||void 0===h?void 0:h.size,item_index:t,identifiers:null===e||void 0===e?void 0:e.identifiers,parent_item_identifiers:null===e||void 0===e?void 0:e.parent_item_identifiers};null!==e&&void 0!==e&&null!==(R=e.article)&&void 0!==R&&null!==(y=R.extra_meta)&&void 0!==y&&y.resQ&&(x.item_detail=Object(n["a"])(Object(n["a"])({},x.item_detail),{},{product_group_tags:null===e||void 0===e||null===(b=e.article)||void 0===b||null===(g=b.extra_meta)||void 0===g?void 0:g.resQ})),a.push(x)}));var o={item_detail:{item_id:null===t||void 0===t?void 0:t.item_id,item_size:null===t||void 0===t?void 0:t.item_size,quantity:null===t||void 0===t?void 0:t.quantity,article_assignment:null===t||void 0===t?void 0:t.article_assignment,extra_meta:null===t||void 0===t?void 0:t.extra_meta,seller_id:null===t||void 0===t?void 0:t.seller_id,store_id:null===t||void 0===t?void 0:t.store_id},item_id:null===t||void 0===t?void 0:t.item_id,quantity:null===t||void 0===t?void 0:t.quantity,article_id:(null===t||void 0===t?void 0:t.item_id)+"_OS",item_size:null===t||void 0===t?void 0:t.item_size,identifiers:"",parent_item_identifiers:{identifier:s,parent_item_size:r,parent_item_id:this.productUid,parent_item_store_id:null}},c={items:[].concat(a,[o])};this.$apiSDK.client.put("".concat(Object(p["RAVEN_PROXY_URL"])(),"/cart/v1.0/detail/service"),c).then((function(a){var s;null!==a&&void 0!==a&&a.success&&(i.$emit("updatedCartItems",null===a||void 0===a||null===(s=a.cart)||void 0===s?void 0:s.items),i.$emit(e,t),i.toastData={showToast:!0,title:"The product has been added to your Cart.",type:"success"})}))["catch"]((function(e){}))["finally"](Object(l["a"])(Object(d["a"])().mark((function e(){return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.$emit("resQLoader",!1);case 1:case"end":return e.stop()}}),e)}))))}},removeInstallationServices:function(e,t){var i=this;return Object(l["a"])(Object(d["a"])().mark((function a(){var s;return Object(d["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.getBundleForResQPayload(e);case 2:s=a.sent,i.isParentInBag?i.removeResQFromCart(s,t,"removeInstallationResQ"):i.$emit("removeInstallationResQ",s);case 4:case"end":return a.stop()}}),a)})))()},removeResQFromCart:function(e,t,i){var a=arguments,s=this;return Object(l["a"])(Object(d["a"])().mark((function l(){var o,c,u;return Object(d["a"])().wrap((function(d){while(1)switch(d.prev=d.next){case 0:if(o=a.length>3&&void 0!==a[3]&&a[3],c=a.length>4&&void 0!==a[4]?a[4]:{},!(s.cartData&&s.cartData.length>0)){d.next=8;break}if(u={},s.cartData.map((function(t,i){var a,d,l;(null===t||void 0===t||null===(a=t.article)||void 0===a||null===(d=a.extra_meta)||void 0===d?void 0:d.parent_item_id)==s.productUid&&(null===t||void 0===t||null===(l=t.product)||void 0===l?void 0:l.uid)==(null===e||void 0===e?void 0:e.item_id)&&(u=Object(n["a"])(Object(n["a"])({},t),{},Object(r["a"])({},"item_index",i)))})),!(u&&Object.keys(u).length>0)){d.next=8;break}return d.next=8,s.removeCartApi(u,t,e,i,o,c);case 8:case"end":return d.stop()}}),l)})))()},removeCartApi:function(e,t,i,a){var s=this,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.$emit("resQLoader",!0),t.removeCart([e]).then(function(){var e=Object(l["a"])(Object(d["a"])().mark((function e(t){var l;return Object(d["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.$emit("resQLoader",!1),null===t||void 0===t||!t.success){e.next=7;break}return e.next=4,s.$emit("updatedCartItems",null===t||void 0===t||null===(l=t.cart)||void 0===l?void 0:l.items);case 4:s.$emit(a,i),r||(s.toastData={showToast:!0,title:"The product has been removed from your Cart.",type:"error_toast"}),r&&s.modifyCartItems("addWarrantyResQ",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(e){s.$emit("resQLoader",!1)}))},removeWarrantyServices:function(e,t){var i=this;return Object(l["a"])(Object(d["a"])().mark((function a(){var s;return Object(d["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i.isParentInBag){a.next=7;break}return a.next=3,i.getBundleForResQPayload(e);case 3:s=a.sent,i.removeResQFromCart(s,t,"removeWarrantyResQ"),a.next=8;break;case 7:i.$emit("removeWarrantyResQ",e);case 8:case"end":return a.stop()}}),a)})))()}},watch:{cartItems:function(e){this.cartData=Object(o["a"])(e)}}},f=_,Q=(i("a2d3"),i("2877")),h=Object(Q["a"])(f,a,s,!1,null,"6fcb710c",null);t["default"]=h.exports},"9aec":function(e,t,i){},a2d3:function(e,t,i){"use strict";i("9aec")}}]);
//# sourceMappingURL=AwRHhQUBQ_themeBundle.umd.min.ResQDetails.js.map